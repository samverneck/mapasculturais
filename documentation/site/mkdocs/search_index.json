{
    "docs": [
        {
            "location": "/", 
            "text": "Mapas Culturais\n\n\nMapas Culturais \u00e9 uma aplica\u00e7\u00e3o web server-side baseada em linguagem PHP e banco de dados Postgres, entre outras tecnologias e componentes, que propicia um ambiente virtual para mapeamento, divulga\u00e7\u00e3o e gest\u00e3o de ativos culturais.", 
            "title": "Sobre"
        }, 
        {
            "location": "/#mapas-culturais", 
            "text": "Mapas Culturais \u00e9 uma aplica\u00e7\u00e3o web server-side baseada em linguagem PHP e banco de dados Postgres, entre outras tecnologias e componentes, que propicia um ambiente virtual para mapeamento, divulga\u00e7\u00e3o e gest\u00e3o de ativos culturais.", 
            "title": "Mapas Culturais"
        }, 
        {
            "location": "/mc_deploy/", 
            "text": "Mapas Culturais \n Deploy\n\n\nNeste guia faremos o deploy do Mapas Culturais utilizando o nginx + php-fpm em um sistema Ubuntu 14.04 Server rec\u00e9m instalado somente com o OpenSSH Server. O Banco de dados e a aplica\u00e7\u00e3o rodar\u00e3o no mesmo servidor e usu\u00e1rio.\n\n\nN\u00e3o abordaremos as configura\u00e7\u00f5es de autentica\u00e7\u00e3o, seja com ID da Cultura, seja com Login Cidad\u00e3o. Ao final do guia teremos a aplica\u00e7\u00e3o rodando com o m\u00e9todo de autentica\u00e7\u00e3o Fake.\n\n\nAs linhas que come\u00e7am com \nmapas@server$\n s\u00e3o executadas com o usu\u00e1rio criado para rodar a aplica\u00e7\u00e3o e as linhas que come\u00e7am com \nroot@server#\n s\u00e3o executadas com o usu\u00e1rio \nroot\n.\n\n\n1. Softwares Requeridos\n\n\nPrimeiro vamos instalar os pacotes necess\u00e1rios para o funcionamento do Mapas Culturais.\n\n\n# Atualize os reposit\u00f3rios de refer\u00eancia de sua m\u00e1quina\nroot@server# apt-get update\n\n// Instale as depend\u00eancias diversas\n**root@server# apt-get install git curl npm ruby\n\n// Instale a vers\u00e3o stable mais nova do nodejs\nroot@server# curl -sL https://deb.nodesource.com/setup_4.x | sudo -E bash -\nroot@server# sudo apt-get install -y nodejs\n\n// Instale o postgresql e postgis\nroot@server# apt-get install postgresql postgresql-contrib postgis postgresql-9.3-postgis-2.1 postgresql-9.3-postgis-2.1-scripts\n\n// Instale o php, php-fpm e extens\u00f5es do php utilizadas no sistema\nroot@server# apt-get install php5 php5-gd php5-cli php5-json php5-curl php5-pgsql php-apc php5-fpm\n\n// Instale o nginx\nroot@server# apt-get install nginx\n\n// Instale o gerenciador de depend\u00eancias do PHP Composer\nroot@server# curl -sS https://getcomposer.org/installer | php\nroot@server# mv composer.phar /usr/local/bin/composer.phar\n\n\n\n\nNo Ubuntu o execut\u00e1vel do NodeJS se chama \nnodejs\n, por\u00e9m para o correto funcionamento das bibliotecas utilizadas, o execut\u00e1el deve se chamar \nnode\n. Para isto criamos um link simb\u00f3lico com o comando abaixo\n\n\nroot@server# update-alternatives --install /usr/bin/node node /usr/bin/nodejs 10\n\n\n\n\nInstalando os minificadores de c\u00f3digo Javascript e CSS: uglify-js, uglifycss e autoprefixer\n\n\nroot@server# npm install -g uglify-js uglifycss autoprefixer\n\n\n\n\nInstalando o SASS, utilizado para compilar os arquivos CSS\n\n\nroot@server# gem install sass\n\n\n\n\n2. Clonando o Reposit\u00f3rio\n\n\nPrimeiro vamos criar o usu\u00e1rio que rodar\u00e1 a aplica\u00e7\u00e3o e que ser\u00e1 propriet\u00e1rio do banco de dados, definindo sua home para \n/srv\n e colocando-o no grupo \nwww-data\n.\n\n\nroot@server# useradd -G www-data -d /srv/mapas -m mapas\n\n\n\n\nVamos clonar o reposit\u00f3rio usando o usu\u00e1rio criando, ent\u00e3o precisamos primeiro \"logar\" com este usu\u00e1rio.\n\n\nroot@server# su - mapas\n\n\n\n\nAgora fa\u00e7a o clone do reposit\u00f3rio.\n\n\nmapas@server$ git clone https://github.com/hacklabr/mapasculturais.git\n\n\n\n\nE alterne para o branch v2. Se for uma instala\u00e7\u00e3o de teste, voc\u00ea pode pular esta etapa.\n\n\nmapas@server$ cd mapasculturais\nmapas@server$ git checkout v2\n\n\n\n\nAgora vamos instalar as depend\u00eancias de PHP utilizando o Composer.\n\n\nmapas@server$ cd ~/mapasculturais/src/protected/\nmapas@server$ composer.phar install\n\n\n\n\n3. Banco de Dados\n\n\nVamos voltar ao usu\u00e1rio \nroot\n para criar o banco de dados.\n\n\nroot@server# exit\nmapas@server$ \n\n\n\n\nPrimeiro vamos criar o usu\u00e1rio no banco de dados com o mesno nome do usu\u00e1rio do sistema\n\n\nroot@server# sudo -u postgres psql -c \nCREATE USER mapas\n\n\n\n\n\nAgora vamos criar a base de dados para a aplica\u00e7\u00e3o com o mesmo nome do usu\u00e1rio\n\n\nroot@server# sudo -u postgres createdb --owner mapas mapas\n\n\n\n\nCriar as extens\u00f5es necess\u00e1rias no banco\n\n\nroot@server# sudo -u postgres psql -d mapas -c \nCREATE EXTENSION postgis;\n\nroot@server# sudo -u postgres psql -d mapas -c \nCREATE EXTENSION unaccent;\n\n\n\n\n\nVolte a \"logar\" com o usu\u00e1rio criado e importar o esquema da base de dados\n\n\nroot@server# su - mapas\nmapas@server$ psql -f mapasculturais/db/schema.sql\n\n\n\n\n4. Configura\u00e7\u00f5es de instala\u00e7\u00e3o\n\n\nPrimeiro crie um arquivo de configura\u00e7\u00e3o copiando o arquivo de template de configura\u00e7\u00e3o. Este arquivo est\u00e1 preparado para funcionar com este guia, utilizando o m\u00e9todo de autentica\u00e7\u00e3o Fake.\n\n\nmapas@server$ cp mapasculturais/src/protected/application/conf/config.template.php mapasculturais/src/protected/application/conf/config.php\n\n\n\n\nCriando diret\u00f3rios de log, files e estilo\n\n\nComo root, crie a pasta para os arquivos de log:\n\n\n$ exit\nroot@server# mkdir /var/log/mapasculturais\nroot@server# chown mapas:www-data /var/log/mapasculturais\n\n\n\n\nCom o usu\u00e1rio criado, crie a pasta para os assets e para os uploads:\n\n\nroot@server# su - mapas\nmapas@server$ mkdir mapasculturais/src/assets\nmapas@server$ mkdir mapasculturais/src/files\n\n\n\n\nConfigura\u00e7\u00e3o do nginx\n\n\nPrecisamos criar o \nvirtual host\n do nginx para a aplica\u00e7\u00e3o. Para isto crie, como root, o arquivo \n/etc/nginx/sites-available/mapas.conf\n com o conteudo abaixo:\n\n\nserver {\n  set $site_name meu.dominio.gov.br;\n\n  listen *:80;\n  server_name  meu.dominio.gov.br;\n  access_log   /var/log/mapasculturais/nginx.access.log;\n  error_log    /var/log/mapasculturais/nginx.error.log;\n\n  index index.php;\n  root  /srv/mapas/mapasculturais/src/;\n\n  location / {\n    try_files $uri $uri/ /index.php?$args;\n  }\n\n  location ~ /files/.*\\.php$ {\n      deny all;\n      return 403;\n  }\n\n  location ~* \\.(js|css|png|jpg|jpeg|gif|ico|woff)$ {\n          expires 1w;\n          log_not_found off;\n  }\n\n  location ~ \\.php$ {\n    try_files $uri =404;\n    include fastcgi_params;\n    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n    fastcgi_pass unix:/var/run/php5-fpm-$site_name.sock;\n    client_max_body_size 0;\n  }\n\n  charset utf-8;\n}\n\nserver {\n  listen *:80;\n  server_name www.meu.dominio.gov.br;\n  return 301 $scheme://meu.dominio.gov.br$request_uri;\n}\n\n\n\n\nCrie o link para habilitar o virtual host\n\n\nroot@server# ln -s /etc/nginx/sites-available/mapas.conf /etc/nginx/sites-enabled/mapas.conf\n\n\n\n\nRemover o arquivo default da pasta /etc/nginx/sites-available/\n\n\nroot@server# rm /etc/nginx/sites-available/default\n\n\n\n\nConfigura\u00e7\u00f5es pool do php-fpm\n\n\nCrie o arquivo \n/etc/php5/fpm/pool.d/mapas.conf\n com o conte\u00fado abaixo:\n\n\n[mapas]\nlisten = /var/run/php5-fpm-meu.dominio.gov.br.sock\nlisten.owner = mapas\nlisten.group = www-data\nuser = mapas\ngroup = www-data\ncatch_workers_output = yes\npm = dynamic\npm.max_children = 10\npm.start_servers = 1\npm.min_spare_servers = 1\npm.max_spare_servers = 3\npm.max_requests = 500\nchdir = /srv/mapas\n; php_admin_value[open_basedir] = /srv/mapas:/tmp\nphp_admin_value[session.save_path] = /tmp/\n; php_admin_value[error_log] = /var/log/mapasculturais/php.error.log\n; php_admin_flag[log_errors] = on\nphp_admin_value[display_errors] = 'stderr'\n\n\n\n\n5. Concluindo\n\n\nPara finalizar, precisamos popular o banco de dados com os dados iniciais e executar um script que entre outras coisas compila e minifica os assets, otimiza o autoload de classes do composer e roda atualiza\u00e7\u00f5es do banco.\n\n\nroot@server# su - mapas\nmapas@server$ psql -f mapasculturais/db/initial-data.sql\nmapas@server$ ./mapasculturais/scripts/deploy.sh\n\n\n\n\nReinicie os servi\u00e7os do \nnginx\n e \nphp-fpm\n\n\nroot@server# service nginx restart\nroot@server# service php5-fpm restart\n\n\n\n\n6. P\u00f3s-instala\u00e7\u00e3o \n Criando super admin\n\n\nPara criar super usu\u00e1rios, \u00e9 necess\u00e1rio mudar o status de um usu\u00e1rio j\u00e1 criado, deixando-o como superadmin. Voc\u00ea pode proceder da seguinte forma: \n\n\n1 - Crie um usu\u00e1rio pelo painel;\n\n\n2 - Entre no postgres e conecte-se na base. Caso esteja usando socket, basta que voc\u00ea esteja logado no terminal com o usu\u00e1rio do sistema em quest\u00e3o (se tiver seguido a documenta\u00e7\u00e3o, esse usu\u00e1rio ser\u00e1 o 'mapas') e digite psql. Isso ir\u00e1 mudar o terminal para:\n\n\n  $ mapas =\n\n\n\n\n\n3 - Verifique o n\u00famero do ID do usu\u00e1rio criado. Voc\u00ea pode ver pelo painel do mapas, na url do usu\u00e1rio ou ainda usar um select.\n\n\n$ mapas =\n select id,status, email from usr where email='digite o endere\u00e7o de email do usu\u00e1rio criado';\n\n\n\n\nQuando executar essa linha voc\u00ea vai pegar o id. \n\n\n4 - D\u00ea um insert na tabela Role. \n\n\n$ mapas =\n INSERT INTO role (usr_id, name) VALUES ($id_do_usuario, 'superAdmin'); \n\n\n\n\n5 - Caso queira verificar o sucesso da a\u00e7\u00e3o, d\u00ea um select na tabela role.\n\n\n$ mapas =\n select * from role;\n\n\n\n\n7. P\u00f3s-instala\u00e7\u00e3o \n Processo de autentica\u00e7\u00e3o\n\n\nO Mapas Culturais n\u00e3o tem um sistema pr\u00f3prio de autentica\u00e7\u00e3o, sendo seu funcionamento atrelado a um sistema de autentica\u00e7\u00e3o terceiro. Atualmente, dois sistemas de autentica\u00e7\u00e3o est\u00e3o aptos e testados para essa tarefa: \nMapas Culturais Open ID\n e \nLogin Cidad\u00e3o\n. \n\n\n\n\nVeja detalhes t\u00e9cnicos \naqui\n\n\n\n\n7.1 Requisitos para implementa\u00e7\u00e3o dos sistemas de autentica\u00e7\u00e3o\n\n\nMapas Open ID Conect\n\n\nEst\u00e9 \u00e9 um sistema em Python/Django e est\u00e1 ativo em algumas implementa\u00e7\u00f5es, mas seu c\u00f3digo tem pouca documenta\u00e7\u00e3o e est\u00e1 descontinuado. N\u00e3o recomenda-se a instala\u00e7\u00e3o com esse sistema a menos que o implementador possa contar com um time de desenvolvedores que impulsonem a retomada da ferramenta. \n\n\n\n\nFonte:  \nhttps://github.com/hacklabr/mapasculturais-openid\n.\n\n\n\n\nLogin Cidad\u00e3o \n Instala\u00e7\u00e3o Pr\u00f3pria\n\n\nO Login Cidad\u00e3o \u00e9  um software que implementa um sistema de autentica\u00e7\u00e3o unificado em grande escala, unificando pol\u00edticas de seguran\u00e7a, transpar\u00eancia e privacidade, e colocando o cidad\u00e3o como ponto de converg\u00eancia para a integra\u00e7\u00e3o descentralizada dos dados e aplica\u00e7\u00f5es. Seu c\u00f3digo \u00e9 livre e \u00e9 baseado, principalmente, no framework Symfony (php) \n\n\nLogin Cidad\u00e3o \n Instala\u00e7\u00e3o pr\u00f3pria \n Pr\u00f3s\n\n\nOs pontos positivos relativos aos aspectos de implementa\u00e7\u00e3o de uma instala\u00e7\u00e3o pr\u00f3pria s\u00e3o: \n\n Confidencialidade dos dados e soberania: todos os dados estar\u00e3o fisicamente em posse do implementador;\n\n Maior controle t\u00e9cnico de customiza\u00e7\u00e3o de layout e features. A posse desse customiza\u00e7\u00e3o, desde que com conhecimento adequado, \u00e9 do implementador; \n\n\nLogin Cidad\u00e3o \n Instala\u00e7\u00e3o pr\u00f3pria \n Contras\n\n\n\n\nNecessidade de servidor pr\u00f3prio e dedicado a instala\u00e7\u00e3o;\n\n\nManuten\u00e7\u00e3o com \u00f4nus financeiro uma vez que \u00e9 necess\u00e1rio manter time (interno ou terceirizado) com conhecimentos t\u00e9cnicos adequado \u00e0 opera\u00e7\u00e3o t\u00e9cnica do software;\n\n\nNecessidade de endere\u00e7o (url) dedicada e de certificado SSL implementado (o que tamb\u00e9m pode gerar custos uma vez 99% dos certificados s\u00e3o pagos anualmente);\n\n\nComunidade pequena em torno do software, o que dificulta suporte espont\u00e2neo quando necess\u00e1rio;\n\n\nVers\u00e3o 1.0 do software ainda n\u00e3o lan\u00e7ada;\n\n\nA aplica\u00e7\u00e3o n\u00e3o possui sistema de templates gerenciado via painel, o que gera necessidade de horas-t\u00e9cnicas para desenvolvimento/customiza\u00e7\u00e3o de tema no c\u00f3digo;\n\n\nDocumenta\u00e7\u00e3o ainda incompleta, aumentando curva de aprendizado sobre o sistema;\n\n\nFonte:\n \n\n\nhttps://github.com/redelivre/login-cidadao\n\n\nDocumenta\u00e7\u00e3o de instala\u00e7\u00e3o e parametriza\u00e7\u00e3o t\u00e9cnica:\n (incompleto)\n\n\nhttps://github.com/redelivre/login-cidadao/tree/master/doc\n\n\nDocumenta\u00e7\u00e3o de opera\u00e7\u00e3o:\n \n\n\n(inexistente)\n\n\nPortal:\n \n\n\nhttp://logincidadao.org.br\n\n\n\n\n\n\n\n\nLogin Cidad\u00e3o \n Inst\u00e2ncia MINC (ID da Cultura)\n\n\nPr\u00f3s\n\n\n\n\nConfidencialidade dos dados e soberania protegidas por uma entidade federal (Minist\u00e9rio da Cultura);\n\n\nDispensa necessidade de servidor pr\u00f3prio e dedicado a instala\u00e7\u00e3o;\n\n\nManuten\u00e7\u00e3o sem \u00f4nus financeiro uma vez que equipe do Departamento de Tecnologia da Informa\u00e7\u00e3o do Minist\u00e9rio da Cultura incorpora em seu workflow de trabalho as demandas de atualiza\u00e7\u00e3o do sistema;\n\n\nDispensa necessidade de endere\u00e7o (url) dedicado e de certificado SSL pr\u00f3prio;\n\n\n\n\nContras\n\n\n\n\nMenor controle t\u00e9cnico de customiza\u00e7\u00e3o de layout e features. A posse/soberania destas customiza\u00e7\u00e3o \u00e9 do Minist\u00e9rio da Cultura e este deve ser acionado se necess\u00e1rio; \n\n\nPara implementa\u00e7\u00e3o, \u00e9 necess\u00e1rio acionar equipe do Minc/DTI para criar uma entrada de origem do sistema, uma vez que os administradores s\u00e3o membros do DTI. No entanto esse processo \u00e9 r\u00e1pido e deve acontecer apenas uma vez, no inicio da instala\u00e7\u00e3o ou em momento espor\u00e1dico de eventual manuten\u00e7\u00e3o do sistema. \n\n\n\n\n\n\nFonte:\n \nhttp://id.cultura.gov.br", 
            "title": "Passo-a-passo"
        }, 
        {
            "location": "/mc_deploy/#mapas-culturais-deploy", 
            "text": "Neste guia faremos o deploy do Mapas Culturais utilizando o nginx + php-fpm em um sistema Ubuntu 14.04 Server rec\u00e9m instalado somente com o OpenSSH Server. O Banco de dados e a aplica\u00e7\u00e3o rodar\u00e3o no mesmo servidor e usu\u00e1rio.  N\u00e3o abordaremos as configura\u00e7\u00f5es de autentica\u00e7\u00e3o, seja com ID da Cultura, seja com Login Cidad\u00e3o. Ao final do guia teremos a aplica\u00e7\u00e3o rodando com o m\u00e9todo de autentica\u00e7\u00e3o Fake.  As linhas que come\u00e7am com  mapas@server$  s\u00e3o executadas com o usu\u00e1rio criado para rodar a aplica\u00e7\u00e3o e as linhas que come\u00e7am com  root@server#  s\u00e3o executadas com o usu\u00e1rio  root .", 
            "title": "Mapas Culturais &gt; Deploy"
        }, 
        {
            "location": "/mc_deploy/#1-softwares-requeridos", 
            "text": "Primeiro vamos instalar os pacotes necess\u00e1rios para o funcionamento do Mapas Culturais.  # Atualize os reposit\u00f3rios de refer\u00eancia de sua m\u00e1quina\nroot@server# apt-get update\n\n// Instale as depend\u00eancias diversas\n**root@server# apt-get install git curl npm ruby\n\n// Instale a vers\u00e3o stable mais nova do nodejs\nroot@server# curl -sL https://deb.nodesource.com/setup_4.x | sudo -E bash -\nroot@server# sudo apt-get install -y nodejs\n\n// Instale o postgresql e postgis\nroot@server# apt-get install postgresql postgresql-contrib postgis postgresql-9.3-postgis-2.1 postgresql-9.3-postgis-2.1-scripts\n\n// Instale o php, php-fpm e extens\u00f5es do php utilizadas no sistema\nroot@server# apt-get install php5 php5-gd php5-cli php5-json php5-curl php5-pgsql php-apc php5-fpm\n\n// Instale o nginx\nroot@server# apt-get install nginx\n\n// Instale o gerenciador de depend\u00eancias do PHP Composer\nroot@server# curl -sS https://getcomposer.org/installer | php\nroot@server# mv composer.phar /usr/local/bin/composer.phar  No Ubuntu o execut\u00e1vel do NodeJS se chama  nodejs , por\u00e9m para o correto funcionamento das bibliotecas utilizadas, o execut\u00e1el deve se chamar  node . Para isto criamos um link simb\u00f3lico com o comando abaixo  root@server# update-alternatives --install /usr/bin/node node /usr/bin/nodejs 10  Instalando os minificadores de c\u00f3digo Javascript e CSS: uglify-js, uglifycss e autoprefixer  root@server# npm install -g uglify-js uglifycss autoprefixer  Instalando o SASS, utilizado para compilar os arquivos CSS  root@server# gem install sass", 
            "title": "1. Softwares Requeridos"
        }, 
        {
            "location": "/mc_deploy/#2-clonando-o-repositorio", 
            "text": "Primeiro vamos criar o usu\u00e1rio que rodar\u00e1 a aplica\u00e7\u00e3o e que ser\u00e1 propriet\u00e1rio do banco de dados, definindo sua home para  /srv  e colocando-o no grupo  www-data .  root@server# useradd -G www-data -d /srv/mapas -m mapas  Vamos clonar o reposit\u00f3rio usando o usu\u00e1rio criando, ent\u00e3o precisamos primeiro \"logar\" com este usu\u00e1rio.  root@server# su - mapas  Agora fa\u00e7a o clone do reposit\u00f3rio.  mapas@server$ git clone https://github.com/hacklabr/mapasculturais.git  E alterne para o branch v2. Se for uma instala\u00e7\u00e3o de teste, voc\u00ea pode pular esta etapa.  mapas@server$ cd mapasculturais\nmapas@server$ git checkout v2  Agora vamos instalar as depend\u00eancias de PHP utilizando o Composer.  mapas@server$ cd ~/mapasculturais/src/protected/\nmapas@server$ composer.phar install", 
            "title": "2. Clonando o Reposit\u00f3rio"
        }, 
        {
            "location": "/mc_deploy/#3-banco-de-dados", 
            "text": "Vamos voltar ao usu\u00e1rio  root  para criar o banco de dados.  root@server# exit\nmapas@server$   Primeiro vamos criar o usu\u00e1rio no banco de dados com o mesno nome do usu\u00e1rio do sistema  root@server# sudo -u postgres psql -c  CREATE USER mapas   Agora vamos criar a base de dados para a aplica\u00e7\u00e3o com o mesmo nome do usu\u00e1rio  root@server# sudo -u postgres createdb --owner mapas mapas  Criar as extens\u00f5es necess\u00e1rias no banco  root@server# sudo -u postgres psql -d mapas -c  CREATE EXTENSION postgis; \nroot@server# sudo -u postgres psql -d mapas -c  CREATE EXTENSION unaccent;   Volte a \"logar\" com o usu\u00e1rio criado e importar o esquema da base de dados  root@server# su - mapas\nmapas@server$ psql -f mapasculturais/db/schema.sql", 
            "title": "3. Banco de Dados"
        }, 
        {
            "location": "/mc_deploy/#4-configuracoes-de-instalacao", 
            "text": "Primeiro crie um arquivo de configura\u00e7\u00e3o copiando o arquivo de template de configura\u00e7\u00e3o. Este arquivo est\u00e1 preparado para funcionar com este guia, utilizando o m\u00e9todo de autentica\u00e7\u00e3o Fake.  mapas@server$ cp mapasculturais/src/protected/application/conf/config.template.php mapasculturais/src/protected/application/conf/config.php  Criando diret\u00f3rios de log, files e estilo  Como root, crie a pasta para os arquivos de log:  $ exit\nroot@server# mkdir /var/log/mapasculturais\nroot@server# chown mapas:www-data /var/log/mapasculturais  Com o usu\u00e1rio criado, crie a pasta para os assets e para os uploads:  root@server# su - mapas\nmapas@server$ mkdir mapasculturais/src/assets\nmapas@server$ mkdir mapasculturais/src/files  Configura\u00e7\u00e3o do nginx  Precisamos criar o  virtual host  do nginx para a aplica\u00e7\u00e3o. Para isto crie, como root, o arquivo  /etc/nginx/sites-available/mapas.conf  com o conteudo abaixo:  server {\n  set $site_name meu.dominio.gov.br;\n\n  listen *:80;\n  server_name  meu.dominio.gov.br;\n  access_log   /var/log/mapasculturais/nginx.access.log;\n  error_log    /var/log/mapasculturais/nginx.error.log;\n\n  index index.php;\n  root  /srv/mapas/mapasculturais/src/;\n\n  location / {\n    try_files $uri $uri/ /index.php?$args;\n  }\n\n  location ~ /files/.*\\.php$ {\n      deny all;\n      return 403;\n  }\n\n  location ~* \\.(js|css|png|jpg|jpeg|gif|ico|woff)$ {\n          expires 1w;\n          log_not_found off;\n  }\n\n  location ~ \\.php$ {\n    try_files $uri =404;\n    include fastcgi_params;\n    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n    fastcgi_pass unix:/var/run/php5-fpm-$site_name.sock;\n    client_max_body_size 0;\n  }\n\n  charset utf-8;\n}\n\nserver {\n  listen *:80;\n  server_name www.meu.dominio.gov.br;\n  return 301 $scheme://meu.dominio.gov.br$request_uri;\n}  Crie o link para habilitar o virtual host  root@server# ln -s /etc/nginx/sites-available/mapas.conf /etc/nginx/sites-enabled/mapas.conf  Remover o arquivo default da pasta /etc/nginx/sites-available/  root@server# rm /etc/nginx/sites-available/default  Configura\u00e7\u00f5es pool do php-fpm  Crie o arquivo  /etc/php5/fpm/pool.d/mapas.conf  com o conte\u00fado abaixo:  [mapas]\nlisten = /var/run/php5-fpm-meu.dominio.gov.br.sock\nlisten.owner = mapas\nlisten.group = www-data\nuser = mapas\ngroup = www-data\ncatch_workers_output = yes\npm = dynamic\npm.max_children = 10\npm.start_servers = 1\npm.min_spare_servers = 1\npm.max_spare_servers = 3\npm.max_requests = 500\nchdir = /srv/mapas\n; php_admin_value[open_basedir] = /srv/mapas:/tmp\nphp_admin_value[session.save_path] = /tmp/\n; php_admin_value[error_log] = /var/log/mapasculturais/php.error.log\n; php_admin_flag[log_errors] = on\nphp_admin_value[display_errors] = 'stderr'  5. Concluindo  Para finalizar, precisamos popular o banco de dados com os dados iniciais e executar um script que entre outras coisas compila e minifica os assets, otimiza o autoload de classes do composer e roda atualiza\u00e7\u00f5es do banco.  root@server# su - mapas\nmapas@server$ psql -f mapasculturais/db/initial-data.sql\nmapas@server$ ./mapasculturais/scripts/deploy.sh  Reinicie os servi\u00e7os do  nginx  e  php-fpm  root@server# service nginx restart\nroot@server# service php5-fpm restart  6. P\u00f3s-instala\u00e7\u00e3o   Criando super admin  Para criar super usu\u00e1rios, \u00e9 necess\u00e1rio mudar o status de um usu\u00e1rio j\u00e1 criado, deixando-o como superadmin. Voc\u00ea pode proceder da seguinte forma:   1 - Crie um usu\u00e1rio pelo painel;  2 - Entre no postgres e conecte-se na base. Caso esteja usando socket, basta que voc\u00ea esteja logado no terminal com o usu\u00e1rio do sistema em quest\u00e3o (se tiver seguido a documenta\u00e7\u00e3o, esse usu\u00e1rio ser\u00e1 o 'mapas') e digite psql. Isso ir\u00e1 mudar o terminal para:    $ mapas =   3 - Verifique o n\u00famero do ID do usu\u00e1rio criado. Voc\u00ea pode ver pelo painel do mapas, na url do usu\u00e1rio ou ainda usar um select.  $ mapas =  select id,status, email from usr where email='digite o endere\u00e7o de email do usu\u00e1rio criado';  Quando executar essa linha voc\u00ea vai pegar o id.   4 - D\u00ea um insert na tabela Role.   $ mapas =  INSERT INTO role (usr_id, name) VALUES ($id_do_usuario, 'superAdmin');   5 - Caso queira verificar o sucesso da a\u00e7\u00e3o, d\u00ea um select na tabela role.  $ mapas =  select * from role;  7. P\u00f3s-instala\u00e7\u00e3o   Processo de autentica\u00e7\u00e3o  O Mapas Culturais n\u00e3o tem um sistema pr\u00f3prio de autentica\u00e7\u00e3o, sendo seu funcionamento atrelado a um sistema de autentica\u00e7\u00e3o terceiro. Atualmente, dois sistemas de autentica\u00e7\u00e3o est\u00e3o aptos e testados para essa tarefa:  Mapas Culturais Open ID  e  Login Cidad\u00e3o .    Veja detalhes t\u00e9cnicos  aqui   7.1 Requisitos para implementa\u00e7\u00e3o dos sistemas de autentica\u00e7\u00e3o  Mapas Open ID Conect  Est\u00e9 \u00e9 um sistema em Python/Django e est\u00e1 ativo em algumas implementa\u00e7\u00f5es, mas seu c\u00f3digo tem pouca documenta\u00e7\u00e3o e est\u00e1 descontinuado. N\u00e3o recomenda-se a instala\u00e7\u00e3o com esse sistema a menos que o implementador possa contar com um time de desenvolvedores que impulsonem a retomada da ferramenta.    Fonte:   https://github.com/hacklabr/mapasculturais-openid .   Login Cidad\u00e3o   Instala\u00e7\u00e3o Pr\u00f3pria  O Login Cidad\u00e3o \u00e9  um software que implementa um sistema de autentica\u00e7\u00e3o unificado em grande escala, unificando pol\u00edticas de seguran\u00e7a, transpar\u00eancia e privacidade, e colocando o cidad\u00e3o como ponto de converg\u00eancia para a integra\u00e7\u00e3o descentralizada dos dados e aplica\u00e7\u00f5es. Seu c\u00f3digo \u00e9 livre e \u00e9 baseado, principalmente, no framework Symfony (php)   Login Cidad\u00e3o   Instala\u00e7\u00e3o pr\u00f3pria   Pr\u00f3s  Os pontos positivos relativos aos aspectos de implementa\u00e7\u00e3o de uma instala\u00e7\u00e3o pr\u00f3pria s\u00e3o:   Confidencialidade dos dados e soberania: todos os dados estar\u00e3o fisicamente em posse do implementador;  Maior controle t\u00e9cnico de customiza\u00e7\u00e3o de layout e features. A posse desse customiza\u00e7\u00e3o, desde que com conhecimento adequado, \u00e9 do implementador;   Login Cidad\u00e3o   Instala\u00e7\u00e3o pr\u00f3pria   Contras   Necessidade de servidor pr\u00f3prio e dedicado a instala\u00e7\u00e3o;  Manuten\u00e7\u00e3o com \u00f4nus financeiro uma vez que \u00e9 necess\u00e1rio manter time (interno ou terceirizado) com conhecimentos t\u00e9cnicos adequado \u00e0 opera\u00e7\u00e3o t\u00e9cnica do software;  Necessidade de endere\u00e7o (url) dedicada e de certificado SSL implementado (o que tamb\u00e9m pode gerar custos uma vez 99% dos certificados s\u00e3o pagos anualmente);  Comunidade pequena em torno do software, o que dificulta suporte espont\u00e2neo quando necess\u00e1rio;  Vers\u00e3o 1.0 do software ainda n\u00e3o lan\u00e7ada;  A aplica\u00e7\u00e3o n\u00e3o possui sistema de templates gerenciado via painel, o que gera necessidade de horas-t\u00e9cnicas para desenvolvimento/customiza\u00e7\u00e3o de tema no c\u00f3digo;  Documenta\u00e7\u00e3o ainda incompleta, aumentando curva de aprendizado sobre o sistema;  Fonte:    https://github.com/redelivre/login-cidadao  Documenta\u00e7\u00e3o de instala\u00e7\u00e3o e parametriza\u00e7\u00e3o t\u00e9cnica:  (incompleto)  https://github.com/redelivre/login-cidadao/tree/master/doc  Documenta\u00e7\u00e3o de opera\u00e7\u00e3o:    (inexistente)  Portal:    http://logincidadao.org.br     Login Cidad\u00e3o   Inst\u00e2ncia MINC (ID da Cultura)  Pr\u00f3s   Confidencialidade dos dados e soberania protegidas por uma entidade federal (Minist\u00e9rio da Cultura);  Dispensa necessidade de servidor pr\u00f3prio e dedicado a instala\u00e7\u00e3o;  Manuten\u00e7\u00e3o sem \u00f4nus financeiro uma vez que equipe do Departamento de Tecnologia da Informa\u00e7\u00e3o do Minist\u00e9rio da Cultura incorpora em seu workflow de trabalho as demandas de atualiza\u00e7\u00e3o do sistema;  Dispensa necessidade de endere\u00e7o (url) dedicado e de certificado SSL pr\u00f3prio;   Contras   Menor controle t\u00e9cnico de customiza\u00e7\u00e3o de layout e features. A posse/soberania destas customiza\u00e7\u00e3o \u00e9 do Minist\u00e9rio da Cultura e este deve ser acionado se necess\u00e1rio;   Para implementa\u00e7\u00e3o, \u00e9 necess\u00e1rio acionar equipe do Minc/DTI para criar uma entrada de origem do sistema, uma vez que os administradores s\u00e3o membros do DTI. No entanto esse processo \u00e9 r\u00e1pido e deve acontecer apenas uma vez, no inicio da instala\u00e7\u00e3o ou em momento espor\u00e1dico de eventual manuten\u00e7\u00e3o do sistema.     Fonte:   http://id.cultura.gov.br", 
            "title": "4. Configura\u00e7\u00f5es de instala\u00e7\u00e3o"
        }, 
        {
            "location": "/mc_deploy_theme/", 
            "text": "Esta documenta\u00e7\u00e3o trata da ativa\u00e7\u00e3o do tema no \nconfig.php\n da aplica\u00e7\u00e3o e de algumas configura\u00e7\u00f5es b\u00e1sicas para parametriza\u00e7\u00e3o de um tema j\u00e1 existente. \n\n\nTemas conhecidos\n\n\n\n\nMapa nas Nuvens - Distrito Federal\n\n\nTema S\u00e3o Jos\u00e9 dos Campos\n\n\nTema Mato Grosso\n\n\nTema Belo Horizonte\n\n\nTema Estado da Cultura - Estado de S\u00e3o Paulo\n\n\nTema Santo Andr\u00e9\n\n\n\n\nAtivando um novo tema\n\n\nOs arquivos de tema da aplica\u00e7\u00e3o ficam em:\n\n\n/mapasculturais/src/protected/application/themes\n\n\n\n\nL\u00e1 est\u00e3o os temas v\u00e1lidos da aplica\u00e7\u00e3o. Certifique-se de ter um tema desejavel neste diretorio para que seja ativado. \n\n\nPara ativar o tema edite o arquivo config.php. Este arquivo estende o arquivo conf-base.php. J\u00e1 o arquivo conf-template.php \u00e9 apenas um exemplo que pode ser usado para elaborar um novo config.php\n\n\n$ vi mapasculturais/src/protected/application/conf/config.php\n\n\n\n\nEdite as linhas abaixo:\n\n\n/* configure e descomente as linhas abaixo para habilitar um tema personalizado */\n// 'namespaces' =\n array_merge( $config['namespaces'], ['SEU-NAME-SPACE' =\n 'CAMINHO-DO-TEMPLATE']),\n// 'themes.active' =\n 'SEU-NAME-SPACE',\n\n\n\n\nPara algo como isso:\n\n\n/* configure e descomente as linhas abaixo para habilitar um tema personalizado */\n'namespaces' =\n array_merge( $config['namespaces'], ['SantoAndre' =\n THEMES_PATH.'SantoAndre']),\n'themes.active' =\n 'SantoAndre',\n\n\n\n\n\nRepare que, al\u00e9m de retirar os coment\u00e1rios e inserir os namespaces, acrescentamos, nas linhas acima, o caminho absoluto do tema concatenando uma vari\u00e1vel global de caminho (THEMES_PATH) com o nome do diret\u00f3rio onde est\u00e1 o tema customizado ('SantoAndre').\n\n\nParametrizando foco do mapa e zoom\n\n\nAinda no arquivo do configuracoes da aplicacao (config.php), voce pode encontrar parametros para latitude, longitude e zoom do mapa. \n\n\nVeja: \n\n\n$ vi mapasculturais/src/protected/application/conf/config.php\n\n\n\n\nBusque e altere as linhas abaixo.\n\n\n// latitude, longitude\n'maps.center' =\n [-23.666380211046917, -46.52915954589844],\n\n// zoom do mapa\n'maps.zoom.default' =\n 12,\n\n\n\n\nRode o script de deploy com o usuario da aplica\u00e7\u00e3o. \n\n\nModo Homologa\u00e7\u00e3o, Produ\u00e7\u00e3o ou Desenvolvimento\n\n\nAp\u00f3s a instala\u00e7\u00e3o da ferramenta, no arquivo mapasculturais/src/protected/application/conf/config.php, encontre essas linhas: \n\n\n    // development, staging, production\n    'app.mode' =\n 'production',\n\n    'doctrine.isDev' =\n false,\n    'slim.debug' =\n false,\n    'maps.includeGoogleLayers' =\n true,\n\n\n\n\nAlterando a chave app.mode para development voc\u00ea ter\u00e1 sa\u00eddas para o modo de desenvolvimento da aplica\u00e7\u00e3o. Alterando tamb\u00e9m a chave slim.debug para true, voc\u00ea poder\u00e1 ver as sa\u00eddas de debug da aplica\u00e7\u00e3o. Essas duas modifica\u00e7\u00f5es s\u00e3o extremamente uteis para identificar erros desconhecidos ou ainda para testar sa\u00eddas e vericar resultados.", 
            "title": "Aplicando um tema"
        }, 
        {
            "location": "/mc_deploy_theme/#temas-conhecidos", 
            "text": "Mapa nas Nuvens - Distrito Federal  Tema S\u00e3o Jos\u00e9 dos Campos  Tema Mato Grosso  Tema Belo Horizonte  Tema Estado da Cultura - Estado de S\u00e3o Paulo  Tema Santo Andr\u00e9", 
            "title": "Temas conhecidos"
        }, 
        {
            "location": "/mc_deploy_theme/#ativando-um-novo-tema", 
            "text": "Os arquivos de tema da aplica\u00e7\u00e3o ficam em:  /mapasculturais/src/protected/application/themes  L\u00e1 est\u00e3o os temas v\u00e1lidos da aplica\u00e7\u00e3o. Certifique-se de ter um tema desejavel neste diretorio para que seja ativado.   Para ativar o tema edite o arquivo config.php. Este arquivo estende o arquivo conf-base.php. J\u00e1 o arquivo conf-template.php \u00e9 apenas um exemplo que pode ser usado para elaborar um novo config.php  $ vi mapasculturais/src/protected/application/conf/config.php  Edite as linhas abaixo:  /* configure e descomente as linhas abaixo para habilitar um tema personalizado */\n// 'namespaces' =  array_merge( $config['namespaces'], ['SEU-NAME-SPACE' =  'CAMINHO-DO-TEMPLATE']),\n// 'themes.active' =  'SEU-NAME-SPACE',  Para algo como isso:  /* configure e descomente as linhas abaixo para habilitar um tema personalizado */\n'namespaces' =  array_merge( $config['namespaces'], ['SantoAndre' =  THEMES_PATH.'SantoAndre']),\n'themes.active' =  'SantoAndre',  Repare que, al\u00e9m de retirar os coment\u00e1rios e inserir os namespaces, acrescentamos, nas linhas acima, o caminho absoluto do tema concatenando uma vari\u00e1vel global de caminho (THEMES_PATH) com o nome do diret\u00f3rio onde est\u00e1 o tema customizado ('SantoAndre').", 
            "title": "Ativando um novo tema"
        }, 
        {
            "location": "/mc_deploy_theme/#parametrizando-foco-do-mapa-e-zoom", 
            "text": "Ainda no arquivo do configuracoes da aplicacao (config.php), voce pode encontrar parametros para latitude, longitude e zoom do mapa.   Veja:   $ vi mapasculturais/src/protected/application/conf/config.php  Busque e altere as linhas abaixo.  // latitude, longitude\n'maps.center' =  [-23.666380211046917, -46.52915954589844],\n\n// zoom do mapa\n'maps.zoom.default' =  12,  Rode o script de deploy com o usuario da aplica\u00e7\u00e3o.", 
            "title": "Parametrizando foco do mapa e zoom"
        }, 
        {
            "location": "/mc_deploy_theme/#modo-homologacao-producao-ou-desenvolvimento", 
            "text": "Ap\u00f3s a instala\u00e7\u00e3o da ferramenta, no arquivo mapasculturais/src/protected/application/conf/config.php, encontre essas linhas:       // development, staging, production\n    'app.mode' =  'production',\n\n    'doctrine.isDev' =  false,\n    'slim.debug' =  false,\n    'maps.includeGoogleLayers' =  true,  Alterando a chave app.mode para development voc\u00ea ter\u00e1 sa\u00eddas para o modo de desenvolvimento da aplica\u00e7\u00e3o. Alterando tamb\u00e9m a chave slim.debug para true, voc\u00ea poder\u00e1 ver as sa\u00eddas de debug da aplica\u00e7\u00e3o. Essas duas modifica\u00e7\u00f5es s\u00e3o extremamente uteis para identificar erros desconhecidos ou ainda para testar sa\u00eddas e vericar resultados.", 
            "title": "Modo Homologa\u00e7\u00e3o, Produ\u00e7\u00e3o ou Desenvolvimento"
        }, 
        {
            "location": "/mc_deploy_shapefiles/", 
            "text": "Mapas Culturais \n Deploy \n Shapefiles\n\n\n\n\nOs SHAPEFILEs devem, preferencialmente:\n\n\n\n\nEstar no sistema de coordenadas WGS84 (EPSG 4326), que \u00e9 o sistem de coordenadas usado pelo Sistema de Posicionamento Global (GPS) e pelos Mapas Culturais. \u00c9 poss\u00edvel converter de praticamente qualquer outro sistema de coordenadas para o WGS84usando o Quantum GIS;\n\n\nConsistir de um SHAPEFILE bidimensional por grupo de dados (bairros, distritos, regi\u00f5es, munic\u00edpios...), n\u00e3o m\u00faltiplos arquivos. \u00c9 poss\u00edvel combinar m\u00faltiplos SHAPEFILEs em um usando o plugin MMQGIS do Quantum GIS e \u00e9 poss\u00edvel converter de polyline e outros formatos vetoriais para o padr\u00e3o de pol\u00edgonos de duas dimens\u00f5es usando o Quantum GIS;\n\n\nConter uma legenda por pol\u00edgono;\n\n\n\n\nRefer\u00eancia: http://suite.opengeo.org/opengeo-docs/dataadmin/pgGettingStarted/shp2pgsql.html\n\n\nUtilizando shapefiles na aplica\u00e7\u00e3o\n\n\nOs shapefiles podem ser usados para duas finalidades:\n\n\n1. Como refer\u00eancia para gerar metadados para as entidades salvas\n\n\nCada vez que uma entidade \u00e9 salva, a aplica\u00e7\u00e3o faz uma consulta na base de dados geogr\u00e1fica para saber dentro de quais pol\u00edgonos aquela entidade est\u00e1. Ao salvar um espa\u00e7o, por exemplo, a aplica\u00e7\u00e3o pode automaticamente deduzir que ele est\u00e1 na subprefeitura da S\u00e9, no munic\u00edpio de S\u00e3o Paulo e no estado de S\u00e3o Paulo, e salvar esses tr\u00eas metadados diretamente na entidade.\n\n\nPara isso, \u00e9 preciso:\n\n\n\n\ncarregar os pol\u00edgonos na tabela Geodivision\n\n\neditar o arquivo de configura\u00e7\u00e3o e adicionar a informa\u00e7\u00e3o das divis\u00f5es geogr\u00e1ficas que ser\u00e3o usadas.\n\n\n\n\nEx:\n'app.geoDivisionsHierarchy' =\n array(\n            'zona' =\n 'Zona',\n            'subprefeitura' =\n 'Subprefeitura',\n            'distrito' =\n 'Distrito'\n        ),\n\n\nOnde 'zona', 'subprefeitura' e 'distrito' s\u00e3o os valores da coluna 'type' da tabela Geodivision.\n\n\nEssa configura\u00e7\u00e3o criar\u00e1, automaticamente, os metadados geoZona, geoSubprefeitura e geoDistrito.\n\n\n2. Como adicionar camadas na visualiza\u00e7\u00e3o do mapa\n\n\n0. Tenha os arquivos de formas\n\n\nVoc\u00ea necessitar\u00e1 tem, se poss\u00edvel no ambiente em que deseja fazer a importa\u00e7\u00e3o, os arquivos de formas (shapefiles). Eles devem vir em um diret\u00f3rio com os seguintes arquivos:\n\n\nNOME-DO-ARQUIVO.shp\nNOME-DO-ARQUIVO.shx\nNOME-DO-ARQUIVO.dbf\n\n\n1. Verifique se PostGis est\u00e1 respondendo requisi\u00e7\u00f5es.\n\n\nExecute os seguintes comandos:\n\n\n# su postgres\n$ psql -U postgres -d mapas -c \nSELECT postgis_version()\n\n\n\n\n\nVoc\u00ea ver\u00e1 uma mensagem como essa:\n\n\n            postgis_version\n---------------------------------------\n 2.1 USE_GEOS=1 USE_PROJ=1 USE_STATS=1\n(1 row)\n\n\n\n\n2 - Converta os arquivos de formato shape (.shp) para formato base de dados (.sql)\n\n\nExemplo de convers\u00e3o:\n\n\nshp2pgsql -W LATIN1 -I -s 4326 mapasculturais/shapefiles/BAIRRO_POP.shp BAIRRO-TEMPORARIO \n bairro-shapefiles.sql\n\n\n\n\nobs: \u00e9 importante colocar um nome tempor\u00e1rio para n\u00e3o sobreescrever alguma tabela da base.\n\n\n3 - Insira o arquivo \n.sql\n gerado em uma nova tabela.\n\n\nO arquivo .sql gerado tem comandos para cria\u00e7\u00e3o de uma nova tabela com nome designado e inser\u00e7\u00e3o de registros. Rode esse comando para criar e inserir registros na tabela mapas:\n\n\n$ psql -U mapas -d mapas -a -f /caminho/para/arquivo/bairro-shapefiles.sql\n\n\n\n\n4 - Popule a tabela geo_division na base do mapas\n\n\nNa base de dados do mapas, h\u00e1 uma tabela geo_division com os seguintes campos:\n\n\n\n\nid                  - serial - PK\nparente_id          - integer\ntype                - character varying (32)\ncod                 - character varying (32)\nname                - character varying (32)\ngeom                - geometry\n\n\n\n\n\u00c9 necess\u00e1rio preencher os campos \ntype\n, \ncod\n, \nname\n e \ngeom\n com os valores que foram importados na tabela tempor\u00e1ria, onde:\n\n\ntype: Nome da hierarquia que est\u00e1 sendo importada, registrada na configura\u00e7\u00e3o \"app.geoDivisionsHierarchy\"\ncod: C\u00f3digo de identifica\u00e7\u00e3o, importado na tabela tempr\u00e1ria do shapefiles\nname: Nome de exibi\u00e7\u00e3o, importado na tabela tempr\u00e1ria do shapefiles\ngeom: Pol\u00edgono do contorno, importado na tabela tempr\u00e1ria do shapefiles\n\n\nAp\u00f3s identificar na tabela tempor\u00e1ria quais s\u00e3o os campos correspondentes na tabela geo_division, voc\u00ea pode colocar os dados utilizando \nINSERT\n e \nSELECT\n e apagar a tabela tempor\u00e1ria.\n\n\nO comando deve ser parecido com isso:\n\n\npsql -d mapas -c \ninsert into geo_division (type, cod, name, geom) (select 'bairro', id_bairro_, nome_bairr, geom from bairro_temp)\n\npsql -d mapas -c \ndrop table if exists bairro_temp", 
            "title": "Inserindo shapefiles"
        }, 
        {
            "location": "/mc_deploy_shapefiles/#mapas-culturais-deploy-shapefiles", 
            "text": "Os SHAPEFILEs devem, preferencialmente:   Estar no sistema de coordenadas WGS84 (EPSG 4326), que \u00e9 o sistem de coordenadas usado pelo Sistema de Posicionamento Global (GPS) e pelos Mapas Culturais. \u00c9 poss\u00edvel converter de praticamente qualquer outro sistema de coordenadas para o WGS84usando o Quantum GIS;  Consistir de um SHAPEFILE bidimensional por grupo de dados (bairros, distritos, regi\u00f5es, munic\u00edpios...), n\u00e3o m\u00faltiplos arquivos. \u00c9 poss\u00edvel combinar m\u00faltiplos SHAPEFILEs em um usando o plugin MMQGIS do Quantum GIS e \u00e9 poss\u00edvel converter de polyline e outros formatos vetoriais para o padr\u00e3o de pol\u00edgonos de duas dimens\u00f5es usando o Quantum GIS;  Conter uma legenda por pol\u00edgono;   Refer\u00eancia: http://suite.opengeo.org/opengeo-docs/dataadmin/pgGettingStarted/shp2pgsql.html", 
            "title": "Mapas Culturais &gt; Deploy &gt; Shapefiles"
        }, 
        {
            "location": "/mc_deploy_shapefiles/#utilizando-shapefiles-na-aplicacao", 
            "text": "Os shapefiles podem ser usados para duas finalidades:  1. Como refer\u00eancia para gerar metadados para as entidades salvas  Cada vez que uma entidade \u00e9 salva, a aplica\u00e7\u00e3o faz uma consulta na base de dados geogr\u00e1fica para saber dentro de quais pol\u00edgonos aquela entidade est\u00e1. Ao salvar um espa\u00e7o, por exemplo, a aplica\u00e7\u00e3o pode automaticamente deduzir que ele est\u00e1 na subprefeitura da S\u00e9, no munic\u00edpio de S\u00e3o Paulo e no estado de S\u00e3o Paulo, e salvar esses tr\u00eas metadados diretamente na entidade.  Para isso, \u00e9 preciso:   carregar os pol\u00edgonos na tabela Geodivision  editar o arquivo de configura\u00e7\u00e3o e adicionar a informa\u00e7\u00e3o das divis\u00f5es geogr\u00e1ficas que ser\u00e3o usadas.   Ex:\n'app.geoDivisionsHierarchy' =  array(\n            'zona' =  'Zona',\n            'subprefeitura' =  'Subprefeitura',\n            'distrito' =  'Distrito'\n        ),  Onde 'zona', 'subprefeitura' e 'distrito' s\u00e3o os valores da coluna 'type' da tabela Geodivision.  Essa configura\u00e7\u00e3o criar\u00e1, automaticamente, os metadados geoZona, geoSubprefeitura e geoDistrito.  2. Como adicionar camadas na visualiza\u00e7\u00e3o do mapa  0. Tenha os arquivos de formas  Voc\u00ea necessitar\u00e1 tem, se poss\u00edvel no ambiente em que deseja fazer a importa\u00e7\u00e3o, os arquivos de formas (shapefiles). Eles devem vir em um diret\u00f3rio com os seguintes arquivos:  NOME-DO-ARQUIVO.shp\nNOME-DO-ARQUIVO.shx\nNOME-DO-ARQUIVO.dbf  1. Verifique se PostGis est\u00e1 respondendo requisi\u00e7\u00f5es.  Execute os seguintes comandos:  # su postgres\n$ psql -U postgres -d mapas -c  SELECT postgis_version()   Voc\u00ea ver\u00e1 uma mensagem como essa:              postgis_version\n---------------------------------------\n 2.1 USE_GEOS=1 USE_PROJ=1 USE_STATS=1\n(1 row)  2 - Converta os arquivos de formato shape (.shp) para formato base de dados (.sql)  Exemplo de convers\u00e3o:  shp2pgsql -W LATIN1 -I -s 4326 mapasculturais/shapefiles/BAIRRO_POP.shp BAIRRO-TEMPORARIO   bairro-shapefiles.sql  obs: \u00e9 importante colocar um nome tempor\u00e1rio para n\u00e3o sobreescrever alguma tabela da base.  3 - Insira o arquivo  .sql  gerado em uma nova tabela.  O arquivo .sql gerado tem comandos para cria\u00e7\u00e3o de uma nova tabela com nome designado e inser\u00e7\u00e3o de registros. Rode esse comando para criar e inserir registros na tabela mapas:  $ psql -U mapas -d mapas -a -f /caminho/para/arquivo/bairro-shapefiles.sql  4 - Popule a tabela geo_division na base do mapas  Na base de dados do mapas, h\u00e1 uma tabela geo_division com os seguintes campos:   id                  - serial - PK\nparente_id          - integer\ntype                - character varying (32)\ncod                 - character varying (32)\nname                - character varying (32)\ngeom                - geometry   \u00c9 necess\u00e1rio preencher os campos  type ,  cod ,  name  e  geom  com os valores que foram importados na tabela tempor\u00e1ria, onde:  type: Nome da hierarquia que est\u00e1 sendo importada, registrada na configura\u00e7\u00e3o \"app.geoDivisionsHierarchy\"\ncod: C\u00f3digo de identifica\u00e7\u00e3o, importado na tabela tempr\u00e1ria do shapefiles\nname: Nome de exibi\u00e7\u00e3o, importado na tabela tempr\u00e1ria do shapefiles\ngeom: Pol\u00edgono do contorno, importado na tabela tempr\u00e1ria do shapefiles  Ap\u00f3s identificar na tabela tempor\u00e1ria quais s\u00e3o os campos correspondentes na tabela geo_division, voc\u00ea pode colocar os dados utilizando  INSERT  e  SELECT  e apagar a tabela tempor\u00e1ria.  O comando deve ser parecido com isso:  psql -d mapas -c  insert into geo_division (type, cod, name, geom) (select 'bairro', id_bairro_, nome_bairr, geom from bairro_temp) \npsql -d mapas -c  drop table if exists bairro_temp", 
            "title": "Utilizando shapefiles na aplica\u00e7\u00e3o"
        }, 
        {
            "location": "/mc_config_api/", 
            "text": "Documentacao da API\n\n\nPara tornar mais f\u00e1cil a leitura dos exemplos ser\u00e1 utilizada a fun\u00e7\u00e3o getJSON do jQuery.\n\n\nAction find\n\n\nPar\u00e2metros\nO M\u00e9todo find aceita os seguintes par\u00e2metros:\n\n\n\n\n@select\n - usado para selecionar as propriedades da entidade que ser\u00e3o retornadas pela api. Voc\u00ea pode retornar propriedades de entidades relacionadas. \nex:( @select: id,name,owner.name,owner.singleUrl)\n\n\n@order\n - usado para definir em que ordem o resultado ser\u00e1 retornado. \nex:( @order: name ASC, id DESC)\n\n\n@limit\n - usado para definir o n\u00famero m\u00e1ximo de entidades que ser\u00e3o retornadas. \nex:( @limit: 10)\n\n\n@page\n - usado em pagina\u00e7\u00f5es em conjunto com o @limit. \nex:( @limit:10, @page: 2)\n\n\n@or\n - se usado a api usar\u00e1 o operador l\u00f3gico OR para criar a query. \nex:( @or:1)\n\n\n@type\n - usado para definir o tipo de documento a ser gerado com o resultado da busca. \nex:( @type: html; ou @type: json; ou @type: xml)\n\n\n@files\n - indica que \u00e9 para retornar os arquivos anexos. \nex:( @files=(avatar.avatarSmall,header):name,url - retorna o nome e url do thumbnail de tamanho avatarSmall da imagem avatar e a imagem header original)\n\n\n\n\nOperadores\n\n\nPara filtrar os resultados o m\u00e9todo find aceita os seguintes operadores em qualquer das propriedades e metadados das entidades:\n\n\n\n\nEQ\n (igual) \nex:( id: EQ (10) - seleciona a entidade de id igual a 10)\n\n\nGT\n (maior que) \nex:( id: GT (10) - seleciona todas as entidades com id maior a 10)\n\n\nGTE\n (maior ou igual) \nex:( id: GTE (10) - seleciona todas as entidades com id maior ou igual a 10)\n\n\nLT\n (menor que) \nex:( id: LT (10) - seleciona todas as entidades com id menor a 10)\n\n\nLTE\n (menor ou igual) \nex:( id: LTE (10) - seleciona todas as entidades com id menor ou igual a 10)\n\n\nNULL\n (nao definido) \nex:( age: null() - seleciona todas as entidades com idade n\u00e3o definida)\n\n\nIN\n (en) \nex:( id: IN (10,18,33) - seleciona as entidades de id 10, 18 e 33)\n\n\nBET\n (entre) \nex:( id: BET (100,200) - seleciona as entidades de id entre 100 e 200)\n\n\nLIKE\n \nex:( name: LIKE (fael) - seleciona as entidades com nome LIKE '\nfael\n' (ver operador LIKE do sql))\n\n\nILIKE\n (LIKE ignorando mai\u00fasculas e min\u00fasculas) \nex:( name: ILIKE (rafael*) seleciona as entidades com o nome come\u00e7ando com Rafael, rafael, RAFAEL, etc.)\n\n\nOR\n (operador l\u00f3gico OU) \nex:( id: OR (BET (100,200), BET (300,400), IN (10,19,33)) - seleciona as entidades com id entre 100 e 200, entre 300 e 400 ou de id 10,19 ou 33)\n\n\nAND\n (operador l\u00f3gico AND) \nex:( name: AND (ILIKE ('Rafael%'), ILIKE ('*Freitas')) - seleciona as entidades com nome come\u00e7ando com Rafael e terminando com Freitas (por exemplo: Rafael Freitas, Rafael Chaves Freitas, RafaelFreitas))\n\n\nGEONEAR\n \nex:( _geoLocation: GEONEAR (-46.6475415229797, -23.5413271705055, 700) - seleciona as entidades que est\u00e3o no m\u00e1ximo h\u00e1 700 metros do ponto de latitude -23.5413271705055 e longitude -46.6475415229797)\n\n\n\n\nExemplos de uso.\n\n\n\n\nretornando o nome do espa\u00e7o de id 10\n\n\n\n\n$.getJSON(\n  'http://mapasculturais.local/api/space/find',\n  {\n    '@select': 'name', \n    'id': 'eq(10)'\n  },\n  function (response){ console.log(response); });\n\n\n\n\n\n\nretornando o id, nome e email dos agentes com email do google\n\n\n\n\n$.getJSON(\n  'http://mapasculturais.local/api/agent/find',\n  {\n    '@select': 'id, name, email', \n    'email': 'like(*gmail.com)'\n  },\n  function (response){ console.log(response); });\n\n\n\n\n\n\nretornando o id e nome do espa\u00e7os e nomes do agentes que publicaram os espa\u00e7os \n\n\n\n\n$.getJSON(\n  'http://mapasculturais.local/api/space/find',\n  {\n    '@select': 'id, name, owner.name',\n  },\n  function (response){ console.log(response); });\n\n\n\n\n\n\nretornando o id e nome dos agentes com email do google ou do yahoo\n\n\n\n\n$.getJSON(\n  'http://mapasculturais.local/api/agent/find',\n  {\n    '@select': 'id, name', \n    'emailPublico': 'OR(like(*gmail.com), like(*yahoo.com))'\n  }, \n  function (response){ console.log(response); });\n\n\n\n\n\n\nretornando o id, nome dos agentes com com id entre 100 e 200, exceto o de id 150\n\n\n\n\n$.getJSON(\n  'http://mapasculturais.local/api/agent/find',\n  {\n    '@select': 'id, name', \n    'id': 'AND(BET(100,200), !EQ(150))'\n  }, \n  function (response){ console.log(response); });\n\n\n\n\n\n\nretornando o id e nome dos agentes com com id entre 100 e 200, exceto o de id 150 e que tenham email do google ordenado pela data de cria\u00e7\u00e3o do agente\n\n\n\n\n$.getJSON(\n  'http://mapasculturais.local/api/agent/find',\n  {\n    '@select': 'id, name',\n    '@order': 'createTimestamp ASC',\n    'id': 'AND(BET(100,200), !EQ(150))',\n    'emailPublico': 'OR(like(*gmail.com), like(*yahoo.com))'\n  },\n  function (response){ console.log(response); });\n\n\n\n\n\n\nretornando o id e nome dos agentes com com id entre 100 e 200, exceto o de id 150 OU que tenham email do google ordenado pelo nome descendentemente\n\n\n\n\n$.getJSON(\n  'http://mapasculturais.local/api/agent/find',\n  {\n    '@select': 'id, name',\n    '@order': 'name DESC',\n    '@or': 1,\n    'id': 'AND(BET(100,200), !EQ(150))',\n    'emailPublico': 'OR(like(*gmail.com), like(*yahoo.com))'\n  },\n  function (response){ console.log(response); });\n\n\n\n\n\n\nretornando a segunda p\u00e1gina de 10 agentes ordenado pelo nome\n\n\n\n\n$.getJSON(\n  'http://mapasculturais.local/api/agent/find',\n  {\n    '@select': 'id, name, files',\n    '@order': 'name ASC',\n    '@limit': 10,\n    '@page': 2\n  },\n  function (response){ console.log(response); });\n\n\n\n\n\n\nretornando a segunda p\u00e1gina de 10 agentes ordenado pelo nome com a url do avatar, url do thumbnail do avatar e todos os downloads\n\n\n\n\n$.getJSON(\n  'http://mapasculturais.local/api/agent/find',\n  {\n    '@select': 'id, name',\n    '@order': 'name ASC',\n    '@limit': 10,\n    '@page': 2,\n    '@files': '(avatar,avatar.avatarSmall,downloads):url'\n  },\n  function (response){ console.log(response); });\n\n\n\n\n\n\nretornando as entidades pr\u00f3ximas a latitude -23.5413271705055 e longitude -46.6475415229797\n\n\n\n\n$.getJSON(\n  'http://mapasculturais.local/api/agent/find',\n  {\n    '@select': 'id, name, location',\n    '@order': 'name ASC',\n    '_geoLocation': 'GEONEAR(-46.6475415229797,-23.5413271705055,700)'\n  },\n  function (response){ console.log(response); });\n\n\n\n\nFiltrando por relacionamentos\n\n\n\n\nSelecionando todos os espa\u00e7os do agente de id 1\n\n\n\n\n$.getJSON(\n  'http://mapasculturais.local/api/agent/find',\n  {\n    '@select': 'id, name, location',\n    '@order': 'name ASC',\n    'owner': 'EQ(@Agent:1)'\n  },\n  function (response){ console.log(response); });\n\n\n\n\n\n\nSelecionando todos os eventos do projeto de id 4\n\n\n\n\n$.getJSON(\n  'http://mapasculturais.local/api/event/find',\n  {\n    '@select': 'id, name, location',\n    '@order': 'name ASC',\n    'project': 'EQ(@Project:4)'\n  },\n  function (response){ console.log(response); });\n\n\n\n\nAction describe\n\n\nRetorna a descri\u00e7\u00e3o de entidade.\n\n\n$.getJSON(\n  'http://mapasculturais.local/api/event/describe',\n  function (response){ console.log(response); });\n\n// output:\n{\n   \nid\n:{\n      \nisMetadata\n:false,\n      \nisEntityRelation\n:false,\n      \nrequired\n:true,\n      \ntype\n:\ninteger\n,\n      \nlength\n:null\n   },\n   \nlocation\n:{\n      \nisMetadata\n:false,\n      \nisEntityRelation\n:false,\n      \nrequired\n:true,\n      \ntype\n:\npoint\n,\n      \nlength\n:null\n   },\n   \nname\n:{\n      \nisMetadata\n:false,\n      \nisEntityRelation\n:false,\n      \nrequired\n:true,\n      \ntype\n:\nstring\n,\n      \nlength\n:255\n   },\n   \nshortDescription\n:{\n      \nisMetadata\n:false,\n      \nisEntityRelation\n:false,\n      \nrequired\n:false,\n      \ntype\n:\ntext\n,\n      \nlength\n:null\n   },\n   \nlongDescription\n:{\n      \nisMetadata\n:false,\n      \nisEntityRelation\n:false,\n      \nrequired\n:false,\n      \ntype\n:\ntext\n,\n      \nlength\n:null\n   },\n   \ncreateTimestamp\n:{\n      \nisMetadata\n:false,\n      \nisEntityRelation\n:false,\n      \nrequired\n:true,\n      \ntype\n:\ndatetime\n,\n      \nlength\n:null\n   },\n   \nstatus\n:{\n      \nisMetadata\n:false,\n      \nisEntityRelation\n:false,\n      \nrequired\n:true,\n      \ntype\n:\nsmallint\n,\n      \nlength\n:null\n   },\n   \n_type\n:{\n      \nisMetadata\n:false,\n      \nisEntityRelation\n:false,\n      \nrequired\n:true,\n      \ntype\n:\nsmallint\n,\n      \nlength\n:null,\n      \n@select\n:\ntype\n\n   },\n   \nisVerified\n:{\n      \nisMetadata\n:false,\n      \nisEntityRelation\n:false,\n      \nrequired\n:true,\n      \ntype\n:\nboolean\n,\n      \nlength\n:null\n   },\n   \nparent\n:{\n      \nisMetadata\n:false,\n      \nisEntityRelation\n:true,\n      \ntargetEntity\n:\nSpace\n,\n      \nisOwningSide\n:true\n   },\n   \nchildren\n:{\n      \nisMetadata\n:false,\n      \nisEntityRelation\n:true,\n      \ntargetEntity\n:\nSpace\n,\n      \nisOwningSide\n:false\n   },\n   \nowner\n:{\n      \nisMetadata\n:false,\n      \nisEntityRelation\n:true,\n      \ntargetEntity\n:\nAgent\n,\n      \nisOwningSide\n:true\n   },\n   \nemailPublico\n:{\n      \nrequired\n:false,\n      \ntype\n:\nstring\n,\n      \nlength\n:null,\n      \nprivate\n:false,\n      \nlabel\n:\nEmail P\u00fablico\n,\n      \nisMetadata\n:true,\n      \nisEntityRelation\n:false\n   },\n   \nemailPrivado\n:{\n      \nrequired\n:false,\n      \ntype\n:\nstring\n,\n      \nlength\n:null,\n      \nprivate\n:false,\n      \nlabel\n:\nEmail Privado\n,\n      \nisMetadata\n:true,\n      \nisEntityRelation\n:false\n   },\n   \ntelefonePublico\n:{\n      \nrequired\n:false,\n      \ntype\n:\nstring\n,\n      \nlength\n:null,\n      \nprivate\n:false,\n      \nlabel\n:\nTelefone P\u00fablico\n,\n      \nisMetadata\n:true,\n      \nisEntityRelation\n:false\n   },\n   \ntelefone1\n:{\n      \nrequired\n:false,\n      \ntype\n:\nstring\n,\n      \nlength\n:null,\n      \nprivate\n:false,\n      \nlabel\n:\nTelefone 1\n,\n      \nisMetadata\n:true,\n      \nisEntityRelation\n:false\n   },\n   \ntelefone2\n:{\n      \nrequired\n:false,\n      \ntype\n:\nstring\n,\n      \nlength\n:null,\n      \nprivate\n:false,\n      \nlabel\n:\nTelefone 2\n,\n      \nisMetadata\n:true,\n      \nisEntityRelation\n:false\n   },\n   \nacessibilidade\n:{\n      \nrequired\n:false,\n      \ntype\n:\nselect\n,\n      \nlength\n:null,\n      \nprivate\n:false,\n      \noptions\n:{\n         \n:\nN\u00e3o Informado\n,\n         \nSim\n:\nSim\n,\n         \nN\u00e3o\n:\nN\u00e3o\n\n      },\n      \nlabel\n:\nAcessibilidade\n,\n      \nisMetadata\n:true,\n      \nisEntityRelation\n:false\n   },\n   \ncapacidade\n:{\n      \nrequired\n:false,\n      \ntype\n:\nstring\n,\n      \nlength\n:null,\n      \nprivate\n:false,\n      \nlabel\n:\nCapacidade\n,\n      \nisMetadata\n:true,\n      \nisEntityRelation\n:false\n   },\n   \nendereco\n:{\n      \nrequired\n:false,\n      \ntype\n:\ntext\n,\n      \nlength\n:null,\n      \nprivate\n:false,\n      \nlabel\n:\nEndere\u00e7o\n,\n      \nisMetadata\n:true,\n      \nisEntityRelation\n:false\n   },\n   \nhorario\n:{\n      \nrequired\n:false,\n      \ntype\n:\ntext\n,\n      \nlength\n:null,\n      \nprivate\n:false,\n      \nlabel\n:\nHor\u00e1rio de funcionamento\n,\n      \nisMetadata\n:true,\n      \nisEntityRelation\n:false\n   },\n   \ncriterios\n:{\n      \nrequired\n:false,\n      \ntype\n:\ntext\n,\n      \nlength\n:null,\n      \nprivate\n:false,\n      \nlabel\n:\nCrit\u00e9rios de uso do espa\u00e7o\n,\n      \nisMetadata\n:true,\n      \nisEntityRelation\n:false\n   },\n   \nsite\n:{\n      \nrequired\n:false,\n      \ntype\n:\nstring\n,\n      \nlength\n:null,\n      \nprivate\n:false,\n      \nlabel\n:\nSite\n,\n      \nisMetadata\n:true,\n      \nisEntityRelation\n:false\n   },\n   \nfacebook\n:{\n      \nrequired\n:false,\n      \ntype\n:\nstring\n,\n      \nlength\n:null,\n      \nprivate\n:false,\n      \nlabel\n:\nFacebook\n,\n      \nisMetadata\n:true,\n      \nisEntityRelation\n:false\n   },\n   \ntwitter\n:{\n      \nrequired\n:false,\n      \ntype\n:\nstring\n,\n      \nlength\n:null,\n      \nprivate\n:false,\n      \nlabel\n:\nTwitter\n,\n      \nisMetadata\n:true,\n      \nisEntityRelation\n:false\n   },\n   \ngoogleplus\n:{\n      \nrequired\n:false,\n      \ntype\n:\nstring\n,\n      \nlength\n:null,\n      \nprivate\n:false,\n      \nlabel\n:\nGoogle+\n,\n      \nisMetadata\n:true,\n      \nisEntityRelation\n:false\n   },\n   \nsp_regiao\n:{\n      \nrequired\n:false,\n      \ntype\n:\nstring\n,\n      \nlength\n:null,\n      \nprivate\n:false,\n      \nlabel\n:\nRegi\u00e3o\n,\n      \nisMetadata\n:true,\n      \nisEntityRelation\n:false\n   },\n   \nsp_subprefeitura\n:{\n      \nrequired\n:false,\n      \ntype\n:\nstring\n,\n      \nlength\n:null,\n      \nprivate\n:false,\n      \nlabel\n:\nSubprefeitura\n,\n      \nisMetadata\n:true,\n      \nisEntityRelation\n:false\n   },\n   \nsp_distrito\n:{\n      \nrequired\n:false,\n      \ntype\n:\nstring\n,\n      \nlength\n:null,\n      \nprivate\n:false,\n      \nlabel\n:\nDistrito\n,\n      \nisMetadata\n:true,\n      \nisEntityRelation\n:false\n   }\n}", 
            "title": "API"
        }, 
        {
            "location": "/mc_config_api/#documentacao-da-api", 
            "text": "Para tornar mais f\u00e1cil a leitura dos exemplos ser\u00e1 utilizada a fun\u00e7\u00e3o getJSON do jQuery.", 
            "title": "Documentacao da API"
        }, 
        {
            "location": "/mc_config_api/#action-find", 
            "text": "Par\u00e2metros\nO M\u00e9todo find aceita os seguintes par\u00e2metros:   @select  - usado para selecionar as propriedades da entidade que ser\u00e3o retornadas pela api. Voc\u00ea pode retornar propriedades de entidades relacionadas.  ex:( @select: id,name,owner.name,owner.singleUrl)  @order  - usado para definir em que ordem o resultado ser\u00e1 retornado.  ex:( @order: name ASC, id DESC)  @limit  - usado para definir o n\u00famero m\u00e1ximo de entidades que ser\u00e3o retornadas.  ex:( @limit: 10)  @page  - usado em pagina\u00e7\u00f5es em conjunto com o @limit.  ex:( @limit:10, @page: 2)  @or  - se usado a api usar\u00e1 o operador l\u00f3gico OR para criar a query.  ex:( @or:1)  @type  - usado para definir o tipo de documento a ser gerado com o resultado da busca.  ex:( @type: html; ou @type: json; ou @type: xml)  @files  - indica que \u00e9 para retornar os arquivos anexos.  ex:( @files=(avatar.avatarSmall,header):name,url - retorna o nome e url do thumbnail de tamanho avatarSmall da imagem avatar e a imagem header original)", 
            "title": "Action find"
        }, 
        {
            "location": "/mc_config_api/#operadores", 
            "text": "Para filtrar os resultados o m\u00e9todo find aceita os seguintes operadores em qualquer das propriedades e metadados das entidades:   EQ  (igual)  ex:( id: EQ (10) - seleciona a entidade de id igual a 10)  GT  (maior que)  ex:( id: GT (10) - seleciona todas as entidades com id maior a 10)  GTE  (maior ou igual)  ex:( id: GTE (10) - seleciona todas as entidades com id maior ou igual a 10)  LT  (menor que)  ex:( id: LT (10) - seleciona todas as entidades com id menor a 10)  LTE  (menor ou igual)  ex:( id: LTE (10) - seleciona todas as entidades com id menor ou igual a 10)  NULL  (nao definido)  ex:( age: null() - seleciona todas as entidades com idade n\u00e3o definida)  IN  (en)  ex:( id: IN (10,18,33) - seleciona as entidades de id 10, 18 e 33)  BET  (entre)  ex:( id: BET (100,200) - seleciona as entidades de id entre 100 e 200)  LIKE   ex:( name: LIKE (fael) - seleciona as entidades com nome LIKE ' fael ' (ver operador LIKE do sql))  ILIKE  (LIKE ignorando mai\u00fasculas e min\u00fasculas)  ex:( name: ILIKE (rafael*) seleciona as entidades com o nome come\u00e7ando com Rafael, rafael, RAFAEL, etc.)  OR  (operador l\u00f3gico OU)  ex:( id: OR (BET (100,200), BET (300,400), IN (10,19,33)) - seleciona as entidades com id entre 100 e 200, entre 300 e 400 ou de id 10,19 ou 33)  AND  (operador l\u00f3gico AND)  ex:( name: AND (ILIKE ('Rafael%'), ILIKE ('*Freitas')) - seleciona as entidades com nome come\u00e7ando com Rafael e terminando com Freitas (por exemplo: Rafael Freitas, Rafael Chaves Freitas, RafaelFreitas))  GEONEAR   ex:( _geoLocation: GEONEAR (-46.6475415229797, -23.5413271705055, 700) - seleciona as entidades que est\u00e3o no m\u00e1ximo h\u00e1 700 metros do ponto de latitude -23.5413271705055 e longitude -46.6475415229797)", 
            "title": "Operadores"
        }, 
        {
            "location": "/mc_config_api/#exemplos-de-uso", 
            "text": "retornando o nome do espa\u00e7o de id 10   $.getJSON(\n  'http://mapasculturais.local/api/space/find',\n  {\n    '@select': 'name', \n    'id': 'eq(10)'\n  },\n  function (response){ console.log(response); });   retornando o id, nome e email dos agentes com email do google   $.getJSON(\n  'http://mapasculturais.local/api/agent/find',\n  {\n    '@select': 'id, name, email', \n    'email': 'like(*gmail.com)'\n  },\n  function (response){ console.log(response); });   retornando o id e nome do espa\u00e7os e nomes do agentes que publicaram os espa\u00e7os    $.getJSON(\n  'http://mapasculturais.local/api/space/find',\n  {\n    '@select': 'id, name, owner.name',\n  },\n  function (response){ console.log(response); });   retornando o id e nome dos agentes com email do google ou do yahoo   $.getJSON(\n  'http://mapasculturais.local/api/agent/find',\n  {\n    '@select': 'id, name', \n    'emailPublico': 'OR(like(*gmail.com), like(*yahoo.com))'\n  }, \n  function (response){ console.log(response); });   retornando o id, nome dos agentes com com id entre 100 e 200, exceto o de id 150   $.getJSON(\n  'http://mapasculturais.local/api/agent/find',\n  {\n    '@select': 'id, name', \n    'id': 'AND(BET(100,200), !EQ(150))'\n  }, \n  function (response){ console.log(response); });   retornando o id e nome dos agentes com com id entre 100 e 200, exceto o de id 150 e que tenham email do google ordenado pela data de cria\u00e7\u00e3o do agente   $.getJSON(\n  'http://mapasculturais.local/api/agent/find',\n  {\n    '@select': 'id, name',\n    '@order': 'createTimestamp ASC',\n    'id': 'AND(BET(100,200), !EQ(150))',\n    'emailPublico': 'OR(like(*gmail.com), like(*yahoo.com))'\n  },\n  function (response){ console.log(response); });   retornando o id e nome dos agentes com com id entre 100 e 200, exceto o de id 150 OU que tenham email do google ordenado pelo nome descendentemente   $.getJSON(\n  'http://mapasculturais.local/api/agent/find',\n  {\n    '@select': 'id, name',\n    '@order': 'name DESC',\n    '@or': 1,\n    'id': 'AND(BET(100,200), !EQ(150))',\n    'emailPublico': 'OR(like(*gmail.com), like(*yahoo.com))'\n  },\n  function (response){ console.log(response); });   retornando a segunda p\u00e1gina de 10 agentes ordenado pelo nome   $.getJSON(\n  'http://mapasculturais.local/api/agent/find',\n  {\n    '@select': 'id, name, files',\n    '@order': 'name ASC',\n    '@limit': 10,\n    '@page': 2\n  },\n  function (response){ console.log(response); });   retornando a segunda p\u00e1gina de 10 agentes ordenado pelo nome com a url do avatar, url do thumbnail do avatar e todos os downloads   $.getJSON(\n  'http://mapasculturais.local/api/agent/find',\n  {\n    '@select': 'id, name',\n    '@order': 'name ASC',\n    '@limit': 10,\n    '@page': 2,\n    '@files': '(avatar,avatar.avatarSmall,downloads):url'\n  },\n  function (response){ console.log(response); });   retornando as entidades pr\u00f3ximas a latitude -23.5413271705055 e longitude -46.6475415229797   $.getJSON(\n  'http://mapasculturais.local/api/agent/find',\n  {\n    '@select': 'id, name, location',\n    '@order': 'name ASC',\n    '_geoLocation': 'GEONEAR(-46.6475415229797,-23.5413271705055,700)'\n  },\n  function (response){ console.log(response); });  Filtrando por relacionamentos   Selecionando todos os espa\u00e7os do agente de id 1   $.getJSON(\n  'http://mapasculturais.local/api/agent/find',\n  {\n    '@select': 'id, name, location',\n    '@order': 'name ASC',\n    'owner': 'EQ(@Agent:1)'\n  },\n  function (response){ console.log(response); });   Selecionando todos os eventos do projeto de id 4   $.getJSON(\n  'http://mapasculturais.local/api/event/find',\n  {\n    '@select': 'id, name, location',\n    '@order': 'name ASC',\n    'project': 'EQ(@Project:4)'\n  },\n  function (response){ console.log(response); });", 
            "title": "Exemplos de uso."
        }, 
        {
            "location": "/mc_config_api/#action-describe", 
            "text": "Retorna a descri\u00e7\u00e3o de entidade.  $.getJSON(\n  'http://mapasculturais.local/api/event/describe',\n  function (response){ console.log(response); });\n\n// output:\n{\n    id :{\n       isMetadata :false,\n       isEntityRelation :false,\n       required :true,\n       type : integer ,\n       length :null\n   },\n    location :{\n       isMetadata :false,\n       isEntityRelation :false,\n       required :true,\n       type : point ,\n       length :null\n   },\n    name :{\n       isMetadata :false,\n       isEntityRelation :false,\n       required :true,\n       type : string ,\n       length :255\n   },\n    shortDescription :{\n       isMetadata :false,\n       isEntityRelation :false,\n       required :false,\n       type : text ,\n       length :null\n   },\n    longDescription :{\n       isMetadata :false,\n       isEntityRelation :false,\n       required :false,\n       type : text ,\n       length :null\n   },\n    createTimestamp :{\n       isMetadata :false,\n       isEntityRelation :false,\n       required :true,\n       type : datetime ,\n       length :null\n   },\n    status :{\n       isMetadata :false,\n       isEntityRelation :false,\n       required :true,\n       type : smallint ,\n       length :null\n   },\n    _type :{\n       isMetadata :false,\n       isEntityRelation :false,\n       required :true,\n       type : smallint ,\n       length :null,\n       @select : type \n   },\n    isVerified :{\n       isMetadata :false,\n       isEntityRelation :false,\n       required :true,\n       type : boolean ,\n       length :null\n   },\n    parent :{\n       isMetadata :false,\n       isEntityRelation :true,\n       targetEntity : Space ,\n       isOwningSide :true\n   },\n    children :{\n       isMetadata :false,\n       isEntityRelation :true,\n       targetEntity : Space ,\n       isOwningSide :false\n   },\n    owner :{\n       isMetadata :false,\n       isEntityRelation :true,\n       targetEntity : Agent ,\n       isOwningSide :true\n   },\n    emailPublico :{\n       required :false,\n       type : string ,\n       length :null,\n       private :false,\n       label : Email P\u00fablico ,\n       isMetadata :true,\n       isEntityRelation :false\n   },\n    emailPrivado :{\n       required :false,\n       type : string ,\n       length :null,\n       private :false,\n       label : Email Privado ,\n       isMetadata :true,\n       isEntityRelation :false\n   },\n    telefonePublico :{\n       required :false,\n       type : string ,\n       length :null,\n       private :false,\n       label : Telefone P\u00fablico ,\n       isMetadata :true,\n       isEntityRelation :false\n   },\n    telefone1 :{\n       required :false,\n       type : string ,\n       length :null,\n       private :false,\n       label : Telefone 1 ,\n       isMetadata :true,\n       isEntityRelation :false\n   },\n    telefone2 :{\n       required :false,\n       type : string ,\n       length :null,\n       private :false,\n       label : Telefone 2 ,\n       isMetadata :true,\n       isEntityRelation :false\n   },\n    acessibilidade :{\n       required :false,\n       type : select ,\n       length :null,\n       private :false,\n       options :{\n          : N\u00e3o Informado ,\n          Sim : Sim ,\n          N\u00e3o : N\u00e3o \n      },\n       label : Acessibilidade ,\n       isMetadata :true,\n       isEntityRelation :false\n   },\n    capacidade :{\n       required :false,\n       type : string ,\n       length :null,\n       private :false,\n       label : Capacidade ,\n       isMetadata :true,\n       isEntityRelation :false\n   },\n    endereco :{\n       required :false,\n       type : text ,\n       length :null,\n       private :false,\n       label : Endere\u00e7o ,\n       isMetadata :true,\n       isEntityRelation :false\n   },\n    horario :{\n       required :false,\n       type : text ,\n       length :null,\n       private :false,\n       label : Hor\u00e1rio de funcionamento ,\n       isMetadata :true,\n       isEntityRelation :false\n   },\n    criterios :{\n       required :false,\n       type : text ,\n       length :null,\n       private :false,\n       label : Crit\u00e9rios de uso do espa\u00e7o ,\n       isMetadata :true,\n       isEntityRelation :false\n   },\n    site :{\n       required :false,\n       type : string ,\n       length :null,\n       private :false,\n       label : Site ,\n       isMetadata :true,\n       isEntityRelation :false\n   },\n    facebook :{\n       required :false,\n       type : string ,\n       length :null,\n       private :false,\n       label : Facebook ,\n       isMetadata :true,\n       isEntityRelation :false\n   },\n    twitter :{\n       required :false,\n       type : string ,\n       length :null,\n       private :false,\n       label : Twitter ,\n       isMetadata :true,\n       isEntityRelation :false\n   },\n    googleplus :{\n       required :false,\n       type : string ,\n       length :null,\n       private :false,\n       label : Google+ ,\n       isMetadata :true,\n       isEntityRelation :false\n   },\n    sp_regiao :{\n       required :false,\n       type : string ,\n       length :null,\n       private :false,\n       label : Regi\u00e3o ,\n       isMetadata :true,\n       isEntityRelation :false\n   },\n    sp_subprefeitura :{\n       required :false,\n       type : string ,\n       length :null,\n       private :false,\n       label : Subprefeitura ,\n       isMetadata :true,\n       isEntityRelation :false\n   },\n    sp_distrito :{\n       required :false,\n       type : string ,\n       length :null,\n       private :false,\n       label : Distrito ,\n       isMetadata :true,\n       isEntityRelation :false\n   }\n}", 
            "title": "Action describe"
        }, 
        {
            "location": "/mc_config_authentication/", 
            "text": "Configurando o sistema de autentica\u00e7\u00e3o do Mapas Culturais\n\n\nO Mapas Culturais disponibiliza dois \ndrivers\n de autentica\u00e7\u00e3o para serem utilizados em ambientes de produ\u00e7\u00e3o/homologa\u00e7\u00e3o (\nOpauthOpenId\n e \nOpauthLoginCidadao\n), um para ser utilizado em ambiente de \ndesenvolvimento/homologa\u00e7\u00e3o\n (\nFake\n), e outro utilizado nos testes automatizados (\nTest\n).\n\n\nFake\n\n\nclasse\n: \nMapasCulturais\\AuthProviders\\Fake\n\n\nEste m\u00e9todo de autentica\u00e7\u00e3o \u00e9 para ser utilizado em ambientes de desenvolvimento, teste ou homologa\u00e7\u00e3o, quando n\u00e3o \u00e9 necess\u00e1rio testar o processo de autentica\u00e7\u00e3o por completo. Ele simplifica o processo de autentica\u00e7\u00e3o/cria\u00e7\u00e3o de usu\u00e1rios ao mostrar numa mesma tela uma lista dos usu\u00e1rios existentes no sistema e um formul\u00e1rio simplificado para cria\u00e7\u00e3o de novos usu\u00e1rios.\n\n\nPara utilizar este m\u00e9todo de autentica\u00e7\u00e3o voc\u00ea precisa colocar a linha abaixo no seu arquivo \nsrc/protected/application/conf/config.php\n\n\n    'auth.provider' =\n 'Fake',\n\n\n\n\nOpauthOpenID\n\n\nclasse\n: \nMapasCulturais\\AuthProviders\\OpauthOpenId\n\n\nEste driver \u00e9 implementado utilizando a biblioteca \nOpauth\n com a estrat\u00e9gia \nOpenID\n e pode ser utilizada para autenticar o Mapas Culturais com qualquer OpenID provider. \nO exemplo a seguir mostra como configurar o Mapas Culturais para se autenticar com o \nId da Cultura\n\u00b9 instalado no servidor que responde pelo dom\u00ednio _id.map.as_\u00b2. \n\n\n1. N\u00e3o confundir com o \nIDCultura do Minist\u00e9rio da Cultura\n, que \u00e9 baseado no \nLogin Cidad\u00e3o\n abordado a \nseguir\n.\n\n\n2. O deploy e customiza\u00e7\u00e3o do tema do Id da Cultura n\u00e3o ser\u00e1 abordado neste documento.\n\n\nExemplo de configura\u00e7\u00e3o do OpauthOpenId\n\n\n    'auth.provider' =\n 'OpauthOpenId',\n    'auth.config' =\n [\n        // substituir o dominio \nid.map.as\n pelo dom\u00ednio do\n        'login_url' =\n 'http://id.map.as/openid/', \n        'logout_url' =\n 'http://id.map.as/accounts/logout/', \n        'salt' =\n 'UMAS STRING ALEAT\u00d3RIA', // exemplo 'fsdf#F#$T!WHS%$Y%HThw45h45h$%H45h42y45.$$234'\n        'timeout' =\n '24 hours' // o tempo que dura a sess\u00e3o\n    ],\n\n\n\n\nLogin Cidad\u00e3o \n Mapas Culturais \n Logout Inside Application\n\n\nConfigura\u00e7\u00f5es para autentica\u00e7\u00e3o via LC no config.php\n\n\nPara usar a autentica\u00e7\u00e3o do Mapas com Login Cidad\u00e3o, esteja atento os seguintes par\u00e2metros que devem ser inseridos no arquivo de configura\u00e7\u00f5es da aplica\u00e7\u00e3o (este arquivo est\u00e1 em /mapasculturais/src/protected/application/conf/config.php): \n\n\n\n        'auth.provider' =\n 'OpauthLoginCidadao',\n        'auth.config' =\n array(\n        'client_id' =\n 'NUMERO-DO-CLIENT-ID',\n        'client_secret' =\n 'HASH-DO-SECRET',\n        'auth_endpoint' =\n 'http://id.cultura.gov.br/oauth/v2/auth',\n        'token_endpoint' =\n 'http://id.cultura.gov.br/oauth/v2/token',\n        'user_info_endpoint' =\n 'http://id.cultura.gov.br/api/v1/person.json'\n        ),\n\n\n\n\nLogout via Login Cidad\u00e3o\n\n\nO [Login Cidad\u00e3o] (https://github.com/redelivre/login-cidadao) possui uma feature chamada [Remote Logout] (https://github.com/PROCERGS/login-cidadao/blob/9bc9ff8220b968726682767f8c934d5562fe6a35/app/Resources/doc/en/remoteLogout.md) que permite com que usu\u00e1rios de uma aplica\u00e7\u00e3o externa (no caso o Mapas Culturais) possa fazer logout no sistema de autentica\u00e7\u00e3o (Login Cidad\u00e3o) sem sairem do ambiente da aplica\u00e7\u00e3o. Em outras palavras, de dentro do Mapas, usando Remote Logout, um usu\u00e1rio poderia sair do Login Cidad\u00e3o. No entanto essa funcionalidade ainda n\u00e3o foi implementada/testada para operar com Mapas Culturais. Provisoriamente, uma fun\u00e7\u00e3o javascript tem funcionado como um caminho seguro para fazer logout do Login Cidad\u00e3o de dentro do Mapas. Caso o Login Cidad\u00e3o seja seu \u00fanico sistema de autentica\u00e7\u00e3o funcionando em conjunto com Mapas Culturais e voc\u00ea queira prover o que chamamos de Logout Inside Application, siga as instru\u00e7\u00f5es abaixo para implementar a sa\u00edda. \n\n\n1 - Acesse o arquivo de header da aplica\u00e7\u00e3o, do template criado e ativo na instala\u00e7\u00e3o:\n\n\n$ vi ~/mapasculturais/src/protected/application/themes/NAME-OF-YOUR-TEMPLATE/layouts/parts/header-main-nav.php\n\n\n\n\n2 - Acrescente, no final deste arquivo, a seguinte fun\u00e7\u00e3o javascript:  \n\n\nscript language=\njavascript\n type=\ntext/javascript\n\nfunction logoutForce() {\n    window.open('https://NAME-OF-YOUR-URL-LOGIN-CIDADAO-HERE/logout', '_blank');\n    var oldURL = document.referrer;\n    alert(\nLogout efetuado com sucesso!\n);\n    location.reload();\n}\n\n/script\n\n\n\n\n\n3 - No mesmo arquivo, busque a linha que gera o bot\u00e3o \"Sair\" e acrescente o evento onclick=\"return logoutForce(). Veja como a linha deve ficar: \n\n\na href=\n?php echo $app-\ncreateUrl('auth', 'logout'); ?\n onclick=\nreturn logoutForce()\nSair\n/a", 
            "title": "Autentica\u00e7\u00e3o"
        }, 
        {
            "location": "/mc_config_authentication/#configurando-o-sistema-de-autenticacao-do-mapas-culturais", 
            "text": "O Mapas Culturais disponibiliza dois  drivers  de autentica\u00e7\u00e3o para serem utilizados em ambientes de produ\u00e7\u00e3o/homologa\u00e7\u00e3o ( OpauthOpenId  e  OpauthLoginCidadao ), um para ser utilizado em ambiente de  desenvolvimento/homologa\u00e7\u00e3o  ( Fake ), e outro utilizado nos testes automatizados ( Test ).", 
            "title": "Configurando o sistema de autentica\u00e7\u00e3o do Mapas Culturais"
        }, 
        {
            "location": "/mc_config_authentication/#fake", 
            "text": "classe :  MapasCulturais\\AuthProviders\\Fake  Este m\u00e9todo de autentica\u00e7\u00e3o \u00e9 para ser utilizado em ambientes de desenvolvimento, teste ou homologa\u00e7\u00e3o, quando n\u00e3o \u00e9 necess\u00e1rio testar o processo de autentica\u00e7\u00e3o por completo. Ele simplifica o processo de autentica\u00e7\u00e3o/cria\u00e7\u00e3o de usu\u00e1rios ao mostrar numa mesma tela uma lista dos usu\u00e1rios existentes no sistema e um formul\u00e1rio simplificado para cria\u00e7\u00e3o de novos usu\u00e1rios.  Para utilizar este m\u00e9todo de autentica\u00e7\u00e3o voc\u00ea precisa colocar a linha abaixo no seu arquivo  src/protected/application/conf/config.php      'auth.provider' =  'Fake',", 
            "title": "Fake"
        }, 
        {
            "location": "/mc_config_authentication/#opauthopenid", 
            "text": "classe :  MapasCulturais\\AuthProviders\\OpauthOpenId  Este driver \u00e9 implementado utilizando a biblioteca  Opauth  com a estrat\u00e9gia  OpenID  e pode ser utilizada para autenticar o Mapas Culturais com qualquer OpenID provider. \nO exemplo a seguir mostra como configurar o Mapas Culturais para se autenticar com o  Id da Cultura \u00b9 instalado no servidor que responde pelo dom\u00ednio _id.map.as_\u00b2.   1. N\u00e3o confundir com o  IDCultura do Minist\u00e9rio da Cultura , que \u00e9 baseado no  Login Cidad\u00e3o  abordado a  seguir .  2. O deploy e customiza\u00e7\u00e3o do tema do Id da Cultura n\u00e3o ser\u00e1 abordado neste documento.  Exemplo de configura\u00e7\u00e3o do OpauthOpenId      'auth.provider' =  'OpauthOpenId',\n    'auth.config' =  [\n        // substituir o dominio  id.map.as  pelo dom\u00ednio do\n        'login_url' =  'http://id.map.as/openid/', \n        'logout_url' =  'http://id.map.as/accounts/logout/', \n        'salt' =  'UMAS STRING ALEAT\u00d3RIA', // exemplo 'fsdf#F#$T!WHS%$Y%HThw45h45h$%H45h42y45.$$234'\n        'timeout' =  '24 hours' // o tempo que dura a sess\u00e3o\n    ],", 
            "title": "OpauthOpenID"
        }, 
        {
            "location": "/mc_config_authentication/#login-cidadao-mapas-culturais-logout-inside-application", 
            "text": "Configura\u00e7\u00f5es para autentica\u00e7\u00e3o via LC no config.php  Para usar a autentica\u00e7\u00e3o do Mapas com Login Cidad\u00e3o, esteja atento os seguintes par\u00e2metros que devem ser inseridos no arquivo de configura\u00e7\u00f5es da aplica\u00e7\u00e3o (este arquivo est\u00e1 em /mapasculturais/src/protected/application/conf/config.php):   \n        'auth.provider' =  'OpauthLoginCidadao',\n        'auth.config' =  array(\n        'client_id' =  'NUMERO-DO-CLIENT-ID',\n        'client_secret' =  'HASH-DO-SECRET',\n        'auth_endpoint' =  'http://id.cultura.gov.br/oauth/v2/auth',\n        'token_endpoint' =  'http://id.cultura.gov.br/oauth/v2/token',\n        'user_info_endpoint' =  'http://id.cultura.gov.br/api/v1/person.json'\n        ),  Logout via Login Cidad\u00e3o  O [Login Cidad\u00e3o] (https://github.com/redelivre/login-cidadao) possui uma feature chamada [Remote Logout] (https://github.com/PROCERGS/login-cidadao/blob/9bc9ff8220b968726682767f8c934d5562fe6a35/app/Resources/doc/en/remoteLogout.md) que permite com que usu\u00e1rios de uma aplica\u00e7\u00e3o externa (no caso o Mapas Culturais) possa fazer logout no sistema de autentica\u00e7\u00e3o (Login Cidad\u00e3o) sem sairem do ambiente da aplica\u00e7\u00e3o. Em outras palavras, de dentro do Mapas, usando Remote Logout, um usu\u00e1rio poderia sair do Login Cidad\u00e3o. No entanto essa funcionalidade ainda n\u00e3o foi implementada/testada para operar com Mapas Culturais. Provisoriamente, uma fun\u00e7\u00e3o javascript tem funcionado como um caminho seguro para fazer logout do Login Cidad\u00e3o de dentro do Mapas. Caso o Login Cidad\u00e3o seja seu \u00fanico sistema de autentica\u00e7\u00e3o funcionando em conjunto com Mapas Culturais e voc\u00ea queira prover o que chamamos de Logout Inside Application, siga as instru\u00e7\u00f5es abaixo para implementar a sa\u00edda.   1 - Acesse o arquivo de header da aplica\u00e7\u00e3o, do template criado e ativo na instala\u00e7\u00e3o:  $ vi ~/mapasculturais/src/protected/application/themes/NAME-OF-YOUR-TEMPLATE/layouts/parts/header-main-nav.php  2 - Acrescente, no final deste arquivo, a seguinte fun\u00e7\u00e3o javascript:    script language= javascript  type= text/javascript \nfunction logoutForce() {\n    window.open('https://NAME-OF-YOUR-URL-LOGIN-CIDADAO-HERE/logout', '_blank');\n    var oldURL = document.referrer;\n    alert( Logout efetuado com sucesso! );\n    location.reload();\n} /script   3 - No mesmo arquivo, busque a linha que gera o bot\u00e3o \"Sair\" e acrescente o evento onclick=\"return logoutForce(). Veja como a linha deve ficar:   a href= ?php echo $app- createUrl('auth', 'logout'); ?  onclick= return logoutForce() Sair /a", 
            "title": "Login Cidad\u00e3o &amp; Mapas Culturais &gt; Logout Inside Application"
        }, 
        {
            "location": "/mc_developer_guide/", 
            "text": "Mapas Culturais \n Guia do Desenvolvedor\n\n\n\n\nO intu\u00edto deste documento \u00e9 dar uma vis\u00e3o panor\u00e2mica da arquitetura e funcionamento do Mapas Culturais para quem quiser colaborar no desenvolvimento da plataforma. Este documento est\u00e1 ainda incompleto e em constante desenvolvimento.\n\n\n\n\nBranches e desenvolvimento\n\n\nRequisitos\n\n\nBibliotecas PHP utilizadas\n\n\nBibliotecas Javascript utilizadas\n\n\n\n\n\n\nArquivo de Configura\u00e7\u00e3o\n\n\nApp\n\n\nTraits\n\n\nTraits Gen\u00e9ricos\n\n\n\n\n\n\nModel\n\n\nController\n\n\nView\n\n\nTemas\n\n\ntheme.php\n\n\nEstrutura de pastas do tema\n\n\nP\u00e1ginas\n\n\nLayouts\n\n\nVis\u00f5es\n\n\nPartes\n\n\nAssets\n\n\nVari\u00e1veis Acess\u00edveis\n\n\nVerificando se um usu\u00e1rio est\u00e1 logado\n\n\n\n\n\n\nAutentica\u00e7\u00e3o\n\n\nRoles\n\n\nLog\n\n\nCache\n\n\nOutputs da API\n\n\nExce\u00e7\u00f5es\n\n\nBusca Por Palavra-chave\n\n\n\n\nBranches e desenvolvimento\n\n\nAtualmente a aplica\u00e7\u00e3o possui 4 branches principais: \nMaster\n, \nRC\n, \nv2\n e \nv1\n. A saber:\n\n\nBranch Master\n: \n\n\n\n\nBranch utilizado para desenvolvimento;\n\n\nTudo que existe de novo est\u00e1 nesse branch;\n\n\nAten\u00e7\u00e3o: para desenvolvimento de novas features, o desenvolvedor deve criar um branch novo a partir da vers\u00e3o v2 (stable) e n\u00e3o do master;\n\n\n\n\nBranch RC\n (release candidate): \n\n\n\n\nBranch utilizado para um conjunto est\u00e1vel de novas funcionalidades;\n\n\nAp\u00f3s um conjunto novo de funcionalidades nessa branch, a branch vira no novo stable;\n\n\n\n\nBranch v2\n:\n\n\n\n\nAtual stable da aplica\u00e7\u00e3o;\n\n\nNovas instala\u00e7\u00f5es devem ser feitas usando esse branch;\n\n\nBranches novos para novas funcionalidades devem partir desse branch;\n\n\nBugfixes relativos a esse branch devem sair(um novo branch para o bug deve ser criado) e depois gerarem merge no \nBranch v2\n, no \nBranch RC\n e no \nBranch Master\n. Caso seja um bugfix estrutural ou de seguran\u00e7a que impacte todas as vers\u00f5es, deve gerar merge no \nBranch v1\n tamb\u00e9m. \n\n\n\n\nBranch v1\n: \n\n\n\n\nAntigo stable da aplica\u00e7\u00e3o;\n\n\nBugfixes relativos a esse branch devem sair(um novo branch para o bug deve ser criado) e voltar para esse mesmo branch (uma vez o branch do bug finalizado, deve haver um merge para para o v1 novamente); \n\n\n\n\n\n\nRequisitos\n\n\n\n\nPHP \n= 5.4\n\n\nphp5-gd\n\n\n[php5-cli] (https://packages.debian.org/pt-br/jessie/php5-cli)\n\n\nphp5-json\n\n\nphp5-curl\n\n\nphp5-pgsql\n\n\nphp-apc\n\n\nComposer\n\n\nPostgreSQL \n= 9.3\n\n\nPostgis \n= 2.1\n\n\nPostgreSQL-Postgis-Scripts\n\n\nNode.JS \n= 0.10\n\n\nNPM\n\n\nUglifyJS\n\n\nUglifyCSS\n\n\n[Ruby] (https://www.ruby-lang.org/pt)\n\n\n[Sass gem] (https://rubygems.org/gems/sass/versions/3.4.22)\n\n\n\n\nBibliotecas PHP Utilizadas\n\n\nVer arquivo \ncomposer.json\n\n- \nSlim\n - Microframework em cima do qual foi escria a classe \nApp\n do MapasCulturais.\n- \nDoctrine/ORM\n - ORM utilizado para o mapeamento das entidades.\n- \nOpauth/OpenId\n - Utilizado para autentica\u00e7\u00e3o via OpenId.\n- \nrespect/validation\n - Utilizado para as valida\u00e7\u00f5es das propriedades e metadados das entidades.\n- \nsmottt/wideimage\n - Utilizado para \ntransformar\n imagens (criar thumbnails, por exemplo).\n- \nphpunit/phpunit\n - Utilizado para testes.\n- \ncreof/doctrine2-spatial\n - Faz o mapeamento de v\u00e1rias procedures do PostGIS para o doctrine.\n- \nmustache/mustache\n - Utilizado para renderizar alguns templates.\n- \nphpoffice/phpword\n - Utilizado para criar .docs ou .xls onde necess\u00e1rio.\n- \nmichelf/php-markdown\n - Utilizado para renderizar os markdowns das \np\u00e1ginas\n\n\nBibliotecas Javascript Utilizadas\n\n\nVer \nbibliotecas javascript utilizadas no tema\n.\n\n\nArquivo de Configura\u00e7\u00e3o\n\n\nApp\n\n\nTraits\n\n\nOs \ntraits\n ficam no namespace \nMapasCulturais\\Traits\n e seus arquivos na pasta \nsrc/protected/application/lib/MapasCulturais/Traits\n. \n\n\nSe houver no nome do trait um prefixo (\nEntity, Controller ou Repository\n) significa que este trait s\u00f3 deve ser utilizado em classes que estendam a classe com o nome do prefixo dentro do namespace MapasCulturais (ex: o trait \nEntityAvatar\n s\u00f3 deve ser utilizado em classes que estendem a classe \nMapasCulturais\\Entity\n). J\u00e1 se n\u00e3o houver um prefixo significa que \u00e9 um \ntrait gen\u00e9rico\n e que pode ser utilizado em qualquer classe (exemplos: Singleton e MagigGetter).\n\n\nTraits Gen\u00e9ricos\n\n\nOs traits gen\u00e9ricos podem ser usados em qualquer classe do sistema.\n\n\nSingleton\n\n\nImplementa o design pattern \nsingleton\n. \u00c9 utilizada nas classes \nApp\n, \nGuestUser\n, \nApiOutput\n, \nController\n entre outras.\n\n\nMagicGetter\n\n\nMagicSetter\n\n\nMagicCallers\n\n\nModel\n\n\nAs classes de modelo ficam no namespace \nMapasCulturais\\Entities\n e seus arquivos dentro da pasta \nsrc/protected/application/lib/MapasCulturais/Entities\n. \n\n\nEstas classes devem estender a classe abstrata \nMapasCulturais\\Entity\n e usar os \nDocblock Annotations\n do \nDoctrine\n para fazer o \nmapeamento\n com a representa\u00e7\u00e3o desta entidade no banco de dados (geralmente uma tabela). \n\n\nEstas podem tamb\u00e9m usar os \ntraits criados para entidades\n (os que t\u00eam o prefixo \nEntity\n no nome, como por exmplo o \nEntityFiles\n, que \u00e9 para ser usado em entidades que t\u00eam arquivos anexos).\n\n\nClasse Entity\n\n\nA classe abstrata \nMapasCulturais\\Entity\n \u00e9 a classe que serve de base para todoas as entidades do sistema. Implementa uma s\u00e9rie de m\u00e9todos \u00fateis para, entre outros, \nverifica\u00e7\u00e3o de permiss\u00f5es\n, serializa\u00e7\u00e3o e \nvalida\u00e7\u00f5es\n.\n\n\nTraits das Entidades\n\n\n\n\nEntityAgentRelation\n - Deve ser usado em entidades que podem ter agentes relacionados. Requer uma entidade auxiliar com o mesmo nome da entidade acrescida do sufixo AgentRelation (exemplo: para a entidade \nEvent\n, uma classe \nEventAgentRelation\n).\n\n\nEntityFiles\n - Deve ser usado em entidades que podem ter arquivos anexados.\n\n\nEntityAvatar\n - Deve ser usado em entidades que tenham avatar. Requer o trait \nEntityFiles\n.\n\n\nEntityGeoLocation\n - Deve ser usado em entidades georreferenciadas. Requer as propriedades \nlocation\n, do tipo \npoint\n, e \n_geoLocation\n, do tipo \ngeography\n.\n\n\nEntityMetadata\n - Deve ser usado em entidades que tenham metadados. Requer de uma entidade auxiliar. Se existir no mesmo namespace uma classe com o nome da entidade acrescida do sufixo \nMeta\n (exemplo: para a entidade \nAgent\n, uma classe \nAgentMeta\n), esta ser\u00e1 usada, sen\u00e3o a entidade Metadata ser\u00e1 usada como auxiliar.\n\n\nEntityMetaLists\n - Deve ser usado em entidades que tenham metadados com m\u00faltiplos valores por chave. (exemplo de uso: links).\n\n\nEntityNested\n - Deve ser usado em entidades hierarquicas. Requer as \nassocia\u00e7\u00f5es autoreferenciadas\n \nchildren\n e \nparent\n.\n\n\nEntityOwnerAgent\n - Deve ser usado em entidades que tenham a associa\u00e7\u00e3o \nManyToOne\n \nowner\n apontando para a entidade \nMapasCulturais\\Entity\\Agent\n. Requer tamb\u00e9m um mapeamento do tipo \nint\n chamado \n_ownerId\n que representa o id do agente que \u00e9 dono desta entidade.\n\n\nEntitySoftDelete\n - Usado em entidades que necessitem de lixeira. Requer um mapeamento do tipo \nint\n chamado \nstatus\n.\n\n\nEntityTaxonomies\n - Deve ser usado em entidades que precisem de taxonomias (tags, \u00e1rea de atua\u00e7\u00e3o, etc.).\n\n\nEntityTypes\n - Deve ser usado em entidades que tenham tipos. Requer um mapeamento do tipo \nint\n chamado \n_type\n. \n\n\nEntityVerifiable\n - Deve ser usado em entidades \nverific\u00e1veis\n, o seja, que podem ser marcadas como \noficiais\n pelos admins ou membros da equipe.\n\n\n\n\nVerifica\u00e7\u00e3o de Permiss\u00f5es\n\n\nA verifica\u00e7\u00e3o das permiss\u00f5es s\u00e3o feitas atrav\u00e9s do m\u00e9todo \ncheckPermission\n passando como par\u00e2metro para este o nome da a\u00e7\u00e3o que voc\u00ea deseja checar se o usu\u00e1rio tem ou n\u00e3o permiss\u00e3o para executar. Este m\u00e9todo, por ua vez, chama o m\u00e9todo \ncanUser\n que retornar\u00e1 um booleando \ntrue\n se o usu\u00e1rio pode executar a a\u00e7\u00e3o ou \nfalse\n se o usu\u00e1rio n\u00e3o pode executar a a\u00e7\u00e3o. Caso o usu\u00e1rio n\u00e3o possa executar a a\u00e7\u00e3o, o m\u00e9todo \ncheckPermission\n lan\u00e7ar\u00e1 uma exce\u00e7\u00e3o do tipo \nPermissionDenied\n.\n\n\nM\u00e9todo canUser\n\n\nO m\u00e9todo \ncanUser\n recebe como primeiro par\u00e2metro o nome da a\u00e7\u00e3o e opcionalmente, como segundo par\u00e2metro, um usu\u00e1rio. Se nenhum usu\u00e1rio for enviado, ser\u00e1 usado o usu\u00e1rio logado ou \nguest\n. O retorno desta fun\u00e7\u00e3o \u00e9 um booleano indicando se o usu\u00e1rio pode ou n\u00e3o executar a a\u00e7\u00e3o.\n\n\nEste m\u00e9todo procurar\u00e1 por um m\u00e9todo auxilar chamado \ncanUser acrescido do nome da a\u00e7\u00e3o\n (exemplo: para a a\u00e7\u00e3o \nremove\n, um m\u00e9todo chamado \ncanUserRemove\n) e caso n\u00e3o ache ser\u00e1 usado o m\u00e9todo \ngenericPermissionVerification\n.\n\n\nNo exemplo a seguir dizemos que somente admins podem alterar o satatus da entidade Exemplo.\n\n\nclass Exemplo extends MapasCulturais\\Entity{\n    use MapasCulturais\\Traits\\MagicSetter\n    ....\n    ....\n    protected $_status = 0;\n\n    function setStatus($status){\n        $this-\ncheckPermission('modifyStatus');\n        $this-\n_status = $status;\n        $this-\nsave();\n    }\n\n    protected function canUserModifyStatus($user){\n        if($user-\nis(\nadmin\n))\n            return true;\n        else\n            return false;\n    }\n}\n\n\n\n\n\nM\u00e9todo genericPermissionVerification\n\n\nEste m\u00e9todo \u00e9 utilizado sempre que uma checagem de permiss\u00e3o \u00e9 feita e o m\u00e9todo \ncanUser\n n\u00e3o encontra um m\u00e9todo auxiliar com o nome da a\u00e7\u00e3o. \n\n\nO corpo deste m\u00e9todo \u00e9 o seguinte:\n\n\nprotected function genericPermissionVerification($user){\n    if($user-\nis('guest'))\n        return false;\n\n    if($user-\nis('admin'))\n        return true;\n\n    if($this-\ngetOwnerUser()-\nid == $user-\nid)\n        return true;\n\n    if($this-\nusesAgentRelation() \n $this-\nuserHasControl($user))\n        return true;\n\n    return false;\n}\n\n\n\n\n\nValida\u00e7\u00f5es das Entidades\n\n\nController\n\n\nView\n\n\nTemas\n\n\nPor enquanto ainda n\u00e3o temos resolvida a estrutura para m\u00faltiplos temas. O que temos \u00e9 um tema \u00fanico dentro da pasta \nsrc/protected/application/themes/active\n, que ser\u00e1 modificado para aceitar configura\u00e7\u00f5es.\n\n\nBibliotecas Javascript utilizadas no tema\n\n\nPor enquanto ainda n\u00e3o utilizamos um gerenciador de pacotes para as bibliotecas Javascript. Estas ficam na \npasta assets/vendor/\n.\n - \nAngularJS\n\n - \njQuery\n\n - \n\n\ntheme.php\n\n\nEste arquivo fica na pasta ra\u00edz do tema (\nsrc/protected/application/themes/active\n) e \u00e9 usado para colocar fun\u00e7\u00f5es helpers usadas dentro do tema e para estender o sistema utilizando a \nAPI de plugins\n.\n\n\nEstrutura de pastas do tema\n\n\ndentro da pasta ra\u00edz do tema\n- \nassets/\n - \nonde deve ficar tudo que \u00e9 acess\u00edvel pelo p\u00fablico dentro da url \n/public\n do site\n\n  - \ncss/\n\n  - \nfonts/\n\n  - \nimg/\n\n  - \nvendor/\n\n- \nlayouts/\n - \nonde ficam os layouts do site\n\n    - \nparts/\n - \nonde ficam os template parts utilizados pelo tema\n\n- \nviews/\n - \nonde ficam as vi\u00f5es dos controles\n\n- \npages/\n - onde ficam os arquivos de p\u00e1ginas\n\n\nP\u00e1ginas\n\n\nAs p\u00e1ginas do sistema s\u00e3o arquivos \n.md\n (Markdown) salvos dentro da pasta \npages/\n do tema. Para criar uma nova p\u00e1gina basta criar um novo arquivo \n.md\n dentro desta pasta. Estes arquivos s\u00e3o renderizadas pela biblioteca \nPHP Markdown Extra\n.\n\n\nUrl da p\u00e1gina\n\n\nPara uma p\u00e1gina cujo nome de arquivo \u00e9 \nnome-da-pagina.md\n, a url de acesso ser\u00e1 \nhttp://mapasculturais/page/site/nome-da-pagina/\n\n\nT\u00edtulo da p\u00e1gina\n\n\nO texto do \nprimeiro h1\n do conte\u00fado da p\u00e1gina ser\u00e1 utilizado como t\u00edtulo da p\u00e1gina (tag \ntitle\n). Isto \u00e9 feito via javascript.\n\n\nNo exemplo a seguir o t\u00edtulo da p\u00e1gina ser\u00e1 \nT\u00edtulo da P\u00e1gna\n\n\n# T\u00edtulo da P\u00e1gina\n\nConte\u00fado da p\u00e1gina ....\n\n\n\n\n\nSidebars\n\n\nO Conte\u00fado das sidebars est\u00e3o nos arquivos \n_right.md\n e \n_left.md\n\n\nSubstituindo uma sidebar\n\n\nVoc\u00ea pode substituir uma sidebar envolvendo o conte\u00fado que voc\u00ea deseja que substitua o conte\u00fado padr\u00e3o com as tags \n%left left%\n para a sidebar da esquerda e \n%right right%\n para a sidebar da direita.\n\n\nNo exemplo a seguir substituimos a sidebar da direita por um menu com tr\u00eas links:\n\n\n%right \n- [Primeiro link](#primeiro)\n- [Segundo link](#segundo)\n- [Terceiro link](#terceiro)\nright%\n\n\n# T\u00edtulo da P\u00e1gina\n\nConte\u00fado da p\u00e1gina ....\n\n\n\n\nExtendendo uma sidebar\n\n\nVoc\u00ea pode extender uma sidebar, adicionando conte\u00fado antes ou depois do conte\u00fado padr\u00e3o, colocando um \n:after\n ou \n:before\n logo depois da tag de abertura.\n\n\nNo exemplo a seguir extendemos a sidebar da esquerda adicionando um menu com 2 links no final da sidebar:\n\n\n%left:after\n## submenu da p\u00e1gina\n\n- [Primeiro Link](#primeiro)\n- [Segundo Link](#segundo)\nleft%\n\n\n# T\u00edtulo da P\u00e1gina\n\nConte\u00fado da p\u00e1gina ....\n\n\n\n\nLayouts\n\n\nO layout \u00e9 a \"moldura\" do conte\u00fado de uma vis\u00e3o. A estrutura m\u00ednima de um layout \u00e9 a seguinte:\n\n\nhtml\n\n    \nhead\n\n        \ntitle\n?php echo isset($entity) ? $this-\ngetTitle($entity) : $this-\ngetTitle() ?\n/title\n\n        \n?php mapasculturais_head(isset($entity) ? $entity : null); ?\n\n    \n/head\n\n    \nbody\n\n        \n?php body_header(); ?\n\n        \n?php echo $TEMPLATE_CONTENT; /* aqui entra o conte\u00fado da view */ ?\n\n        \n?php body_footer(); ?\n\n    \n/body\n\n\n/html\n\n\n\n\n\nPor padr\u00e3o as vis\u00f5es usam o arquivo de layout \ndefault.php\n, mas voc\u00ea pode definir qual layout elas usar\u00e3o colocando a seguinte linha na primeira linha do seu arquivo de vis\u00e3o:\n\n\n$this-\nlayout = 'nome-do-layout'; // n\u00e3o precisa do .php no nome do template\n\n\n\n\nVis\u00f5es\n\n\nAs vis\u00f5es s\u00e3o chamadas de dentro das \nactions do controller\n atrav\u00e9s do \nm\u00e9todo render\n, que inclui o \nlayout\n definido na view, ou do \nm\u00e9todo partial\n, que \nn\u00e3o\n inclui o layout. \n\n\nQuando a vis\u00e3o \u00e9 chamada pelo m\u00e9todo render, o conte\u00fado renderizado da vis\u00e3o \u00e9 guardado na vari\u00e1vel \n$TEMPLATE_CONTENT\n e enviado para o layout.\n\n\nVis\u00f5es das actions single, create e edit\n\n\nOs arquivos de vis\u00e3o \nsingle.php\n, \ncreate.php\n e \nedit.php\n dos controladores \nagent\n, \nspace\n, \nevent\n e \nproject\n s\u00e3o, n\u00e3o relidade, o mesmo arquivo. O arquivo \nreal\n \u00e9 o \nsingle.php\n e os dois outros s\u00e3o \nlinks simb\u00f3licos\n para o primeiro.\n\n\nPara saber, de dentro de um destes arquivos, em qual action voc\u00ea est\u00e1, voc\u00ea pode usar a propriedade \n$this-\ncontroller-\naction\n:\n\n\n?php if($this-\ncontroller-\naction == 'single'): ?\n\n    \np\nvoc\u00ea est\u00e1 visualizando a entidade\n/p\n\n\n?php elseif($this-\ncontroller-\naction == 'edit'): ?\n\n    \np\nvoc\u00ea est\u00e1 editando a entidade\n/p\n\n\n?php else: ?\n\n    \np\nvoc\u00ea est\u00e1 criando uma nova entidade\np\n\n\n?php endif; ?\n\n\n\n\n\nSe voc\u00ea s\u00f3 deseja saber se est\u00e1 no modo de edi\u00e7\u00e3o use a fun\u00e7\u00e3o \nis_editable()\n:\n\n\n?php if(is_editable(): ?\n\n    \np\n voc\u00ea est\u00e1 em modo de edi\u00e7\u00e3o (edit ou create). \n/p\n\n\n?php else: ?\n\n    \np\n voc\u00ea est\u00e1 somente visualizando a entidade. \np\n\n\n?php endif; ?\n\n\n\n\n\nPartes\n\n\nAs partes s\u00e3o blocos de c\u00f3digo que podem ser incluidos em diferentes views, layouts ou mesmo dentro de outras partes. Estes blocos de c\u00f3digo devem ficar, por padr\u00e3o, na pasta \nlayouts/parts/\n do tema.\n\n\nPara usar uma parte cujo nome de arquivo \u00e9 \numa-parte.php\n basta chamar o m\u00e9todo \npart\n da seguinte forma:\n\n\ndiv\n A parte ser\u00e1 incluida a seguir: \n/div\n\n\n?php $this-\npart('uma-parte'); ?\n\n\n\n\n\nEnviando vari\u00e1veis para dentro das partes\n\n\nVoc\u00ea pode enviar vari\u00e1veis para usar dentro das partes. Isto \u00e9 \u00fatil em v\u00e1rias situa\u00e7\u00f5es, por exmplo quando voc\u00ea quer que uma parte seja usada dentro de um loop e voc\u00ea tem que enviar o item atual do loop para usar dentro da parte.\n\n\nNo exemplo a seguir, passamos uma vari\u00e1vel chamada \nuser_name\n, com o valor \n\"Fulano de Tal\"\n, para dentro da parte \numa-parte\n.\n\n\n// dentro de algum arquivo de view, layout ou mesmo outra parte\n$this-\npart('uma-parte', ['user_name' =\n 'Fulano de Tal']);\n\n\n\n\n!-- dentro do arquivo layouts/parts/uma-parte.php --\n\n\nspan\nNome de usu\u00e1rio: \n?php echo $user_name; ?\n/span\n\n\n\n\n\nAssets\n\n\nOs assets s\u00e3o arquivos est\u00e1ticos (.css, .js, imagens, etc.) utilizados pelo tema. \n\n\nPara imprimir a url de um asset use a fun\u00e7\u00e3o \n$this-\nasset()\n. J\u00e1 se voc\u00ea deseja adicionar um js ou css use as fun\u00e7\u00f5es \n$app-\nenqueueScript()\n e \n$app-\nenqueueStyle()\n.\n\n\nM\u00e9todo Asset\n\n\nO M\u00e9todo \nasset\n do objeto de fun\u00e7\u00e3o serve para imprimir ou somente retornar a url de um asset. Este m\u00e9todo aceita dois par\u00e2metros: \n\n\nO primeiro, \n$file\n, \u00e9 o caminho do arquivo deseja dentro da pasta assets do tema, como exemplo a string \"img/uma-image.jpg\".\n\n\nO Segundo, \n$print\n, \u00e9 opcional e tem como padr\u00e3o \ntrue\n. Se for passado \nfalse\n a fun\u00e7\u00e3o somente retornar\u00e1 a url, mas n\u00e3o imprimir\u00e1 nada.\n\n\nAdicionando uma imagem\n\n\nO exemplo a seguir usa uma imagem chamada \nlogo.png\n que est\u00e1 na pasta \nassets/img/\n do tema.\n\n\nimg src=\n?php $this-\nasset('img/logo.png'); ?\n /\n\n\n\n\n\nCriando um link para um asset\n\n\nO exemplo a seguir cria um link para o arquivo \ndocumento.pdf\n que est\u00e1 na pasta \nasset/\n do tema.\n\n\na href=\n?php $this-\nasset('documento.pdf'); ?\n \nDocumento\n/a\n\n\n\n\n\nM\u00e9todo enqueueStyle\n\n\nEste m\u00e9todo \u00e9 utilizado para adicionar arquivos .css que ser\u00e3o utilizados pela vis\u00e3o, layout ou parte. Este m\u00e9todo aceitas 5 par\u00e2metros (\n$group\n, \n$script_name\n, \n$script_filename\n, \narray\n \n$dependences\n, \n$media\n), sendo os dois \u00faltimo opcional.\n\n\nH\u00e1 tr\u00eas grupos de estilos no sistema: \nvendor\n, que s\u00e3o estilos utilizados pelas bibliotecas, \nfonts\n que s\u00e3o as fontes utilizadas, e \napp\n, que s\u00e3o os estilos escritos exclusivamente para o tema. \n\n\nAdicionando um estilo\n\n\nO exemplo a seguir adiciona um estilo chamado \num-estilo.css\n escrito para a aplica\u00e7\u00e3o.\n\n\n$app-\nenqueueStyle('app', 'um-estilo', 'css/um-estilo.css');\n\n\n\n\nM\u00e9todo enqueueScript\n\n\nEste m\u00e9todo \u00e9 utilizado para adicionar arquivos .js que ser\u00e3o utilizados pela vis\u00e3o, layout ou parte. Este m\u00e9todo aceitas 4 par\u00e2metros (\n$group\n, \n$script_name\n, \n$script_filename\n, \narray\n \n$dependences\n), sendo o \u00faltimo opcional.\n\n\nH\u00e1 dois grupos de scripts no sistema: \nvendor\n, que s\u00e3o as bibliotecas utilizadas, e \napp\n, que s\u00e3o os scripts escritos exclusivamente para o tema. \n\n\nAdicionando um script\n\n\nO exemplo a seguir adiciona um script chamado \num-script.js\n escrito para a aplica\u00e7\u00e3o.\n\n\n$app-\nenqueueScript('app', 'um-script', 'js/um-script.js');\n\n\n\n\nAdicionando um script que depende de outro\n\n\nO exemplo a seguir adiciona uma biblioteca que depende de outra biblioteca.\n\n\n$app-\nenqueueScript('vendor', 'jquery-ui-datepicker', '/vendor/jquery-ui.datepicker.js', array('jquery'));\n$app-\nenqueueScript('vendor', 'jquery', '/vendor/jquery/jquery-2.0.3.min.js');\n\n\n\n\nOrdem de impress\u00e3o das tags de estilos e scripts\n\n\nOs grupos de estilos e scripts ser\u00e3o impressos na seguinte ordem e dentro dos grupos os estilos/scripts ser\u00e3o ordenados conforme suas depend\u00eancias:\n- Estilos do grupo \nvendor\n\n- Estilos do grupo \nfont\n\n- Estilos do grupo \napp\n\n- Scripts do grupo \nvendor\n\n- Scripts do grupo \napp\n\n\nVari\u00e1veis Acess\u00edveis\n\n\nDe dentro dos arquivos das vis\u00f5es (views, layouts e parts) as seguintes vari\u00e1veis est\u00e3o acess\u00edveis:\n- \n$this\n - inst\u00e2ncia da classe \nMapasCulturais\\View\n.\n    - \n$this-\nassetUrl\n - url dos assets.\n    - \n$this-\nbaseUrl\n - url da ra\u00edz do site.\n    - \n$this-\ncontroller\n - o controller que mandou renderizar a vis\u00e3o.\n    - \n$this-\ncontroller-\naction\n - a action que mandou renderizar a vis\u00e3o.\n- \n$app\n - inst\u00e2ncia da classe \nMapasCulturais\\App\n.\n- \n$app-\nuser\n - o usu\u00e1rio que est\u00e3 vendo o site. Este objeto \u00e9 inst\u00e2ncia da classe \nMapasCulturais\\Entities\\User\n, se o usu\u00e1rio estiver logado, ou inst\u00e2ncia da classe \nMapasCulturais\\GuestUser\n, se o usu\u00e1rio n\u00e3o estiver logado.\n- \n$app-\nuser-\nprofile\n - o agente padr\u00e3o do usu\u00e1rio. Inst\u00e2ncia da classe \nMapasCulturais\\Entities\\Agent\n. \n(somente para usu\u00e1rios logados)\n\n- \n$entity\n - \u00e9 a entidade que est\u00e1 sendo visualizada, editada ou criada. \n(somente para as actions single, edit e create dos controladores das entidades agent, space, project e event. Dentro das partes somente se esta foi \nenviada\n)\n\n\nVerificando se um usu\u00e1rio est\u00e1 logado\n\n\nPara saber se um usu\u00e1rio est\u00e1 logado voc\u00ea pode verificar se o usu\u00e1rio n\u00e3o \u00e9 \nguest\n. \n\n\n?php if( ! $app-\nuser-\nis('guest') ): ?\n\n    \np\nO usu\u00e1rio est\u00e1 logado e o nome do agente padr\u00e3o dele \u00e9 \n?php echo $app-\nuser-\nprofile-\nname; ?\n ?\n/p\n\n\n?php else: ?\n\n    \np\nO usu\u00e1rio n\u00e3o est\u00e1 logado\n/p\n\n\n?php endif; ?\n\n\n\n\n\nExce\u00e7\u00f5es\n\n\nPermissionDenied", 
            "title": "Guia do Desenvolvedor"
        }, 
        {
            "location": "/mc_developer_guide/#mapas-culturais-guia-do-desenvolvedor", 
            "text": "O intu\u00edto deste documento \u00e9 dar uma vis\u00e3o panor\u00e2mica da arquitetura e funcionamento do Mapas Culturais para quem quiser colaborar no desenvolvimento da plataforma. Este documento est\u00e1 ainda incompleto e em constante desenvolvimento.   Branches e desenvolvimento  Requisitos  Bibliotecas PHP utilizadas  Bibliotecas Javascript utilizadas    Arquivo de Configura\u00e7\u00e3o  App  Traits  Traits Gen\u00e9ricos    Model  Controller  View  Temas  theme.php  Estrutura de pastas do tema  P\u00e1ginas  Layouts  Vis\u00f5es  Partes  Assets  Vari\u00e1veis Acess\u00edveis  Verificando se um usu\u00e1rio est\u00e1 logado    Autentica\u00e7\u00e3o  Roles  Log  Cache  Outputs da API  Exce\u00e7\u00f5es  Busca Por Palavra-chave", 
            "title": "Mapas Culturais &gt; Guia do Desenvolvedor"
        }, 
        {
            "location": "/mc_developer_guide/#branches-e-desenvolvimento", 
            "text": "Atualmente a aplica\u00e7\u00e3o possui 4 branches principais:  Master ,  RC ,  v2  e  v1 . A saber:  Branch Master :    Branch utilizado para desenvolvimento;  Tudo que existe de novo est\u00e1 nesse branch;  Aten\u00e7\u00e3o: para desenvolvimento de novas features, o desenvolvedor deve criar um branch novo a partir da vers\u00e3o v2 (stable) e n\u00e3o do master;   Branch RC  (release candidate):    Branch utilizado para um conjunto est\u00e1vel de novas funcionalidades;  Ap\u00f3s um conjunto novo de funcionalidades nessa branch, a branch vira no novo stable;   Branch v2 :   Atual stable da aplica\u00e7\u00e3o;  Novas instala\u00e7\u00f5es devem ser feitas usando esse branch;  Branches novos para novas funcionalidades devem partir desse branch;  Bugfixes relativos a esse branch devem sair(um novo branch para o bug deve ser criado) e depois gerarem merge no  Branch v2 , no  Branch RC  e no  Branch Master . Caso seja um bugfix estrutural ou de seguran\u00e7a que impacte todas as vers\u00f5es, deve gerar merge no  Branch v1  tamb\u00e9m.    Branch v1 :    Antigo stable da aplica\u00e7\u00e3o;  Bugfixes relativos a esse branch devem sair(um novo branch para o bug deve ser criado) e voltar para esse mesmo branch (uma vez o branch do bug finalizado, deve haver um merge para para o v1 novamente);", 
            "title": "Branches e desenvolvimento"
        }, 
        {
            "location": "/mc_developer_guide/#requisitos", 
            "text": "PHP  = 5.4  php5-gd  [php5-cli] (https://packages.debian.org/pt-br/jessie/php5-cli)  php5-json  php5-curl  php5-pgsql  php-apc  Composer  PostgreSQL  = 9.3  Postgis  = 2.1  PostgreSQL-Postgis-Scripts  Node.JS  = 0.10  NPM  UglifyJS  UglifyCSS  [Ruby] (https://www.ruby-lang.org/pt)  [Sass gem] (https://rubygems.org/gems/sass/versions/3.4.22)   Bibliotecas PHP Utilizadas  Ver arquivo  composer.json \n-  Slim  - Microframework em cima do qual foi escria a classe  App  do MapasCulturais.\n-  Doctrine/ORM  - ORM utilizado para o mapeamento das entidades.\n-  Opauth/OpenId  - Utilizado para autentica\u00e7\u00e3o via OpenId.\n-  respect/validation  - Utilizado para as valida\u00e7\u00f5es das propriedades e metadados das entidades.\n-  smottt/wideimage  - Utilizado para  transformar  imagens (criar thumbnails, por exemplo).\n-  phpunit/phpunit  - Utilizado para testes.\n-  creof/doctrine2-spatial  - Faz o mapeamento de v\u00e1rias procedures do PostGIS para o doctrine.\n-  mustache/mustache  - Utilizado para renderizar alguns templates.\n-  phpoffice/phpword  - Utilizado para criar .docs ou .xls onde necess\u00e1rio.\n-  michelf/php-markdown  - Utilizado para renderizar os markdowns das  p\u00e1ginas  Bibliotecas Javascript Utilizadas  Ver  bibliotecas javascript utilizadas no tema .", 
            "title": "Requisitos"
        }, 
        {
            "location": "/mc_developer_guide/#arquivo-de-configuracao", 
            "text": "", 
            "title": "Arquivo de Configura\u00e7\u00e3o"
        }, 
        {
            "location": "/mc_developer_guide/#app", 
            "text": "", 
            "title": "App"
        }, 
        {
            "location": "/mc_developer_guide/#traits", 
            "text": "Os  traits  ficam no namespace  MapasCulturais\\Traits  e seus arquivos na pasta  src/protected/application/lib/MapasCulturais/Traits .   Se houver no nome do trait um prefixo ( Entity, Controller ou Repository ) significa que este trait s\u00f3 deve ser utilizado em classes que estendam a classe com o nome do prefixo dentro do namespace MapasCulturais (ex: o trait  EntityAvatar  s\u00f3 deve ser utilizado em classes que estendem a classe  MapasCulturais\\Entity ). J\u00e1 se n\u00e3o houver um prefixo significa que \u00e9 um  trait gen\u00e9rico  e que pode ser utilizado em qualquer classe (exemplos: Singleton e MagigGetter).  Traits Gen\u00e9ricos  Os traits gen\u00e9ricos podem ser usados em qualquer classe do sistema.  Singleton  Implementa o design pattern  singleton . \u00c9 utilizada nas classes  App ,  GuestUser ,  ApiOutput ,  Controller  entre outras.  MagicGetter  MagicSetter  MagicCallers", 
            "title": "Traits"
        }, 
        {
            "location": "/mc_developer_guide/#model", 
            "text": "As classes de modelo ficam no namespace  MapasCulturais\\Entities  e seus arquivos dentro da pasta  src/protected/application/lib/MapasCulturais/Entities .   Estas classes devem estender a classe abstrata  MapasCulturais\\Entity  e usar os  Docblock Annotations  do  Doctrine  para fazer o  mapeamento  com a representa\u00e7\u00e3o desta entidade no banco de dados (geralmente uma tabela).   Estas podem tamb\u00e9m usar os  traits criados para entidades  (os que t\u00eam o prefixo  Entity  no nome, como por exmplo o  EntityFiles , que \u00e9 para ser usado em entidades que t\u00eam arquivos anexos).  Classe Entity  A classe abstrata  MapasCulturais\\Entity  \u00e9 a classe que serve de base para todoas as entidades do sistema. Implementa uma s\u00e9rie de m\u00e9todos \u00fateis para, entre outros,  verifica\u00e7\u00e3o de permiss\u00f5es , serializa\u00e7\u00e3o e  valida\u00e7\u00f5es .  Traits das Entidades   EntityAgentRelation  - Deve ser usado em entidades que podem ter agentes relacionados. Requer uma entidade auxiliar com o mesmo nome da entidade acrescida do sufixo AgentRelation (exemplo: para a entidade  Event , uma classe  EventAgentRelation ).  EntityFiles  - Deve ser usado em entidades que podem ter arquivos anexados.  EntityAvatar  - Deve ser usado em entidades que tenham avatar. Requer o trait  EntityFiles .  EntityGeoLocation  - Deve ser usado em entidades georreferenciadas. Requer as propriedades  location , do tipo  point , e  _geoLocation , do tipo  geography .  EntityMetadata  - Deve ser usado em entidades que tenham metadados. Requer de uma entidade auxiliar. Se existir no mesmo namespace uma classe com o nome da entidade acrescida do sufixo  Meta  (exemplo: para a entidade  Agent , uma classe  AgentMeta ), esta ser\u00e1 usada, sen\u00e3o a entidade Metadata ser\u00e1 usada como auxiliar.  EntityMetaLists  - Deve ser usado em entidades que tenham metadados com m\u00faltiplos valores por chave. (exemplo de uso: links).  EntityNested  - Deve ser usado em entidades hierarquicas. Requer as  associa\u00e7\u00f5es autoreferenciadas   children  e  parent .  EntityOwnerAgent  - Deve ser usado em entidades que tenham a associa\u00e7\u00e3o  ManyToOne   owner  apontando para a entidade  MapasCulturais\\Entity\\Agent . Requer tamb\u00e9m um mapeamento do tipo  int  chamado  _ownerId  que representa o id do agente que \u00e9 dono desta entidade.  EntitySoftDelete  - Usado em entidades que necessitem de lixeira. Requer um mapeamento do tipo  int  chamado  status .  EntityTaxonomies  - Deve ser usado em entidades que precisem de taxonomias (tags, \u00e1rea de atua\u00e7\u00e3o, etc.).  EntityTypes  - Deve ser usado em entidades que tenham tipos. Requer um mapeamento do tipo  int  chamado  _type .   EntityVerifiable  - Deve ser usado em entidades  verific\u00e1veis , o seja, que podem ser marcadas como  oficiais  pelos admins ou membros da equipe.   Verifica\u00e7\u00e3o de Permiss\u00f5es  A verifica\u00e7\u00e3o das permiss\u00f5es s\u00e3o feitas atrav\u00e9s do m\u00e9todo  checkPermission  passando como par\u00e2metro para este o nome da a\u00e7\u00e3o que voc\u00ea deseja checar se o usu\u00e1rio tem ou n\u00e3o permiss\u00e3o para executar. Este m\u00e9todo, por ua vez, chama o m\u00e9todo  canUser  que retornar\u00e1 um booleando  true  se o usu\u00e1rio pode executar a a\u00e7\u00e3o ou  false  se o usu\u00e1rio n\u00e3o pode executar a a\u00e7\u00e3o. Caso o usu\u00e1rio n\u00e3o possa executar a a\u00e7\u00e3o, o m\u00e9todo  checkPermission  lan\u00e7ar\u00e1 uma exce\u00e7\u00e3o do tipo  PermissionDenied .  M\u00e9todo canUser  O m\u00e9todo  canUser  recebe como primeiro par\u00e2metro o nome da a\u00e7\u00e3o e opcionalmente, como segundo par\u00e2metro, um usu\u00e1rio. Se nenhum usu\u00e1rio for enviado, ser\u00e1 usado o usu\u00e1rio logado ou  guest . O retorno desta fun\u00e7\u00e3o \u00e9 um booleano indicando se o usu\u00e1rio pode ou n\u00e3o executar a a\u00e7\u00e3o.  Este m\u00e9todo procurar\u00e1 por um m\u00e9todo auxilar chamado  canUser acrescido do nome da a\u00e7\u00e3o  (exemplo: para a a\u00e7\u00e3o  remove , um m\u00e9todo chamado  canUserRemove ) e caso n\u00e3o ache ser\u00e1 usado o m\u00e9todo  genericPermissionVerification .  No exemplo a seguir dizemos que somente admins podem alterar o satatus da entidade Exemplo.  class Exemplo extends MapasCulturais\\Entity{\n    use MapasCulturais\\Traits\\MagicSetter\n    ....\n    ....\n    protected $_status = 0;\n\n    function setStatus($status){\n        $this- checkPermission('modifyStatus');\n        $this- _status = $status;\n        $this- save();\n    }\n\n    protected function canUserModifyStatus($user){\n        if($user- is( admin ))\n            return true;\n        else\n            return false;\n    }\n}  M\u00e9todo genericPermissionVerification  Este m\u00e9todo \u00e9 utilizado sempre que uma checagem de permiss\u00e3o \u00e9 feita e o m\u00e9todo  canUser  n\u00e3o encontra um m\u00e9todo auxiliar com o nome da a\u00e7\u00e3o.   O corpo deste m\u00e9todo \u00e9 o seguinte:  protected function genericPermissionVerification($user){\n    if($user- is('guest'))\n        return false;\n\n    if($user- is('admin'))\n        return true;\n\n    if($this- getOwnerUser()- id == $user- id)\n        return true;\n\n    if($this- usesAgentRelation()   $this- userHasControl($user))\n        return true;\n\n    return false;\n}  Valida\u00e7\u00f5es das Entidades", 
            "title": "Model"
        }, 
        {
            "location": "/mc_developer_guide/#controller", 
            "text": "", 
            "title": "Controller"
        }, 
        {
            "location": "/mc_developer_guide/#view", 
            "text": "Temas  Por enquanto ainda n\u00e3o temos resolvida a estrutura para m\u00faltiplos temas. O que temos \u00e9 um tema \u00fanico dentro da pasta  src/protected/application/themes/active , que ser\u00e1 modificado para aceitar configura\u00e7\u00f5es.  Bibliotecas Javascript utilizadas no tema  Por enquanto ainda n\u00e3o utilizamos um gerenciador de pacotes para as bibliotecas Javascript. Estas ficam na  pasta assets/vendor/ .\n -  AngularJS \n -  jQuery \n -   theme.php  Este arquivo fica na pasta ra\u00edz do tema ( src/protected/application/themes/active ) e \u00e9 usado para colocar fun\u00e7\u00f5es helpers usadas dentro do tema e para estender o sistema utilizando a  API de plugins .  Estrutura de pastas do tema  dentro da pasta ra\u00edz do tema\n-  assets/  -  onde deve ficar tudo que \u00e9 acess\u00edvel pelo p\u00fablico dentro da url  /public  do site \n  -  css/ \n  -  fonts/ \n  -  img/ \n  -  vendor/ \n-  layouts/  -  onde ficam os layouts do site \n    -  parts/  -  onde ficam os template parts utilizados pelo tema \n-  views/  -  onde ficam as vi\u00f5es dos controles \n-  pages/  - onde ficam os arquivos de p\u00e1ginas  P\u00e1ginas  As p\u00e1ginas do sistema s\u00e3o arquivos  .md  (Markdown) salvos dentro da pasta  pages/  do tema. Para criar uma nova p\u00e1gina basta criar um novo arquivo  .md  dentro desta pasta. Estes arquivos s\u00e3o renderizadas pela biblioteca  PHP Markdown Extra .  Url da p\u00e1gina  Para uma p\u00e1gina cujo nome de arquivo \u00e9  nome-da-pagina.md , a url de acesso ser\u00e1  http://mapasculturais/page/site/nome-da-pagina/  T\u00edtulo da p\u00e1gina  O texto do  primeiro h1  do conte\u00fado da p\u00e1gina ser\u00e1 utilizado como t\u00edtulo da p\u00e1gina (tag  title ). Isto \u00e9 feito via javascript.  No exemplo a seguir o t\u00edtulo da p\u00e1gina ser\u00e1  T\u00edtulo da P\u00e1gna  # T\u00edtulo da P\u00e1gina\n\nConte\u00fado da p\u00e1gina ....  Sidebars  O Conte\u00fado das sidebars est\u00e3o nos arquivos  _right.md  e  _left.md  Substituindo uma sidebar  Voc\u00ea pode substituir uma sidebar envolvendo o conte\u00fado que voc\u00ea deseja que substitua o conte\u00fado padr\u00e3o com as tags  %left left%  para a sidebar da esquerda e  %right right%  para a sidebar da direita.  No exemplo a seguir substituimos a sidebar da direita por um menu com tr\u00eas links:  %right \n- [Primeiro link](#primeiro)\n- [Segundo link](#segundo)\n- [Terceiro link](#terceiro)\nright% \n\n# T\u00edtulo da P\u00e1gina\n\nConte\u00fado da p\u00e1gina ....  Extendendo uma sidebar  Voc\u00ea pode extender uma sidebar, adicionando conte\u00fado antes ou depois do conte\u00fado padr\u00e3o, colocando um  :after  ou  :before  logo depois da tag de abertura.  No exemplo a seguir extendemos a sidebar da esquerda adicionando um menu com 2 links no final da sidebar:  %left:after\n## submenu da p\u00e1gina\n\n- [Primeiro Link](#primeiro)\n- [Segundo Link](#segundo)\nleft% \n\n# T\u00edtulo da P\u00e1gina\n\nConte\u00fado da p\u00e1gina ....  Layouts  O layout \u00e9 a \"moldura\" do conte\u00fado de uma vis\u00e3o. A estrutura m\u00ednima de um layout \u00e9 a seguinte:  html \n     head \n         title ?php echo isset($entity) ? $this- getTitle($entity) : $this- getTitle() ? /title \n         ?php mapasculturais_head(isset($entity) ? $entity : null); ? \n     /head \n     body \n         ?php body_header(); ? \n         ?php echo $TEMPLATE_CONTENT; /* aqui entra o conte\u00fado da view */ ? \n         ?php body_footer(); ? \n     /body  /html   Por padr\u00e3o as vis\u00f5es usam o arquivo de layout  default.php , mas voc\u00ea pode definir qual layout elas usar\u00e3o colocando a seguinte linha na primeira linha do seu arquivo de vis\u00e3o:  $this- layout = 'nome-do-layout'; // n\u00e3o precisa do .php no nome do template  Vis\u00f5es  As vis\u00f5es s\u00e3o chamadas de dentro das  actions do controller  atrav\u00e9s do  m\u00e9todo render , que inclui o  layout  definido na view, ou do  m\u00e9todo partial , que  n\u00e3o  inclui o layout.   Quando a vis\u00e3o \u00e9 chamada pelo m\u00e9todo render, o conte\u00fado renderizado da vis\u00e3o \u00e9 guardado na vari\u00e1vel  $TEMPLATE_CONTENT  e enviado para o layout.  Vis\u00f5es das actions single, create e edit  Os arquivos de vis\u00e3o  single.php ,  create.php  e  edit.php  dos controladores  agent ,  space ,  event  e  project  s\u00e3o, n\u00e3o relidade, o mesmo arquivo. O arquivo  real  \u00e9 o  single.php  e os dois outros s\u00e3o  links simb\u00f3licos  para o primeiro.  Para saber, de dentro de um destes arquivos, em qual action voc\u00ea est\u00e1, voc\u00ea pode usar a propriedade  $this- controller- action :  ?php if($this- controller- action == 'single'): ? \n     p voc\u00ea est\u00e1 visualizando a entidade /p  ?php elseif($this- controller- action == 'edit'): ? \n     p voc\u00ea est\u00e1 editando a entidade /p  ?php else: ? \n     p voc\u00ea est\u00e1 criando uma nova entidade p  ?php endif; ?   Se voc\u00ea s\u00f3 deseja saber se est\u00e1 no modo de edi\u00e7\u00e3o use a fun\u00e7\u00e3o  is_editable() :  ?php if(is_editable(): ? \n     p  voc\u00ea est\u00e1 em modo de edi\u00e7\u00e3o (edit ou create).  /p  ?php else: ? \n     p  voc\u00ea est\u00e1 somente visualizando a entidade.  p  ?php endif; ?   Partes  As partes s\u00e3o blocos de c\u00f3digo que podem ser incluidos em diferentes views, layouts ou mesmo dentro de outras partes. Estes blocos de c\u00f3digo devem ficar, por padr\u00e3o, na pasta  layouts/parts/  do tema.  Para usar uma parte cujo nome de arquivo \u00e9  uma-parte.php  basta chamar o m\u00e9todo  part  da seguinte forma:  div  A parte ser\u00e1 incluida a seguir:  /div  ?php $this- part('uma-parte'); ?   Enviando vari\u00e1veis para dentro das partes  Voc\u00ea pode enviar vari\u00e1veis para usar dentro das partes. Isto \u00e9 \u00fatil em v\u00e1rias situa\u00e7\u00f5es, por exmplo quando voc\u00ea quer que uma parte seja usada dentro de um loop e voc\u00ea tem que enviar o item atual do loop para usar dentro da parte.  No exemplo a seguir, passamos uma vari\u00e1vel chamada  user_name , com o valor  \"Fulano de Tal\" , para dentro da parte  uma-parte .  // dentro de algum arquivo de view, layout ou mesmo outra parte\n$this- part('uma-parte', ['user_name' =  'Fulano de Tal']);  !-- dentro do arquivo layouts/parts/uma-parte.php --  span Nome de usu\u00e1rio:  ?php echo $user_name; ? /span   Assets  Os assets s\u00e3o arquivos est\u00e1ticos (.css, .js, imagens, etc.) utilizados pelo tema.   Para imprimir a url de um asset use a fun\u00e7\u00e3o  $this- asset() . J\u00e1 se voc\u00ea deseja adicionar um js ou css use as fun\u00e7\u00f5es  $app- enqueueScript()  e  $app- enqueueStyle() .  M\u00e9todo Asset  O M\u00e9todo  asset  do objeto de fun\u00e7\u00e3o serve para imprimir ou somente retornar a url de um asset. Este m\u00e9todo aceita dois par\u00e2metros:   O primeiro,  $file , \u00e9 o caminho do arquivo deseja dentro da pasta assets do tema, como exemplo a string \"img/uma-image.jpg\".  O Segundo,  $print , \u00e9 opcional e tem como padr\u00e3o  true . Se for passado  false  a fun\u00e7\u00e3o somente retornar\u00e1 a url, mas n\u00e3o imprimir\u00e1 nada.  Adicionando uma imagem  O exemplo a seguir usa uma imagem chamada  logo.png  que est\u00e1 na pasta  assets/img/  do tema.  img src= ?php $this- asset('img/logo.png'); ?  /   Criando um link para um asset  O exemplo a seguir cria um link para o arquivo  documento.pdf  que est\u00e1 na pasta  asset/  do tema.  a href= ?php $this- asset('documento.pdf'); ?   Documento /a   M\u00e9todo enqueueStyle  Este m\u00e9todo \u00e9 utilizado para adicionar arquivos .css que ser\u00e3o utilizados pela vis\u00e3o, layout ou parte. Este m\u00e9todo aceitas 5 par\u00e2metros ( $group ,  $script_name ,  $script_filename ,  array   $dependences ,  $media ), sendo os dois \u00faltimo opcional.  H\u00e1 tr\u00eas grupos de estilos no sistema:  vendor , que s\u00e3o estilos utilizados pelas bibliotecas,  fonts  que s\u00e3o as fontes utilizadas, e  app , que s\u00e3o os estilos escritos exclusivamente para o tema.   Adicionando um estilo  O exemplo a seguir adiciona um estilo chamado  um-estilo.css  escrito para a aplica\u00e7\u00e3o.  $app- enqueueStyle('app', 'um-estilo', 'css/um-estilo.css');  M\u00e9todo enqueueScript  Este m\u00e9todo \u00e9 utilizado para adicionar arquivos .js que ser\u00e3o utilizados pela vis\u00e3o, layout ou parte. Este m\u00e9todo aceitas 4 par\u00e2metros ( $group ,  $script_name ,  $script_filename ,  array   $dependences ), sendo o \u00faltimo opcional.  H\u00e1 dois grupos de scripts no sistema:  vendor , que s\u00e3o as bibliotecas utilizadas, e  app , que s\u00e3o os scripts escritos exclusivamente para o tema.   Adicionando um script  O exemplo a seguir adiciona um script chamado  um-script.js  escrito para a aplica\u00e7\u00e3o.  $app- enqueueScript('app', 'um-script', 'js/um-script.js');  Adicionando um script que depende de outro  O exemplo a seguir adiciona uma biblioteca que depende de outra biblioteca.  $app- enqueueScript('vendor', 'jquery-ui-datepicker', '/vendor/jquery-ui.datepicker.js', array('jquery'));\n$app- enqueueScript('vendor', 'jquery', '/vendor/jquery/jquery-2.0.3.min.js');  Ordem de impress\u00e3o das tags de estilos e scripts  Os grupos de estilos e scripts ser\u00e3o impressos na seguinte ordem e dentro dos grupos os estilos/scripts ser\u00e3o ordenados conforme suas depend\u00eancias:\n- Estilos do grupo  vendor \n- Estilos do grupo  font \n- Estilos do grupo  app \n- Scripts do grupo  vendor \n- Scripts do grupo  app  Vari\u00e1veis Acess\u00edveis  De dentro dos arquivos das vis\u00f5es (views, layouts e parts) as seguintes vari\u00e1veis est\u00e3o acess\u00edveis:\n-  $this  - inst\u00e2ncia da classe  MapasCulturais\\View .\n    -  $this- assetUrl  - url dos assets.\n    -  $this- baseUrl  - url da ra\u00edz do site.\n    -  $this- controller  - o controller que mandou renderizar a vis\u00e3o.\n    -  $this- controller- action  - a action que mandou renderizar a vis\u00e3o.\n-  $app  - inst\u00e2ncia da classe  MapasCulturais\\App .\n-  $app- user  - o usu\u00e1rio que est\u00e3 vendo o site. Este objeto \u00e9 inst\u00e2ncia da classe  MapasCulturais\\Entities\\User , se o usu\u00e1rio estiver logado, ou inst\u00e2ncia da classe  MapasCulturais\\GuestUser , se o usu\u00e1rio n\u00e3o estiver logado.\n-  $app- user- profile  - o agente padr\u00e3o do usu\u00e1rio. Inst\u00e2ncia da classe  MapasCulturais\\Entities\\Agent .  (somente para usu\u00e1rios logados) \n-  $entity  - \u00e9 a entidade que est\u00e1 sendo visualizada, editada ou criada.  (somente para as actions single, edit e create dos controladores das entidades agent, space, project e event. Dentro das partes somente se esta foi  enviada )  Verificando se um usu\u00e1rio est\u00e1 logado  Para saber se um usu\u00e1rio est\u00e1 logado voc\u00ea pode verificar se o usu\u00e1rio n\u00e3o \u00e9  guest .   ?php if( ! $app- user- is('guest') ): ? \n     p O usu\u00e1rio est\u00e1 logado e o nome do agente padr\u00e3o dele \u00e9  ?php echo $app- user- profile- name; ?  ? /p  ?php else: ? \n     p O usu\u00e1rio n\u00e3o est\u00e1 logado /p  ?php endif; ?", 
            "title": "View"
        }, 
        {
            "location": "/mc_developer_guide/#excecoes", 
            "text": "PermissionDenied", 
            "title": "Exce\u00e7\u00f5es"
        }, 
        {
            "location": "/mc_developer_docker_enviroment/", 
            "text": "Desenvolvimento com Docker\n\n\nPor enquanto o Docker \u00e9 utilizado somente para auxiliar o processo de\ndesenvolvimento da plataforma.\n\n\nPostgres\n\n\nVoc\u00ea pode usar qualquer imagem com postgis que tenha os requisitos da\naplica\u00e7\u00e3o instalados. Usamos esta abaixo para testes.\n\n\n$ docker pull mdillon/postgis\n$ docker run --name postgis -p 5432:5432 -e POSTGRES_PASSWORD=postgis -d mdillon/postgis\n\n\n\n\nDica: se voc\u00ea precisa inspecionar tabelas com \npsql\n, voc\u00ea pode fazer de 2 formas:\n\n\n\n\nRodar \npsql\n a partir da sua m\u00e1quina para conectar ao container\n\n\n\n\n$ PGPASSWORD=postgis psql -U postgres -d postgres\n\n\n\n\n\n\nUsar o \npsql\n do container\n\n\n\n\n$ docker exec -it postgis psql\n\n\n\n\nCriando imagem do mapas\n\n\n$ docker build -t mapasculturais .\n\n\n\n\nRodando o container do mapas\n\n\nAssumo que se est\u00e1 na raiz do projeto\n\n\n$ docker run --name mapasculturais --link postgis:postgis \\\n         -v $PWD:/srv/mapasculturais -i -p 80:8000  -t mapasculturais\n\n\n\n\nAcesse seu browser em \nhttp://localhost\n.", 
            "title": "Docker"
        }, 
        {
            "location": "/mc_developer_docker_enviroment/#desenvolvimento-com-docker", 
            "text": "Por enquanto o Docker \u00e9 utilizado somente para auxiliar o processo de\ndesenvolvimento da plataforma.", 
            "title": "Desenvolvimento com Docker"
        }, 
        {
            "location": "/mc_developer_docker_enviroment/#postgres", 
            "text": "Voc\u00ea pode usar qualquer imagem com postgis que tenha os requisitos da\naplica\u00e7\u00e3o instalados. Usamos esta abaixo para testes.  $ docker pull mdillon/postgis\n$ docker run --name postgis -p 5432:5432 -e POSTGRES_PASSWORD=postgis -d mdillon/postgis  Dica: se voc\u00ea precisa inspecionar tabelas com  psql , voc\u00ea pode fazer de 2 formas:   Rodar  psql  a partir da sua m\u00e1quina para conectar ao container   $ PGPASSWORD=postgis psql -U postgres -d postgres   Usar o  psql  do container   $ docker exec -it postgis psql", 
            "title": "Postgres"
        }, 
        {
            "location": "/mc_developer_docker_enviroment/#criando-imagem-do-mapas", 
            "text": "$ docker build -t mapasculturais .", 
            "title": "Criando imagem do mapas"
        }, 
        {
            "location": "/mc_developer_docker_enviroment/#rodando-o-container-do-mapas", 
            "text": "Assumo que se est\u00e1 na raiz do projeto  $ docker run --name mapasculturais --link postgis:postgis \\\n         -v $PWD:/srv/mapasculturais -i -p 80:8000  -t mapasculturais  Acesse seu browser em  http://localhost .", 
            "title": "Rodando o container do mapas"
        }, 
        {
            "location": "/mc_developer_keywords/", 
            "text": "As consultas abaixo n\u00e3o s\u00e3o SQL puro, s\u00e3o DQLs (\nDoctrine Query Language\n)\n\n\nBusca por palavra-chave\n\n\nPor padr\u00e3o, a busca por palavra-chave da API do Mapas Culturais retorna os objetos encontrados na query abaixo, ou seja, uma busca baseada somente no nome do objeto:\n\n\nSELECT \n    DISTINCT e.id \nFROM \n    {$entity_class} e\nWHERE \n    unaccent(lower(e.name)) LIKE unaccent(lower(:keyword))\n\n\n\n\nHooks para modificar a consulta por palavra-chave\n\n\nO Mapas Culturais oferece dois \nhooks\n para modificar a query acima: o primeiro permite adicionar \njoins\n \u00e0 consulta e o segundo permite adicionar opera\u00e7\u00f5es dentro da cl\u00e1usula \nWHERE\n:\n- \nrepo($entity).getIdsByKeywordDQL.join\n - utilizado para adicionar novos \njoins\n \u00e0 consulta, representado na consulta abaixo pela vari\u00e1vel \n$HOOK_JOINS\n; \n- \nrepo($entity).getIdsByKeywordDQL.where\n - utilizado para adicionar opera\u00e7\u00f5es dentro da cl\u00e1usula \nWHERE\n, reprensetado na consulta abaixo pela vari\u00e1vel \n$HOOK_WHERE\n.\n\n\nSELECT \n    DISTINCT e.id \nFROM \n    {$entity_class} e \n    $HOOK_JOINS\nWHERE \n    unaccent(lower(e.name)) LIKE unaccent(lower(:keyword)) \n    $HOOK_WHERE\n\n\n\n\nExemplos pr\u00e1ticos:\n\n\nUtilizando um metadado na busca por palavra-chave\n\n\nVamos usar como exemplo um metadado chamado \nnum_entidade\n, que seria um c\u00f3digo que representa a entidade no sistema e que, quando algu\u00e9m fizesse uma busca por palavra-chave informando tal c\u00f3digo, o sistema deveria retornar este objeto. Vamos supor ainda que este c\u00f3digo s\u00f3 \u00e9 aplicado a agentes e espa\u00e7os, por\u00e9m para aplicar a todas as entidades que \nusam\n busca por palavra-chave (reposit\u00f3rios que usam o \ntrait\n \nMapasCulturais\\Traits\\RepositoryKeyword\n) basta substituir a parte do hook \n\\\n>\n por \n*\n\n\n$app = \\MapasCulturais\\App::i(); // inst\u00e2ncia da aplica\u00e7\u00e3o\n\n// adiciona o join do metadado\n$app-\nhook('repo(\nAgent|Space\n).getIdsByKeywordDQL.join', function(\n$joins, $keyword){\n    $joins .= \n\n        LEFT JOIN \n            e.__metadata num_entitdade \n        WITH \n            num_entidade.key = 'num_entidade'\n;\n});\n\n// filtra pelo valor do keyword\n$app-\nhook('repo(\nAgent|Space\n).getIdsByKeywordDQL.where', function(\n$where, $keyword){\n    // a vari\u00e1vel $keyword est\u00e1 dispon\u00edvel aqui por\u00e9m n\u00e3o \u00e9 recomendado que esta seja utilizada diretamente na consulta\n    // pois ela j\u00e1 estar\u00e1 dispon\u00edvel dentro da consulta pelo par\u00e2metro :keyword.\n    $where .= \n OR lower(num_entidade.value) LIKE lower(:keyword)\n;\n});\n\n\n\n\nUtilizando uma taxonomia na busca por palavra-chave\n\n\nAgora vamos utilizar como exemplo uma taxonomia chamada \"categoria\"\n\n\n$app-\nhook('repo(\n*\n).getIdsByKeywordDQL.join', function(\n$joins, $keyword) {\n    $taxonomy = App::i()-\ngetRegisteredTaxonomyBySlug('categoria');\n    $joins .= \nLEFT JOIN e.__termRelations categoria_tr\n        LEFT JOIN\n                categoria_tr.term\n                    categoria\n                WITH\n                    categoria.taxonomy = '{$taxonomy-\nid}'\n;\n});\n\n$app-\nhook('repo(\n*\n).getIdsByKeywordDQL.where', function(\n$where, $keyword) {\n    $where .= \n OR unaccent(lower(categoria.term)) LIKE unaccent(lower(:keyword)) \n;\n});", 
            "title": "Keywords"
        }, 
        {
            "location": "/mc_developer_keywords/#busca-por-palavra-chave", 
            "text": "Por padr\u00e3o, a busca por palavra-chave da API do Mapas Culturais retorna os objetos encontrados na query abaixo, ou seja, uma busca baseada somente no nome do objeto:  SELECT \n    DISTINCT e.id \nFROM \n    {$entity_class} e\nWHERE \n    unaccent(lower(e.name)) LIKE unaccent(lower(:keyword))", 
            "title": "Busca por palavra-chave"
        }, 
        {
            "location": "/mc_developer_keywords/#hooks-para-modificar-a-consulta-por-palavra-chave", 
            "text": "O Mapas Culturais oferece dois  hooks  para modificar a query acima: o primeiro permite adicionar  joins  \u00e0 consulta e o segundo permite adicionar opera\u00e7\u00f5es dentro da cl\u00e1usula  WHERE :\n-  repo($entity).getIdsByKeywordDQL.join  - utilizado para adicionar novos  joins  \u00e0 consulta, representado na consulta abaixo pela vari\u00e1vel  $HOOK_JOINS ; \n-  repo($entity).getIdsByKeywordDQL.where  - utilizado para adicionar opera\u00e7\u00f5es dentro da cl\u00e1usula  WHERE , reprensetado na consulta abaixo pela vari\u00e1vel  $HOOK_WHERE .  SELECT \n    DISTINCT e.id \nFROM \n    {$entity_class} e \n    $HOOK_JOINS\nWHERE \n    unaccent(lower(e.name)) LIKE unaccent(lower(:keyword)) \n    $HOOK_WHERE", 
            "title": "Hooks para modificar a consulta por palavra-chave"
        }, 
        {
            "location": "/mc_developer_keywords/#exemplos-praticos", 
            "text": "Utilizando um metadado na busca por palavra-chave  Vamos usar como exemplo um metadado chamado  num_entidade , que seria um c\u00f3digo que representa a entidade no sistema e que, quando algu\u00e9m fizesse uma busca por palavra-chave informando tal c\u00f3digo, o sistema deveria retornar este objeto. Vamos supor ainda que este c\u00f3digo s\u00f3 \u00e9 aplicado a agentes e espa\u00e7os, por\u00e9m para aplicar a todas as entidades que  usam  busca por palavra-chave (reposit\u00f3rios que usam o  trait   MapasCulturais\\Traits\\RepositoryKeyword ) basta substituir a parte do hook  \\ >  por  *  $app = \\MapasCulturais\\App::i(); // inst\u00e2ncia da aplica\u00e7\u00e3o\n\n// adiciona o join do metadado\n$app- hook('repo( Agent|Space ).getIdsByKeywordDQL.join', function( $joins, $keyword){\n    $joins .=  \n        LEFT JOIN \n            e.__metadata num_entitdade \n        WITH \n            num_entidade.key = 'num_entidade' ;\n});\n\n// filtra pelo valor do keyword\n$app- hook('repo( Agent|Space ).getIdsByKeywordDQL.where', function( $where, $keyword){\n    // a vari\u00e1vel $keyword est\u00e1 dispon\u00edvel aqui por\u00e9m n\u00e3o \u00e9 recomendado que esta seja utilizada diretamente na consulta\n    // pois ela j\u00e1 estar\u00e1 dispon\u00edvel dentro da consulta pelo par\u00e2metro :keyword.\n    $where .=   OR lower(num_entidade.value) LIKE lower(:keyword) ;\n});  Utilizando uma taxonomia na busca por palavra-chave  Agora vamos utilizar como exemplo uma taxonomia chamada \"categoria\"  $app- hook('repo( * ).getIdsByKeywordDQL.join', function( $joins, $keyword) {\n    $taxonomy = App::i()- getRegisteredTaxonomyBySlug('categoria');\n    $joins .=  LEFT JOIN e.__termRelations categoria_tr\n        LEFT JOIN\n                categoria_tr.term\n                    categoria\n                WITH\n                    categoria.taxonomy = '{$taxonomy- id}' ;\n});\n\n$app- hook('repo( * ).getIdsByKeywordDQL.where', function( $where, $keyword) {\n    $where .=   OR unaccent(lower(categoria.term)) LIKE unaccent(lower(:keyword))  ;\n});", 
            "title": "Exemplos pr\u00e1ticos:"
        }, 
        {
            "location": "/mc_developer_entities/", 
            "text": "Entidades dos Mapas Culturais\n\n\nO banco de dados \u00e9 composto, basicamente, por quatro entidades: Agentes, Espa\u00e7os, Eventos e Projetos\n\n\nAs quatro entidades possuem em comum:\n\n\n\n\nEntidade Verificada ou n\u00e3o pelo mantenedor do sistema\n\n\nNome de Exibi\u00e7\u00e3o\n\n\nImagem de Capa\n\n\nImagem de Avatar\n\n\nAgentes Relacionados\n\n\nDescri\u00e7\u00e3o Curta\n\n\nDescri\u00e7\u00e3o Longa\n\n\nTags\n\n\nSite\n\n\nV\u00eddeos\n\n\nGaleria de Imagens\n\n\nDownload (lista de arquivos)\n\n\nLinks (lista)\n\n\nFacebook\n\n\nTweeter\n\n\nGoogle+\n\n\nPublicado por (Agente respons\u00e1vel pela entidade)\n\n\n\n\nAgentes e Espa\u00e7os possuem em comum:\n\n\n\n\nEmail Privado\n\n\nEmail P\u00fablico\n\n\nTelefone P\u00fablico\n\n\nTelefones Privados 1 e 2\n\n\nLocaliza\u00e7\u00e3o Geogr\u00e1fica\n\n\nEndere\u00e7o\n\n\nAgenda de Eventos\n\n\n\u00c1reas de Atua\u00e7\u00e3o:\n\n\nAntropologia\n\n\nArqueologia\n\n\nArquitetura*Urbanismo\n\n\nArquivo\n\n\nArte Digital\n\n\nArte de Rua\n\n\nArtes Visuais\n\n\nArtesanato\n\n\nAudiovisual\n\n\nCinema\n\n\nCirco\n\n\nComunica\u00e7\u00e3o\n\n\nCultura Cigana\n\n\nCultura Digital\n\n\nCultura Estrangeira (imigrantes)\n\n\nCultura Ind\u00edgena\n\n\nCultura LGBT\n\n\nCultura Negra\n\n\nCultura Popular\n\n\nDan\u00e7a\n\n\nDesign\n\n\nDireito Autoral\n\n\nEconomia Criativa\n\n\nEduca\u00e7\u00e3o\n\n\nEsporte\n\n\nFilosofia\n\n\nFotografia\n\n\nGastronomia\n\n\nGest\u00e3o Cultural\n\n\nHist\u00f3ria\n\n\nJogos Eletr\u00f4nicos\n\n\nJornalismo\n\n\nLeitura\n\n\nLiteratura\n\n\nLivro\n\n\nMeio Ambiente\n\n\nModa\n\n\nMuseu\n\n\nM\u00eddias Sociais\n\n\nM\u00fasica\n\n\nNovas M\u00eddias\n\n\nOutros\n\n\nPatrim\u00f4nio Imaterial\n\n\nPatrim\u00f4nio Material\n\n\nPesquisa\n\n\nProdu\u00e7\u00e3o Cultural\n\n\nR\u00e1dio\n\n\nSa\u00fade\n\n\nSociologia\n\n\nTeatro\n\n\nTelevis\u00e3o\n\n\nTurismo\n\n\n\n\n\n\n\n\nAgentes possuem exclusivamente:\n\n\n\n\nNome Completo\n\n\nTipo\n\n\nColetivo\n\n\nIndividual\n\n\n\n\n\n\nCPF/CNPJ\n\n\nData de Nascimento/Funda\u00e7\u00e3o\n\n\nG\u00eanero\n\n\nRa\u00e7a/Cor\n\n\n\n\nEspa\u00e7os possuem exclusivamente:\n\n\n\n\nTipo:\n\n\nAntiqu\u00e1rio\n\n\nArquivo Privado\n\n\nArquivo P\u00fablico\n\n\nAteli\u00ea\n\n\nBanca de jornal\n\n\nBens culturais de natureza material\n\n\nBiblioteca Privada\n\n\nBiblioteca P\u00fablica\n\n\nCasa de espet\u00e1culo\n\n\nCasa do Patrim\u00f4nio\n\n\nCentro Comunit\u00e1rio\n\n\nCentro Cultural Privado\n\n\nCentro Cultural P\u00fablico\n\n\nCentro de Documenta\u00e7\u00e3o Privado\n\n\nCentro de Documenta\u00e7\u00e3o P\u00fablico\n\n\nCentro de artesanato\n\n\nCine itinerante\n\n\nCineclube\n\n\nCirco Fixo\n\n\nCirco Itinerante\n\n\nConcha ac\u00fastica\n\n\nCreative Bureau\n\n\nDanceteria\n\n\nDrive-in\n\n\nEspa\u00e7o Mais Cultura\n\n\nEspa\u00e7o P\u00fablico Para Proje\u00e7\u00e3o de Filmes\n\n\nEspa\u00e7o para Eventos\n\n\nEspa\u00e7o para apresenta\u00e7\u00e3o de dan\u00e7a\n\n\nEst\u00fadio\n\n\nGafieira\n\n\nGaleria de arte\n\n\nIgreja\n\n\nLan-house\n\n\nLivraria\n\n\nMesquitas\n\n\nMuseu Privado\n\n\nMuseu P\u00fablico\n\n\nPalco de Rua\n\n\nPonto de Leitura Afro\n\n\nPra\u00e7a dos esportes e da cultura\n\n\nR\u00e1dio Comunit\u00e1ria\n\n\nSala de cinema\n\n\nSala de dan\u00e7a\n\n\nSebo\n\n\nSinagoga\n\n\nTeatro Privado\n\n\nTeatro P\u00fablico\n\n\nTemplo\n\n\nTerreiro\n\n\nTerreno para Circo\n\n\nUsina Cultural\n\n\nVideolocadora\n\n\n\n\n\n\nStatus de Publica\u00e7\u00e3o:\n\n\nPublica\u00e7\u00e3o restrita - requer autoriza\u00e7\u00e3o para criar eventos\n\n\nPublica\u00e7\u00e3o livre - qualquer pessoa pode criar eventos\n\n\n\n\n\n\nAcessibilidade\n\n\nCapacidade\n\n\nHor\u00e1rio de Funcionamento\n\n\nCrit\u00e9rios de Uso do Espa\u00e7o\n\n\nSubespa\u00e7os ou Espa\u00e7o*pai ao qual pertencem\n\n\n\n\nEventos possuem exclusivamente:\n\n\n\n\nLinguagens:\n\n\nArtes Circenses\n\n\nArtes Integradas\n\n\nArtes Visuais\n\n\nAudiovisual\n\n\nCinema\n\n\nCultura Digital\n\n\nCultura Ind\u00edgena\n\n\nCultura Tradicional\n\n\nCurso ou Oficina\n\n\nDan\u00e7a\n\n\nExposi\u00e7\u00e3o\n\n\nHip Hop\n\n\nLivro e Literatura\n\n\nM\u00fasica Erudita\n\n\nM\u00fasica Popular\n\n\nOutros\n\n\nPalestra, Debate ou Encontro\n\n\nR\u00e1dio\n\n\nTeatro\n\n\n\n\n\n\nSubt\u00edtulo\n\n\nInscri\u00e7\u00f5es\n\n\nClassifica\u00e7\u00e3o Et\u00e1ria\n\n\nN\u00famero de Telefone para Informa\u00e7\u00f5es\n\n\nAcessibilidade:\n\n\nTradu\u00e7\u00e3o para LIBRAS\n*\u00c1udio Desri\u00e7\u00e3o\n\n\n\n\n\n\nProjeto ao qual pertence\n\n\nOcorr\u00eancias: um evento pode ter v\u00e1rias ocorr\u00eancias, cada ocorr\u00eancia possui:\n\n\nEspa\u00e7o relacionado\n\n\nRegras de Repeti\u00e7\u00e3o de Datas, Hor\u00e1rios, Dura\u00e7\u00e3o\n\n\nPre\u00e7o\n\n\n\n\n\n\n\n\nProjetos possuem exclusivamente:\n\n\n\n\nTipo:\n\n\nCiclo\n\n\nConcurso\n\n\nConven\u00e7\u00e3o\n\n\nEdital\n\n\nEncontro\n\n\nFestival\n\n\nJornada\n\n\nMostra\n\n\nPrograma\n\n\nReuni\u00e3o\n\n\nSarau\n\n\n\n\n\n\nInscri\u00e7\u00f5es:\n\n\nOnline Ativadas ou Desativadas\n\n\nData Inicial, Final, Hor\u00e1rio Final\n\n\nTexto de Introdu\u00e7\u00e3o\n\n\nRegulamento\n\n\nCategorias\n\n\nAgentes:\n\n\nRespons\u00e1vel\n\n\nInstitui\u00e7\u00e3o Respons\u00e1vel\n\n\nColetivo\n\n\nNumero m\u00e1ximo de inscri\u00e7\u00f5es por Agente Respons\u00e1vel\n\n\nArquivos Anexos:\n\n\nObrigat\u00f3rio/Opcional\n\n\nCom ou sem arquivo de Modelo (formul\u00e1rio)\n\n\n\n\n\n\n\n\n\n\nStatus:\n\n\nInv\u00e1lida - em desacordo com o regulamento (ex. documenta\u00e7\u00e3o incorreta).\n\n\nPendente - ainda n\u00e3o avaliada.\n\n\nN\u00e3o selecionada * avaliada, mas n\u00e3o selecionada.\n\n\nSuplente - avaliada, mas aguardando vaga.\n\n\nSelecionada - avaliada e selecionada.\n\n\nRascunho - utilize essa op\u00e7\u00e3o para permitir que o respons\u00e1vel edite e reenvie uma inscri\u00e7\u00e3o. Ao selecionar esta op\u00e7\u00e3o, a inscri\u00e7\u00e3o n\u00e3o ser\u00e1 mais exibida nesta tabela.", 
            "title": "Entidades"
        }, 
        {
            "location": "/mc_developer_entities/#entidades-dos-mapas-culturais", 
            "text": "O banco de dados \u00e9 composto, basicamente, por quatro entidades: Agentes, Espa\u00e7os, Eventos e Projetos", 
            "title": "Entidades dos Mapas Culturais"
        }, 
        {
            "location": "/mc_developer_entities/#as-quatro-entidades-possuem-em-comum", 
            "text": "Entidade Verificada ou n\u00e3o pelo mantenedor do sistema  Nome de Exibi\u00e7\u00e3o  Imagem de Capa  Imagem de Avatar  Agentes Relacionados  Descri\u00e7\u00e3o Curta  Descri\u00e7\u00e3o Longa  Tags  Site  V\u00eddeos  Galeria de Imagens  Download (lista de arquivos)  Links (lista)  Facebook  Tweeter  Google+  Publicado por (Agente respons\u00e1vel pela entidade)", 
            "title": "As quatro entidades possuem em comum:"
        }, 
        {
            "location": "/mc_developer_entities/#agentes-e-espacos-possuem-em-comum", 
            "text": "Email Privado  Email P\u00fablico  Telefone P\u00fablico  Telefones Privados 1 e 2  Localiza\u00e7\u00e3o Geogr\u00e1fica  Endere\u00e7o  Agenda de Eventos  \u00c1reas de Atua\u00e7\u00e3o:  Antropologia  Arqueologia  Arquitetura*Urbanismo  Arquivo  Arte Digital  Arte de Rua  Artes Visuais  Artesanato  Audiovisual  Cinema  Circo  Comunica\u00e7\u00e3o  Cultura Cigana  Cultura Digital  Cultura Estrangeira (imigrantes)  Cultura Ind\u00edgena  Cultura LGBT  Cultura Negra  Cultura Popular  Dan\u00e7a  Design  Direito Autoral  Economia Criativa  Educa\u00e7\u00e3o  Esporte  Filosofia  Fotografia  Gastronomia  Gest\u00e3o Cultural  Hist\u00f3ria  Jogos Eletr\u00f4nicos  Jornalismo  Leitura  Literatura  Livro  Meio Ambiente  Moda  Museu  M\u00eddias Sociais  M\u00fasica  Novas M\u00eddias  Outros  Patrim\u00f4nio Imaterial  Patrim\u00f4nio Material  Pesquisa  Produ\u00e7\u00e3o Cultural  R\u00e1dio  Sa\u00fade  Sociologia  Teatro  Televis\u00e3o  Turismo", 
            "title": "Agentes e Espa\u00e7os possuem em comum:"
        }, 
        {
            "location": "/mc_developer_entities/#agentes-possuem-exclusivamente", 
            "text": "Nome Completo  Tipo  Coletivo  Individual    CPF/CNPJ  Data de Nascimento/Funda\u00e7\u00e3o  G\u00eanero  Ra\u00e7a/Cor", 
            "title": "Agentes possuem exclusivamente:"
        }, 
        {
            "location": "/mc_developer_entities/#espacos-possuem-exclusivamente", 
            "text": "Tipo:  Antiqu\u00e1rio  Arquivo Privado  Arquivo P\u00fablico  Ateli\u00ea  Banca de jornal  Bens culturais de natureza material  Biblioteca Privada  Biblioteca P\u00fablica  Casa de espet\u00e1culo  Casa do Patrim\u00f4nio  Centro Comunit\u00e1rio  Centro Cultural Privado  Centro Cultural P\u00fablico  Centro de Documenta\u00e7\u00e3o Privado  Centro de Documenta\u00e7\u00e3o P\u00fablico  Centro de artesanato  Cine itinerante  Cineclube  Circo Fixo  Circo Itinerante  Concha ac\u00fastica  Creative Bureau  Danceteria  Drive-in  Espa\u00e7o Mais Cultura  Espa\u00e7o P\u00fablico Para Proje\u00e7\u00e3o de Filmes  Espa\u00e7o para Eventos  Espa\u00e7o para apresenta\u00e7\u00e3o de dan\u00e7a  Est\u00fadio  Gafieira  Galeria de arte  Igreja  Lan-house  Livraria  Mesquitas  Museu Privado  Museu P\u00fablico  Palco de Rua  Ponto de Leitura Afro  Pra\u00e7a dos esportes e da cultura  R\u00e1dio Comunit\u00e1ria  Sala de cinema  Sala de dan\u00e7a  Sebo  Sinagoga  Teatro Privado  Teatro P\u00fablico  Templo  Terreiro  Terreno para Circo  Usina Cultural  Videolocadora    Status de Publica\u00e7\u00e3o:  Publica\u00e7\u00e3o restrita - requer autoriza\u00e7\u00e3o para criar eventos  Publica\u00e7\u00e3o livre - qualquer pessoa pode criar eventos    Acessibilidade  Capacidade  Hor\u00e1rio de Funcionamento  Crit\u00e9rios de Uso do Espa\u00e7o  Subespa\u00e7os ou Espa\u00e7o*pai ao qual pertencem", 
            "title": "Espa\u00e7os possuem exclusivamente:"
        }, 
        {
            "location": "/mc_developer_entities/#eventos-possuem-exclusivamente", 
            "text": "Linguagens:  Artes Circenses  Artes Integradas  Artes Visuais  Audiovisual  Cinema  Cultura Digital  Cultura Ind\u00edgena  Cultura Tradicional  Curso ou Oficina  Dan\u00e7a  Exposi\u00e7\u00e3o  Hip Hop  Livro e Literatura  M\u00fasica Erudita  M\u00fasica Popular  Outros  Palestra, Debate ou Encontro  R\u00e1dio  Teatro    Subt\u00edtulo  Inscri\u00e7\u00f5es  Classifica\u00e7\u00e3o Et\u00e1ria  N\u00famero de Telefone para Informa\u00e7\u00f5es  Acessibilidade:  Tradu\u00e7\u00e3o para LIBRAS\n*\u00c1udio Desri\u00e7\u00e3o    Projeto ao qual pertence  Ocorr\u00eancias: um evento pode ter v\u00e1rias ocorr\u00eancias, cada ocorr\u00eancia possui:  Espa\u00e7o relacionado  Regras de Repeti\u00e7\u00e3o de Datas, Hor\u00e1rios, Dura\u00e7\u00e3o  Pre\u00e7o", 
            "title": "Eventos possuem exclusivamente:"
        }, 
        {
            "location": "/mc_developer_entities/#projetos-possuem-exclusivamente", 
            "text": "Tipo:  Ciclo  Concurso  Conven\u00e7\u00e3o  Edital  Encontro  Festival  Jornada  Mostra  Programa  Reuni\u00e3o  Sarau    Inscri\u00e7\u00f5es:  Online Ativadas ou Desativadas  Data Inicial, Final, Hor\u00e1rio Final  Texto de Introdu\u00e7\u00e3o  Regulamento  Categorias  Agentes:  Respons\u00e1vel  Institui\u00e7\u00e3o Respons\u00e1vel  Coletivo  Numero m\u00e1ximo de inscri\u00e7\u00f5es por Agente Respons\u00e1vel  Arquivos Anexos:  Obrigat\u00f3rio/Opcional  Com ou sem arquivo de Modelo (formul\u00e1rio)      Status:  Inv\u00e1lida - em desacordo com o regulamento (ex. documenta\u00e7\u00e3o incorreta).  Pendente - ainda n\u00e3o avaliada.  N\u00e3o selecionada * avaliada, mas n\u00e3o selecionada.  Suplente - avaliada, mas aguardando vaga.  Selecionada - avaliada e selecionada.  Rascunho - utilize essa op\u00e7\u00e3o para permitir que o respons\u00e1vel edite e reenvie uma inscri\u00e7\u00e3o. Ao selecionar esta op\u00e7\u00e3o, a inscri\u00e7\u00e3o n\u00e3o ser\u00e1 mais exibida nesta tabela.", 
            "title": "Projetos possuem exclusivamente:"
        }, 
        {
            "location": "/mc_developer_theme/", 
            "text": "Customiza\u00e7\u00e3o do tema do Mapas Culturais\n\n\nEste documento trata de uma customiza\u00e7\u00e3o simples do tema base do Mapas Culturais para novas instala\u00e7\u00f5es, e se restringe a customiza\u00e7\u00e3o das cores, imagens, textos e configura\u00e7\u00e3o do posicionamento inicial dos mapas. Este \u00e9 o n\u00edvel de customiza\u00e7\u00e3o utilizado nos diversos temas do reposit\u00f3rio, como por exemplo os temas de Blumenau (blumenaumaiscultura.com.br), Cear\u00e1 (mapa.cultura.ce.gov.br), Sobral (cultura.sobral.ce.gov.br) e SaoJose (lugaresdacultura.org.br).\n\n\nNeste documento ser\u00e1 feito um tema de exemplo para uma \nSecretaria Municipal de Cultura\n cuja sigla \u00e9 \nSECONDO\n, de uma cidade fict\u00edcia chamada \nMacondo\n. O nome do site ser\u00e1 \nMacondo Cultural\n.\n\n\n\u00cdndice\n\n\n\n\nEstrutura do Tema\n\n\nCriando o tema\n\n\nEst\u00edlos\n\n\nDefini\u00e7\u00e3o das vari\u00e1veis SASS\n\n\nSobrescrevendo estilos\n\n\nCompilando os arquivos SASS\n\n\n\n\n\n\nImagens\n\n\nSubstituindo imagens\n\n\nUtilizando imagens nos templates\n\n\nUtilizando imagens nos estilos\n\n\n\n\n\n\nSubstituindo partes dos templates\n\n\nTextos\n\n\nP\u00e1ginas \"Sobre\" e \"Como Usar\"\n\n\nConfigura\u00e7\u00f5es fixas do tema\n\n\nConfigurando os mapas\n\n\nDivis\u00f5es geogr\u00e1ficas\n\n\n\n\n\n\n\n\n\n\nCriando um reposit\u00f3rio do tema no Github\n\n\nCriando o reposit\u00f3rio\n\n\nPublicando altera\u00e7\u00f5es\n\n\nClonando e atualizando a partir do reposit\u00f3rio\n\n\n\n\n\n\nEstrutura de arquivos do tema BaseV1\n\n\n\n\nEstrutura do Tema\n\n\nO tema padr\u00e3o que do mapas \u00e9 o tema \nBaseV1\n, localizado na pasta \nsrc/protected/application/themes\n, e esse tema cont\u00e9m todos os templates, imagens, estilos e scripts que s\u00e3o usados para renderizar as p\u00e1ginas (Ex: Mapa, Painel, Home..).\n\n\n\u00c9 poss\u00edvel estender o tema criando uma pasta, de modo que todos os arquivos que forem adicionados no tema \"filho\" ir\u00e3o sobrescrever os arquivos originais do tema \nBaseV1\n, isso inclui os templates, imagens, estilos e scripts. A estrutura completa est\u00e1 na se\u00e7\u00e3o \nEstrutura de arquivos do tema BaseV1\n.\n\n\n\n\nIMPORTANTE:\n \u00c9 necess\u00e1rio tomar cuidado ao sobrescrever os arquivos, j\u00e1 que posteriormente os arquivos do tema \nBaseV1\n podem ser alterados (incluindo uma nova funcionalidade, por exemplo) e isso n\u00e3o afetar\u00e1 o tema estendido.\n\n\n\n\nAntes de decidir sobrescrever um arquivo, \u00e9 indicado que verificar se n\u00e3o \u00e9 poss\u00edvel efetuar a altera\u00e7\u00e3o desejada utilizando \nhooks\n, que pode ser consultado na documenta\u00e7\u00e3o \nGuia do Desenvolvedor\n\n\nCriando o tema\n\n\nO primeiro passo \u00e9 copiar o template de tema, dispon\u00edvel na pasta \nsrc/protected/application/themes/\nTemplateV1\n, para a pasta do novo tema: \nsrc/protected/application/themes/\nMacondo\n \u00b9.\n\n\nFeito isto renomeie o \nnamespace\n \nTemplateV1\n, na primeira linha do arquivo \nTheme.php\n, para o namespace do Tema (de prefer\u00eancia o mesmo nome da pasta)\n\n\n?php\nnamespace Macondo;\n...\n\n\n\n\n\u00b9 A princ\u00edpio o tema pode estar em qualquer pasta acess\u00edvel pelo usu\u00e1rio que roda a aplica\u00e7\u00e3o, por\u00e9m por \nlimita\u00e7\u00f5es do SASS\n \u00e9 necess\u00e1rio colocar \nhardcoded\n o caminho para o tema BaseV1. Por esta raz\u00e3o colocamos o tema dentro da pasta \nsrc/protected/application/themes/\n e importamos os arquivos SASS do tema BaseV1 utilizando a linha abaixo:\n\n\n@import \n../../../../BaseV1/assets/css/sass/main\n;\n\n\n\n\nEstilos\n\n\nO tema \nBaseV1\n do Mapas Culturais utiliza uma \nextens\u00e3o da linguagem CSS\n chamada \nSASS\n, e \u00e9 atrav\u00e9s desta que s\u00e3o feitas as personaliza\u00e7\u00f5es dos estilos do tema.\n\n\nA personaliza\u00e7\u00e3o das cores, fontes e estilos \u00e9 feita de duas maneiras: definindo os valores das vari\u00e1veis utilizadas nos diversos arquivos sass (.scss) e, nos casos em que a defini\u00e7\u00e3o das vari\u00e1veis n\u00e3o \u00e9 suficiente, sobrescrevendo as classes/estilos CSS.\n\n\nDefini\u00e7\u00e3o das vari\u00e1veis SASS\n\n\nA defini\u00e7\u00e3o de novos valores para as vari\u00e1veis deve ser feita no arquivo \nassets/css/sass/_variables.scss\n do tema filho, e uma lista completa das vari\u00e1veis, assim como seus valores padr\u00e3o, pode ser encontrada no arquivo \n_variables.scss\n do tema \nBaseV1\n.\n\n\nNo exemplo abaixo s\u00e3o definidas as vari\u00e1veis das cores principais\u00b2 que s\u00e3o utilizadas em diversos lugares do tema\u00b9.\n\n\n$brand-primary: #5064A5 !default;\n$brand-event:   #F7931D !default;\n$brand-agent:   #5FB643 !default;\n$brand-space:   #AB1F24 !default;\n$brand-project: #795099 !default;\n$brand-seal:    #795099 !default;\n$brand-devs:    #CE5AA1 !default;\n\n\n\n\n\u00b9 Para saber com mais precis\u00e3o onde uma vari\u00e1vel \u00e9 utilizada e, por consequ\u00eancia, o que ser\u00e1 afetado e onde estar\u00e3o os efetitos de uma modifica\u00e7\u00e3o, a melhor maneira \u00e9 fazer uma busca pelo nome da vari\u00e1vel (por exemplo \n$brand-primary\n) dentro da pasta \nsass\n do tema BaseV1.\n\n\n\u00b2 Alterar as cores dos \neventos\n, \nagentes\n e/ou \nespa\u00e7os\n implica em recriar os arquivos dos \npins\n (ver os arquivos de imagens que come\u00e7am com \npin-\n e \nagrupador-\n)  utilizados nos mapas para estas entidades.\n\n\nSobrescrevendo estilos\n\n\nQuando a modifica\u00e7\u00e3o que se deseja fazer \u00e9 mais complexa e n\u00e3o \u00e9 poss\u00edvel de faz\u00ea-la com uma simples mudan\u00e7a de valor de uma vari\u00e1vel, ou a propriedade que se quer alterar n\u00e3o \u00e9 definida por uma vari\u00e1vel, ou ainda se a altera\u00e7\u00e3o deve ser num caso muito espec\u00edfico, como exemplo o tamanho da caixinha de edi\u00e7\u00e3o do nome de agentes, o caminho a ser adotado \u00e9 sobrescrever a classe/estilo.\n\n\nEste n\u00edvel de personaliza\u00e7\u00e3o deve ser feito no arquivo \nassets/css/sass/_overrides.scss\n do tema filho.\n\n\nNo exemplo abaixo mudamos a altura da imagem de \nverificado\n para 100px;\n\n\n.widget-verified {\n    height: 100px;\n}\n\n\n\n\nSe for utilizar imagens nos estilos, como por exemplo imagens de fundo, ver a se\u00e7\u00e3o \nUtilizando imagens nos estilos\n.\n\n\nCompilando os arquivos SASS\n\n\nDurante o processo de desenvolvimento do tema, a melhor maneira de se compilar o sass \u00e9 utilizando o comando \nsass --watch\n (ver \ndocumenta\u00e7\u00e3o do sass\n) que este recompilar\u00e1 o \n.css\n sempre que houver modifica\u00e7\u00f5es nos arquivos \n.css\n.\n\n\nEntre pela linha de comando na pasta \nassets/css\n do tema filho e execute o seguinte comando:\n\n\nsass --watch sass/main.scss:main.css\n\n\n\n\nImagens\n\n\nSubstituindo imagens\n\n\nQualquer imagem utilizada pelo tema \nBaseV1\n pode ser substituida facilmente bastando, para isto, colocar uma imagem de mesmo nome na pasta \nassets/img\n do tema filho.\n\n\nPor exemplo, para personalizar as imagens utilizadas como selo de que o conte\u00fado \u00e9 verificado/oficial, basca colocar os arquivos com o bras\u00e3o da institui\u00e7\u00e3o na pasta \nassets/img\n, obviamente respeitando os tamanhos e propor\u00e7\u00f5es (largura e altura).\n\n\nassets/img/unverified-seal.png\nassets/img/verified-icon.png\nassets/img/verified-seal.png\nassets/img/verified-seal-small.png\n\n\n\n\nUtilizando imagens nos templates\n\n\nPara utilizar uma nova imagem no tema filho, primeiro coloque o arquivo da imagem na pasta \nassets/img\n e em seguida chame o arquivo da seguinte forma no template, utilizando a fun\u00e7\u00e3o \nasset\n do tema:\n\n\nimg src=\n?php $this-\nasset('img/nome-da-imagem.png'); ?\n \n\n\n\n\n\nUtilizando imagens nos estilos\n\n\nPara utilizar uma imagem nos estilos \u00e9 necess\u00e1rio \npedir\n para a aplica\u00e7\u00e3o \npublicar\n esta imagem antes de utiliz\u00e1-la. Para tal basta chamar, no m\u00e9todo \n_publishAssets\n do arquivo \nTheme.php\n do tema filho, a fun\u00e7\u00e3o \nasset\n do tema passando \nfalse\n como segundo par\u00e2mtro, que indicando que n\u00e3o \u00e9 para imprimir a url do asset publicado.\n\n\nexemplos:\n\n\n    protected function _publishAssets() {\n        // somente publica o asset\n        $this-\nasset('img/imagem-de-fundo.png', false);\n\n        // publica e coloca a url do asset publicado no objeto MapasCulturais.assets para o js\n        $this-\njsObject['assets']['logo-instituicao'] = $this-\nasset('img/logo-instituicao.png', false);\n    }\n\n\n\n\nSubstituindo \npartes\n dos templates\n\n\nDa mesma forma como acontece com as imagens, quaquer arquivo \n.php\n das pastas \nviews\n e \nlayouts\n pode ser substituido facilmente, bastando para isto, que seja criado um arquivo com o mesmo nome no tema filho.\n\n\nOs tr\u00eas arquivos mais comumente substitu\u00eddos, e que j\u00e1 s\u00e3o inclu\u00eddos no template de tema \nTemplateV1\n, s\u00e3o os seguintes:\n\n\nlayouts/parts/editable-entity-logo.php  // logo que aparece na barrinha cinza da edi\u00e7\u00e3o de entidades\nlayouts/parts/header-about-nav.php      // menu da direita do header\nlayouts/parts/header-logo.php           // logo do site, a esquerda do header\n\n\n\n\nTextos\n\n\nOs textos utilizados na home e em alguns outros lugares do site, como nos textos das \np\u00e1ginas \"Sobre\" e \"Como Usar\"\n, s\u00e3o definidos no m\u00e9todo \n_getTexts\n arquivo \nTheme.php\n. O template de tema \nTemplateV1\n cont\u00e9m todos os textos \nconfigur\u00e1veis\n comentados com os valores padr\u00e3o.\n\n\nabaixo configuramos alguns textos de acordo com nossa instala\u00e7\u00e3o fict\u00edcia:\n\n\n            'site: name' =\n 'Macondo Cultural',\n            'site: in the region' =\n 'na cidade de Macondo',\n            'site: of the region' =\n 'da cidade de Macondo',\n            'site: owner' =\n 'Secretaria Municipal de Cultura de Macondo',\n            'site: by the site owner' =\n 'pela Secretaria Municipal de Cultura de Macondo',\n\n            'home: abbreviation' =\n \nSECONDO\n,\n            'home: colabore' =\n \nColabore com o Macondo Cultural\n,\n\n            'search: verified results' =\n 'Resultados da SECONDO',\n            'search: verified' =\n \nSECONDO\n\n\n\n\n\nP\u00e1ginas \"Sobre\" e \"Como Usar\"\n\n\nOs textos das p\u00e1ginas \nSobre\n e \nComo Usar\n s\u00e3o pensados para serem gen\u00e9ricos e utilizam dos textos definidos \nacima\n.\n\n\nCaso os textos fornecidos pelo tema BaseV1 n\u00e3o supra as necessidades, basta criar os arquivos na pasta \npages\n do tema filho e escrever, utilizando as linguagens Markdown ou HTML para formata\u00e7\u00e3o, os novos textos.\n\n\nConfigura\u00e7\u00f5es fixas do tema\n\n\nConfigurando os mapas\n\n\nO primeiro passo para configurar\u00b9 o mapas da busca e das p\u00e1ginas de cria\u00e7\u00e3o de agentes e espa\u00e7os, \u00e9 conseguir os valores exatos da latitude, longitude e zoom.\n\n\nA maneira mais simples de se fazer isto \u00e9 atrav\u00e9s da pr\u00f3pria p\u00e1gina de busca, posicionando e definindo o zoom do mapa exatamente como ele deve se encontrar quando um usu\u00e1rio entrar na busca, e copiando os valores que aparecem na URL como no exemplo abaixo:\n\n\n/busca/##(global:(enabled:(agent:!t),filterEntity:agent,map:(center:(lat:10.590252550882942,lng:-74.18719768524169),zoom:15)))\nlatitude:  10.590252550882942\nlongitude: -74.18719768524169\nzoom:      15\n\n\n\n\nAp\u00f3s obter os valores, defina no arquivo \nconf-base.php\n do tema filho os valores das chaves \n'maps.center'\n e \n'maps.zoom.default'\n com os valores obtidos.\n\n\n    // latitude,longitude do centro do mapa da busca e do mapa da cria\u00e7\u00e3o de agentes e espa\u00e7os\n    'maps.center' =\n [10.590252550882942, -74.18719768524169],\n\n    // zoom padr\u00e3o do mapa da busca\n    'maps.zoom.default' =\n 15,\n\n\n\n\n\u00b9 H\u00e1 mais op\u00e7\u00f5es de configura\u00e7\u00f5es dos mapas que n\u00e3o ser\u00e3o abordadas neste documento mas que est\u00e3o comentadas com os valores padr\u00e3o no arquivo \nconf-base.php\n do TemplateV1.\n\n\nDivis\u00f5es geogr\u00e1ficas\n\n\nAs divis\u00f5es geogr\u00e1ficas configuradas devem ser as mesmas que foram importadas pelos shapefiles. No nosso exemplo usaremos somente \nzona\n e \nbairro\n.\n\n\n    'app.geoDivisionsHierarchy' =\n [\n        'zona'          =\n 'Zona',\n        'bairro'        =\n 'Bairro'\n    ],\n\n\n\n\nCriando um reposit\u00f3rio do tema no Github\n\n\n\u00c9 recomendado que ao criar o tema ou efetuar altera\u00e7\u00f5es no tema, as altera\u00e7\u00f5es estejam em um reposit\u00f3rio git para posteriormente seja poss\u00edvel clonar o tema de qualquer lugar, seja para utilizar em um servidor em produ\u00e7\u00e3o ou para utilizar um ambiente de desenvolvimento.\n\n\nCriando o reposit\u00f3rio\n\n\nPara criar o reposit\u00f3rio \u00e9 necess\u00e1rio seguir os seguintes passos:\n- Criar uma conta no \nGithub\n\n- No menu superior direito apertar a op\u00e7\u00e3o \nNew Repository\n\n- Preencher a caixa de texto \nRepository name\n com o nome do reposit\u00f3rio (recomend\u00e1vel utilizar o mesmo nome escolhido na pasta do tema, para que ao clonar o reposit\u00f3rio o nome fique correto)\n- Apertar o bot\u00e3o \nCreate repository\n\n- Executar os seguintes comandos ap\u00f3s criar o reposit\u00f3rio (alterando \nMacondo\n para o nome do seu reposit\u00f3rio/tema):\n\n\n$ echo \n# Macondo\n \n README.md\n$ git init\n$ git add --all\n$ git commit -m \nfirst commit\n\n$ git remote add origin https://github.com/[endereco_github]/Macondo.git\n$ git push -u origin master\n\n\n\n\nPublicando altera\u00e7\u00f5es\n\n\nDentro da pasta do tema, se alguma altera\u00e7\u00e3o for feita em qualquer arquivo ser\u00e1 poss\u00edvel ver os arquivos que foram alterados utilizando o comando \ngit status\n, mostrando os arquivos modificados. Ao alterar arquivos o resultado deve ser parecido com isso:\n\n\nOn branch master\nYour branch is up-to-date with 'origin/master'.\nChanges not staged for commit:\n  (use \ngit add \nfile\n...\n to update what will be committed)\n  (use \ngit checkout -- \nfile\n...\n to discard changes in working directory)\n\n    modified:   Theme.php\n    modified:   conf-base.php\n\nno changes added to commit (use \ngit add\n and/or \ngit commit -a\n)\n\n\n\n\nNeste exemplo, houveram altera\u00e7\u00f5es nos arquivos \nTheme.php\n e no arquivo \nconf-base.php\n. Para publicar esse arquivos \u00e9 necess\u00e1rio utilizar os comandos \n- \ngit add [nome_do_arquivo]\n\n- \ngit commit -m \"[mensagem_com_descricao_da_alteracao]\"\n\n- \ngit push\n\n\nComo no exemplo, para publicar os arquivos \nTheme.php\n e \nconf-base.php\n os comando seriam assim:\n\n\n$git add Theme.php\n$git add conf-base.php\n$git commit -m \nAltera\u00e7\u00f5es de configura\u00e7\u00f5es do Tema\n\n$git push\n\n\n\n\nClonando e atualizando a partir do reposit\u00f3rio\n\n\nAp\u00f3s as altera\u00e7\u00f5es estarem publicadas em um reposit\u00f3rio do Github, podemos obter o c\u00f3digo publicado com o comando \ngit clone https://github.com/[endereco_github]/Macondo\n, isso ir\u00e1 criar uma pasta chamada \nMacondo\n onde o comando foi executado. Preferencialmente executado da pasta \nthemes\n da instala\u00e7\u00e3o do mapas:\n\n\n$ cd src/protected/application/themes\n$ git clone https://github.com/[endereco_github]/Macondo\n\n\n\n\nSe alguma altera\u00e7\u00e3o for efetuada no reposit\u00f3rio do Github e for necess\u00e1rio atualizar o tema localmente, pode se utilizar o comando \ngit pull\n para atualizar o c\u00f3digo localmente.\n\n\n\n\nIMPORTANTE:\n Ao utilizar o comando \ngit pull\n verificar se n\u00e3o existem arquivos locais que foram alterados e podem ser sobrescritar ou gerar algum conflito.\n\n\n\n\nPara mais detalhes sobre como utilizar o git, \u00e9 recomend\u00e1vel a leitura da documenta\u00e7\u00e3o e artigos \u00fateis:\n- https://git-scm.com/book/pt-br/v1/Primeiros-passos-No%C3%A7%C3%B5es-B%C3%A1sicas-de-Git\n- http://rogerdudler.github.io/git-guide/index.pt_BR.html\n\n\nEstrutura de arquivos do tema BaseV1\n\n\n\n\nBaseV1/\n\n\ndb-updates.php\n \nscripts para atualiza\u00e7\u00e3o de banco que afetam todos os temas filhos.\n\n\nTheme.php\n \nclasse \nMapasCulturais\\Themes\\BaseV1\\Theme\n. Todos os temas filhos estendem esta classe.\n\n\nassets/\n \npasta onde ficam os arquivos est\u00e1ticos\n\n\ncss/\n\n\nsass/\n \narquivos fonte .scss (\nprecisam ser compilados\n).\n\n\n\n\n\n\nfonts/\n \nas fontes utilizadas no tema BaseV1.\n\n\nimg/\n \nas imagens utilizadas no tema BaseV1.\n\n\nagrupador-agente.png\n \npin para grupo de \nagentes\n no mapa da busca.\n\n\nagrupador-combinado-agente-evento.png\n \npin para grupo de \nagentes e eventos\n no mapa da busca.\n\n\nagrupador-combinado-espaco-agente.png\n \npin para grupo de \nagentes e espa\u00e7os\n no mapa da busca.\n\n\nagrupador-combinado-espaco-evento.png\n \npin para grupo de \nespa\u00e7os e eventos\n no mapa da busca.\n\n\nagrupador-combinado.png\n \npin para grupo de \nagentes, espa\u00e7os e eventos\n no mapa da busca.\n\n\nagrupador-espaco.png\n \npin para grupo de \nespa\u00e7os\n no mapa da busca.\n\n\nagrupador-evento.png\n \npin para grupo de \neventos\n no mapa da busca.\n\n\navatar--agent.png\n \navatar padr\u00e3o do agente - imagem que aparece como avatar do agente quando o usu\u00e1rio n\u00e3o subiu nunhuma imagem.\n\n\navatar--event.png\n \navatar padr\u00e3o do evento - imagem que aparece como avatar do evento quando o usu\u00e1rio n\u00e3o subiu nunhuma imagem.\n\n\navatar--project.png\n \navatar padr\u00e3o do projeto - imagem que aparece como avatar do projeto quando o usu\u00e1rio n\u00e3o subiu nunhuma imagem.\n\n\navatar--space.png\n \navatar padr\u00e3o do espa\u00e7o - imagem que aparece como avatar do espa\u00e7o quando o usu\u00e1rio n\u00e3o subiu nunhuma imagem.\n\n\nfavicon-32.ico\n \nfavicon de 32px.\n\n\nfavicon.ico\n \nfavicon de 16px.\n\n\nfundo.png\n\n\nicon-circulo.png\n \n\u00edcone do bot\u00e3o de selecionar uma \u00e1rea do mapa da busca.\n\n\nicon-fullscreen.png\n \n\u00edcone do bot\u00e3o fullscreen dos mapas.\n\n\nicon-localizacao.png\n \n\u00edcone do bot\u00e3o que centraliza o mapa baseado na localiza\u00e7\u00e3o do usu\u00e1rio.\n\n\nicon-zoom-in.png\n \n\u00edcone do bot\u00e3o de zoom + dos mapas.\n\n\nicon-zoom-out.png\n \n\u00edcone do bot\u00e3o de zoom - dos mapas.\n\n\ninstituto-tim-white.png\n\n\nlayers.png\n \n\u00edcone do bot\u00e3o para selecionar as camadas para serem exibidas no mapa da busca.\n\n\nmarca-da-org.png\n  \nlogotipo da marca da organiza\u00e7\u00e3o.\n\n\nmarker-icon.png\n \npin que exibe a localiza\u00e7\u00e3o do usu\u00e1rio no mapa da busca.\n\n\npin-agente.png\n \npin do agente (n\u00e3o agrupado) nos mapas.\n\n\npin-espaco.png\n \npin do espa\u00e7o (n\u00e3o agrupado) nos mapas.\n\n\npin-evento.png\n \npin do evento (n\u00e3o agrupado) nos mapas.\n\n\npin-sombra.png\n \nsombra dos pins.\n\n\nsetinhas-editable.png\n \nsetinhas utilizadas nas caixas de edi\u00e7\u00e3o dos campos das entidades.\n\n\nshare.png\n \nimagem padr\u00e3o utilizada nos compartilhamentos (facebook, google+, etc.) quando n\u00e3o h\u00e1 outra imagem a ser utilizada, como por exemplo o avatar da entidade.\n\n\nspinner_192.gif\n \nspinner que \u00e9 utilizado no carregamento dos v\u00eddeos das entidades.\n\n\nspinner-black.gif\n \nspinner que \u00e9 utilizado em diversas partes do tema quando o fundo \u00e9 claro.\n\n\nspinner.gif\n \nspinner que \u00e9 utilizado em diversas partes do tema quando o fundo \u00e9 escuro.\n\n\ntim.png\n\n\nunverified-seal.png\n\n\nverified-icon.png\n\n\nverified-seal.png\n\n\nverified-seal-small.png\n\n\ntour/\n\n\n\n\n\n\njs/\n\n\nvendor/\n\n\n\n\n\n\nlayouts/\n\n\ndefault.php\n\n\nsearch.php\n\n\npanel.php\n\n\nparts/\n\n\nagenda-content.php\n\n\nagenda-header.php\n\n\nagenda.php\n\n\najax-uploader.php\n\n\nbusca-avancada.php\n\n\ndownloads.php\n\n\neditable-entity-logo.php\n\n\neditable-entity.php\n\n\nentity-parent.php\n\n\nentity-status.php\n\n\nfooter.php\n\n\ngallery.php\n\n\nheader-about-nav.php\n\n\nheader-logo.php\n\n\nheader-main-nav.php\n\n\nheader.php\n\n\nlink-list.php\n\n\nmetalist-form-template.php\n\n\nowner.php\n\n\npanel-agent.php\n\n\npanel-app.php\n\n\npanel-em-cartaz.php\n\n\npanel-event.php\n\n\npanel-nav.php\n\n\npanel-project.php\n\n\npanel-registration.php\n\n\npanel-space.php\n\n\npanel-seal.php\n\n\nredes-sociais.php\n\n\nrelated-agents.php\n\n\ntemplates.php\n\n\nverified.php\n\n\nvideo-gallery.php\n\n\nwidget-areas.php\n\n\nwidget-tags.php\n\n\n\n\n\n\n\n\n\n\npages/\n\n\ncomo-usar.md\n\n\n_left.md\n\n\n_right.md\n\n\nsobre.md\n\n\n\n\n\n\nviews/\n\n\nagent/\n\n\ncreate.php\n -\n single.php\n\n\nedit.php\n -\n single.php\n\n\nsingle.php\n\n\n\n\n\n\napp/\n\n\ncreate.php\n\n\nedit.php\n\n\nsingle.php\n -\n edit.php\n\n\n\n\n\n\nauth/\n\n\nfake-authentication.php\n\n\n\n\n\n\nevent/\n\n\ncreate.php\n -\n single.php\n\n\nedit.php\n -\n single.php\n\n\nsingle.php\n\n\n\n\n\n\ngeneric/\n\n\nedit.php\n\n\nlist.php\n\n\n\n\n\n\npanel/\n\n\nagents.php\n\n\napps.php\n\n\nem-cartaz.php\n\n\nevents.php\n\n\ngeneric.php\n\n\nindex.php\n\n\nprojects.php\n\n\nregistrations.php\n\n\nrequire-authentication.php\n\n\nspaces.php\n\n\n\n\n\n\nproject/\n\n\ncreate.php\n -\n single.php\n\n\nedit.php\n -\n single.php\n\n\nreport.php\n\n\nsingle.php\n\n\n\n\n\n\nregistration/\n\n\nedit.php\n\n\nsingle.php\n\n\n\n\n\n\nsite/\n\n\nindex.php\n\n\npage.php\n\n\npermission-denied.php\n\n\nsearch.php\n\n\n\n\n\n\nspace/\n\n\ncreate.php\n -\n single.php\n\n\nedit.php\n -\n single.php\n\n\nsingle.php", 
            "title": "Criando um novo tema"
        }, 
        {
            "location": "/mc_developer_theme/#customizacao-do-tema-do-mapas-culturais", 
            "text": "Este documento trata de uma customiza\u00e7\u00e3o simples do tema base do Mapas Culturais para novas instala\u00e7\u00f5es, e se restringe a customiza\u00e7\u00e3o das cores, imagens, textos e configura\u00e7\u00e3o do posicionamento inicial dos mapas. Este \u00e9 o n\u00edvel de customiza\u00e7\u00e3o utilizado nos diversos temas do reposit\u00f3rio, como por exemplo os temas de Blumenau (blumenaumaiscultura.com.br), Cear\u00e1 (mapa.cultura.ce.gov.br), Sobral (cultura.sobral.ce.gov.br) e SaoJose (lugaresdacultura.org.br).  Neste documento ser\u00e1 feito um tema de exemplo para uma  Secretaria Municipal de Cultura  cuja sigla \u00e9  SECONDO , de uma cidade fict\u00edcia chamada  Macondo . O nome do site ser\u00e1  Macondo Cultural .  \u00cdndice   Estrutura do Tema  Criando o tema  Est\u00edlos  Defini\u00e7\u00e3o das vari\u00e1veis SASS  Sobrescrevendo estilos  Compilando os arquivos SASS    Imagens  Substituindo imagens  Utilizando imagens nos templates  Utilizando imagens nos estilos    Substituindo partes dos templates  Textos  P\u00e1ginas \"Sobre\" e \"Como Usar\"  Configura\u00e7\u00f5es fixas do tema  Configurando os mapas  Divis\u00f5es geogr\u00e1ficas      Criando um reposit\u00f3rio do tema no Github  Criando o reposit\u00f3rio  Publicando altera\u00e7\u00f5es  Clonando e atualizando a partir do reposit\u00f3rio    Estrutura de arquivos do tema BaseV1", 
            "title": "Customiza\u00e7\u00e3o do tema do Mapas Culturais"
        }, 
        {
            "location": "/mc_developer_theme/#estrutura-do-tema", 
            "text": "O tema padr\u00e3o que do mapas \u00e9 o tema  BaseV1 , localizado na pasta  src/protected/application/themes , e esse tema cont\u00e9m todos os templates, imagens, estilos e scripts que s\u00e3o usados para renderizar as p\u00e1ginas (Ex: Mapa, Painel, Home..).  \u00c9 poss\u00edvel estender o tema criando uma pasta, de modo que todos os arquivos que forem adicionados no tema \"filho\" ir\u00e3o sobrescrever os arquivos originais do tema  BaseV1 , isso inclui os templates, imagens, estilos e scripts. A estrutura completa est\u00e1 na se\u00e7\u00e3o  Estrutura de arquivos do tema BaseV1 .   IMPORTANTE:  \u00c9 necess\u00e1rio tomar cuidado ao sobrescrever os arquivos, j\u00e1 que posteriormente os arquivos do tema  BaseV1  podem ser alterados (incluindo uma nova funcionalidade, por exemplo) e isso n\u00e3o afetar\u00e1 o tema estendido.   Antes de decidir sobrescrever um arquivo, \u00e9 indicado que verificar se n\u00e3o \u00e9 poss\u00edvel efetuar a altera\u00e7\u00e3o desejada utilizando  hooks , que pode ser consultado na documenta\u00e7\u00e3o  Guia do Desenvolvedor", 
            "title": "Estrutura do Tema"
        }, 
        {
            "location": "/mc_developer_theme/#criando-o-tema", 
            "text": "O primeiro passo \u00e9 copiar o template de tema, dispon\u00edvel na pasta  src/protected/application/themes/ TemplateV1 , para a pasta do novo tema:  src/protected/application/themes/ Macondo  \u00b9.  Feito isto renomeie o  namespace   TemplateV1 , na primeira linha do arquivo  Theme.php , para o namespace do Tema (de prefer\u00eancia o mesmo nome da pasta)  ?php\nnamespace Macondo;\n...  \u00b9 A princ\u00edpio o tema pode estar em qualquer pasta acess\u00edvel pelo usu\u00e1rio que roda a aplica\u00e7\u00e3o, por\u00e9m por  limita\u00e7\u00f5es do SASS  \u00e9 necess\u00e1rio colocar  hardcoded  o caminho para o tema BaseV1. Por esta raz\u00e3o colocamos o tema dentro da pasta  src/protected/application/themes/  e importamos os arquivos SASS do tema BaseV1 utilizando a linha abaixo:  @import  ../../../../BaseV1/assets/css/sass/main ;  Estilos  O tema  BaseV1  do Mapas Culturais utiliza uma  extens\u00e3o da linguagem CSS  chamada  SASS , e \u00e9 atrav\u00e9s desta que s\u00e3o feitas as personaliza\u00e7\u00f5es dos estilos do tema.  A personaliza\u00e7\u00e3o das cores, fontes e estilos \u00e9 feita de duas maneiras: definindo os valores das vari\u00e1veis utilizadas nos diversos arquivos sass (.scss) e, nos casos em que a defini\u00e7\u00e3o das vari\u00e1veis n\u00e3o \u00e9 suficiente, sobrescrevendo as classes/estilos CSS.  Defini\u00e7\u00e3o das vari\u00e1veis SASS  A defini\u00e7\u00e3o de novos valores para as vari\u00e1veis deve ser feita no arquivo  assets/css/sass/_variables.scss  do tema filho, e uma lista completa das vari\u00e1veis, assim como seus valores padr\u00e3o, pode ser encontrada no arquivo  _variables.scss  do tema  BaseV1 .  No exemplo abaixo s\u00e3o definidas as vari\u00e1veis das cores principais\u00b2 que s\u00e3o utilizadas em diversos lugares do tema\u00b9.  $brand-primary: #5064A5 !default;\n$brand-event:   #F7931D !default;\n$brand-agent:   #5FB643 !default;\n$brand-space:   #AB1F24 !default;\n$brand-project: #795099 !default;\n$brand-seal:    #795099 !default;\n$brand-devs:    #CE5AA1 !default;  \u00b9 Para saber com mais precis\u00e3o onde uma vari\u00e1vel \u00e9 utilizada e, por consequ\u00eancia, o que ser\u00e1 afetado e onde estar\u00e3o os efetitos de uma modifica\u00e7\u00e3o, a melhor maneira \u00e9 fazer uma busca pelo nome da vari\u00e1vel (por exemplo  $brand-primary ) dentro da pasta  sass  do tema BaseV1.  \u00b2 Alterar as cores dos  eventos ,  agentes  e/ou  espa\u00e7os  implica em recriar os arquivos dos  pins  (ver os arquivos de imagens que come\u00e7am com  pin-  e  agrupador- )  utilizados nos mapas para estas entidades.  Sobrescrevendo estilos  Quando a modifica\u00e7\u00e3o que se deseja fazer \u00e9 mais complexa e n\u00e3o \u00e9 poss\u00edvel de faz\u00ea-la com uma simples mudan\u00e7a de valor de uma vari\u00e1vel, ou a propriedade que se quer alterar n\u00e3o \u00e9 definida por uma vari\u00e1vel, ou ainda se a altera\u00e7\u00e3o deve ser num caso muito espec\u00edfico, como exemplo o tamanho da caixinha de edi\u00e7\u00e3o do nome de agentes, o caminho a ser adotado \u00e9 sobrescrever a classe/estilo.  Este n\u00edvel de personaliza\u00e7\u00e3o deve ser feito no arquivo  assets/css/sass/_overrides.scss  do tema filho.  No exemplo abaixo mudamos a altura da imagem de  verificado  para 100px;  .widget-verified {\n    height: 100px;\n}  Se for utilizar imagens nos estilos, como por exemplo imagens de fundo, ver a se\u00e7\u00e3o  Utilizando imagens nos estilos .  Compilando os arquivos SASS  Durante o processo de desenvolvimento do tema, a melhor maneira de se compilar o sass \u00e9 utilizando o comando  sass --watch  (ver  documenta\u00e7\u00e3o do sass ) que este recompilar\u00e1 o  .css  sempre que houver modifica\u00e7\u00f5es nos arquivos  .css .  Entre pela linha de comando na pasta  assets/css  do tema filho e execute o seguinte comando:  sass --watch sass/main.scss:main.css  Imagens  Substituindo imagens  Qualquer imagem utilizada pelo tema  BaseV1  pode ser substituida facilmente bastando, para isto, colocar uma imagem de mesmo nome na pasta  assets/img  do tema filho.  Por exemplo, para personalizar as imagens utilizadas como selo de que o conte\u00fado \u00e9 verificado/oficial, basca colocar os arquivos com o bras\u00e3o da institui\u00e7\u00e3o na pasta  assets/img , obviamente respeitando os tamanhos e propor\u00e7\u00f5es (largura e altura).  assets/img/unverified-seal.png\nassets/img/verified-icon.png\nassets/img/verified-seal.png\nassets/img/verified-seal-small.png  Utilizando imagens nos templates  Para utilizar uma nova imagem no tema filho, primeiro coloque o arquivo da imagem na pasta  assets/img  e em seguida chame o arquivo da seguinte forma no template, utilizando a fun\u00e7\u00e3o  asset  do tema:  img src= ?php $this- asset('img/nome-da-imagem.png'); ?     Utilizando imagens nos estilos  Para utilizar uma imagem nos estilos \u00e9 necess\u00e1rio  pedir  para a aplica\u00e7\u00e3o  publicar  esta imagem antes de utiliz\u00e1-la. Para tal basta chamar, no m\u00e9todo  _publishAssets  do arquivo  Theme.php  do tema filho, a fun\u00e7\u00e3o  asset  do tema passando  false  como segundo par\u00e2mtro, que indicando que n\u00e3o \u00e9 para imprimir a url do asset publicado.  exemplos:      protected function _publishAssets() {\n        // somente publica o asset\n        $this- asset('img/imagem-de-fundo.png', false);\n\n        // publica e coloca a url do asset publicado no objeto MapasCulturais.assets para o js\n        $this- jsObject['assets']['logo-instituicao'] = $this- asset('img/logo-instituicao.png', false);\n    }  Substituindo  partes  dos templates  Da mesma forma como acontece com as imagens, quaquer arquivo  .php  das pastas  views  e  layouts  pode ser substituido facilmente, bastando para isto, que seja criado um arquivo com o mesmo nome no tema filho.  Os tr\u00eas arquivos mais comumente substitu\u00eddos, e que j\u00e1 s\u00e3o inclu\u00eddos no template de tema  TemplateV1 , s\u00e3o os seguintes:  layouts/parts/editable-entity-logo.php  // logo que aparece na barrinha cinza da edi\u00e7\u00e3o de entidades\nlayouts/parts/header-about-nav.php      // menu da direita do header\nlayouts/parts/header-logo.php           // logo do site, a esquerda do header  Textos  Os textos utilizados na home e em alguns outros lugares do site, como nos textos das  p\u00e1ginas \"Sobre\" e \"Como Usar\" , s\u00e3o definidos no m\u00e9todo  _getTexts  arquivo  Theme.php . O template de tema  TemplateV1  cont\u00e9m todos os textos  configur\u00e1veis  comentados com os valores padr\u00e3o.  abaixo configuramos alguns textos de acordo com nossa instala\u00e7\u00e3o fict\u00edcia:              'site: name' =  'Macondo Cultural',\n            'site: in the region' =  'na cidade de Macondo',\n            'site: of the region' =  'da cidade de Macondo',\n            'site: owner' =  'Secretaria Municipal de Cultura de Macondo',\n            'site: by the site owner' =  'pela Secretaria Municipal de Cultura de Macondo',\n\n            'home: abbreviation' =   SECONDO ,\n            'home: colabore' =   Colabore com o Macondo Cultural ,\n\n            'search: verified results' =  'Resultados da SECONDO',\n            'search: verified' =   SECONDO   P\u00e1ginas \"Sobre\" e \"Como Usar\"  Os textos das p\u00e1ginas  Sobre  e  Como Usar  s\u00e3o pensados para serem gen\u00e9ricos e utilizam dos textos definidos  acima .  Caso os textos fornecidos pelo tema BaseV1 n\u00e3o supra as necessidades, basta criar os arquivos na pasta  pages  do tema filho e escrever, utilizando as linguagens Markdown ou HTML para formata\u00e7\u00e3o, os novos textos.", 
            "title": "Criando o tema"
        }, 
        {
            "location": "/mc_developer_theme/#configuracoes-fixas-do-tema", 
            "text": "Configurando os mapas  O primeiro passo para configurar\u00b9 o mapas da busca e das p\u00e1ginas de cria\u00e7\u00e3o de agentes e espa\u00e7os, \u00e9 conseguir os valores exatos da latitude, longitude e zoom.  A maneira mais simples de se fazer isto \u00e9 atrav\u00e9s da pr\u00f3pria p\u00e1gina de busca, posicionando e definindo o zoom do mapa exatamente como ele deve se encontrar quando um usu\u00e1rio entrar na busca, e copiando os valores que aparecem na URL como no exemplo abaixo:  /busca/##(global:(enabled:(agent:!t),filterEntity:agent,map:(center:(lat:10.590252550882942,lng:-74.18719768524169),zoom:15)))\nlatitude:  10.590252550882942\nlongitude: -74.18719768524169\nzoom:      15  Ap\u00f3s obter os valores, defina no arquivo  conf-base.php  do tema filho os valores das chaves  'maps.center'  e  'maps.zoom.default'  com os valores obtidos.      // latitude,longitude do centro do mapa da busca e do mapa da cria\u00e7\u00e3o de agentes e espa\u00e7os\n    'maps.center' =  [10.590252550882942, -74.18719768524169],\n\n    // zoom padr\u00e3o do mapa da busca\n    'maps.zoom.default' =  15,  \u00b9 H\u00e1 mais op\u00e7\u00f5es de configura\u00e7\u00f5es dos mapas que n\u00e3o ser\u00e3o abordadas neste documento mas que est\u00e3o comentadas com os valores padr\u00e3o no arquivo  conf-base.php  do TemplateV1.  Divis\u00f5es geogr\u00e1ficas  As divis\u00f5es geogr\u00e1ficas configuradas devem ser as mesmas que foram importadas pelos shapefiles. No nosso exemplo usaremos somente  zona  e  bairro .      'app.geoDivisionsHierarchy' =  [\n        'zona'          =  'Zona',\n        'bairro'        =  'Bairro'\n    ],", 
            "title": "Configura\u00e7\u00f5es fixas do tema"
        }, 
        {
            "location": "/mc_developer_theme/#criando-um-repositorio-do-tema-no-github", 
            "text": "\u00c9 recomendado que ao criar o tema ou efetuar altera\u00e7\u00f5es no tema, as altera\u00e7\u00f5es estejam em um reposit\u00f3rio git para posteriormente seja poss\u00edvel clonar o tema de qualquer lugar, seja para utilizar em um servidor em produ\u00e7\u00e3o ou para utilizar um ambiente de desenvolvimento.  Criando o reposit\u00f3rio  Para criar o reposit\u00f3rio \u00e9 necess\u00e1rio seguir os seguintes passos:\n- Criar uma conta no  Github \n- No menu superior direito apertar a op\u00e7\u00e3o  New Repository \n- Preencher a caixa de texto  Repository name  com o nome do reposit\u00f3rio (recomend\u00e1vel utilizar o mesmo nome escolhido na pasta do tema, para que ao clonar o reposit\u00f3rio o nome fique correto)\n- Apertar o bot\u00e3o  Create repository \n- Executar os seguintes comandos ap\u00f3s criar o reposit\u00f3rio (alterando  Macondo  para o nome do seu reposit\u00f3rio/tema):  $ echo  # Macondo    README.md\n$ git init\n$ git add --all\n$ git commit -m  first commit \n$ git remote add origin https://github.com/[endereco_github]/Macondo.git\n$ git push -u origin master  Publicando altera\u00e7\u00f5es  Dentro da pasta do tema, se alguma altera\u00e7\u00e3o for feita em qualquer arquivo ser\u00e1 poss\u00edvel ver os arquivos que foram alterados utilizando o comando  git status , mostrando os arquivos modificados. Ao alterar arquivos o resultado deve ser parecido com isso:  On branch master\nYour branch is up-to-date with 'origin/master'.\nChanges not staged for commit:\n  (use  git add  file ...  to update what will be committed)\n  (use  git checkout --  file ...  to discard changes in working directory)\n\n    modified:   Theme.php\n    modified:   conf-base.php\n\nno changes added to commit (use  git add  and/or  git commit -a )  Neste exemplo, houveram altera\u00e7\u00f5es nos arquivos  Theme.php  e no arquivo  conf-base.php . Para publicar esse arquivos \u00e9 necess\u00e1rio utilizar os comandos \n-  git add [nome_do_arquivo] \n-  git commit -m \"[mensagem_com_descricao_da_alteracao]\" \n-  git push  Como no exemplo, para publicar os arquivos  Theme.php  e  conf-base.php  os comando seriam assim:  $git add Theme.php\n$git add conf-base.php\n$git commit -m  Altera\u00e7\u00f5es de configura\u00e7\u00f5es do Tema \n$git push  Clonando e atualizando a partir do reposit\u00f3rio  Ap\u00f3s as altera\u00e7\u00f5es estarem publicadas em um reposit\u00f3rio do Github, podemos obter o c\u00f3digo publicado com o comando  git clone https://github.com/[endereco_github]/Macondo , isso ir\u00e1 criar uma pasta chamada  Macondo  onde o comando foi executado. Preferencialmente executado da pasta  themes  da instala\u00e7\u00e3o do mapas:  $ cd src/protected/application/themes\n$ git clone https://github.com/[endereco_github]/Macondo  Se alguma altera\u00e7\u00e3o for efetuada no reposit\u00f3rio do Github e for necess\u00e1rio atualizar o tema localmente, pode se utilizar o comando  git pull  para atualizar o c\u00f3digo localmente.   IMPORTANTE:  Ao utilizar o comando  git pull  verificar se n\u00e3o existem arquivos locais que foram alterados e podem ser sobrescritar ou gerar algum conflito.   Para mais detalhes sobre como utilizar o git, \u00e9 recomend\u00e1vel a leitura da documenta\u00e7\u00e3o e artigos \u00fateis:\n- https://git-scm.com/book/pt-br/v1/Primeiros-passos-No%C3%A7%C3%B5es-B%C3%A1sicas-de-Git\n- http://rogerdudler.github.io/git-guide/index.pt_BR.html", 
            "title": "Criando um reposit\u00f3rio do tema no Github"
        }, 
        {
            "location": "/mc_developer_theme/#estrutura-de-arquivos-do-tema-basev1", 
            "text": "BaseV1/  db-updates.php   scripts para atualiza\u00e7\u00e3o de banco que afetam todos os temas filhos.  Theme.php   classe  MapasCulturais\\Themes\\BaseV1\\Theme . Todos os temas filhos estendem esta classe.  assets/   pasta onde ficam os arquivos est\u00e1ticos  css/  sass/   arquivos fonte .scss ( precisam ser compilados ).    fonts/   as fontes utilizadas no tema BaseV1.  img/   as imagens utilizadas no tema BaseV1.  agrupador-agente.png   pin para grupo de  agentes  no mapa da busca.  agrupador-combinado-agente-evento.png   pin para grupo de  agentes e eventos  no mapa da busca.  agrupador-combinado-espaco-agente.png   pin para grupo de  agentes e espa\u00e7os  no mapa da busca.  agrupador-combinado-espaco-evento.png   pin para grupo de  espa\u00e7os e eventos  no mapa da busca.  agrupador-combinado.png   pin para grupo de  agentes, espa\u00e7os e eventos  no mapa da busca.  agrupador-espaco.png   pin para grupo de  espa\u00e7os  no mapa da busca.  agrupador-evento.png   pin para grupo de  eventos  no mapa da busca.  avatar--agent.png   avatar padr\u00e3o do agente - imagem que aparece como avatar do agente quando o usu\u00e1rio n\u00e3o subiu nunhuma imagem.  avatar--event.png   avatar padr\u00e3o do evento - imagem que aparece como avatar do evento quando o usu\u00e1rio n\u00e3o subiu nunhuma imagem.  avatar--project.png   avatar padr\u00e3o do projeto - imagem que aparece como avatar do projeto quando o usu\u00e1rio n\u00e3o subiu nunhuma imagem.  avatar--space.png   avatar padr\u00e3o do espa\u00e7o - imagem que aparece como avatar do espa\u00e7o quando o usu\u00e1rio n\u00e3o subiu nunhuma imagem.  favicon-32.ico   favicon de 32px.  favicon.ico   favicon de 16px.  fundo.png  icon-circulo.png   \u00edcone do bot\u00e3o de selecionar uma \u00e1rea do mapa da busca.  icon-fullscreen.png   \u00edcone do bot\u00e3o fullscreen dos mapas.  icon-localizacao.png   \u00edcone do bot\u00e3o que centraliza o mapa baseado na localiza\u00e7\u00e3o do usu\u00e1rio.  icon-zoom-in.png   \u00edcone do bot\u00e3o de zoom + dos mapas.  icon-zoom-out.png   \u00edcone do bot\u00e3o de zoom - dos mapas.  instituto-tim-white.png  layers.png   \u00edcone do bot\u00e3o para selecionar as camadas para serem exibidas no mapa da busca.  marca-da-org.png    logotipo da marca da organiza\u00e7\u00e3o.  marker-icon.png   pin que exibe a localiza\u00e7\u00e3o do usu\u00e1rio no mapa da busca.  pin-agente.png   pin do agente (n\u00e3o agrupado) nos mapas.  pin-espaco.png   pin do espa\u00e7o (n\u00e3o agrupado) nos mapas.  pin-evento.png   pin do evento (n\u00e3o agrupado) nos mapas.  pin-sombra.png   sombra dos pins.  setinhas-editable.png   setinhas utilizadas nas caixas de edi\u00e7\u00e3o dos campos das entidades.  share.png   imagem padr\u00e3o utilizada nos compartilhamentos (facebook, google+, etc.) quando n\u00e3o h\u00e1 outra imagem a ser utilizada, como por exemplo o avatar da entidade.  spinner_192.gif   spinner que \u00e9 utilizado no carregamento dos v\u00eddeos das entidades.  spinner-black.gif   spinner que \u00e9 utilizado em diversas partes do tema quando o fundo \u00e9 claro.  spinner.gif   spinner que \u00e9 utilizado em diversas partes do tema quando o fundo \u00e9 escuro.  tim.png  unverified-seal.png  verified-icon.png  verified-seal.png  verified-seal-small.png  tour/    js/  vendor/    layouts/  default.php  search.php  panel.php  parts/  agenda-content.php  agenda-header.php  agenda.php  ajax-uploader.php  busca-avancada.php  downloads.php  editable-entity-logo.php  editable-entity.php  entity-parent.php  entity-status.php  footer.php  gallery.php  header-about-nav.php  header-logo.php  header-main-nav.php  header.php  link-list.php  metalist-form-template.php  owner.php  panel-agent.php  panel-app.php  panel-em-cartaz.php  panel-event.php  panel-nav.php  panel-project.php  panel-registration.php  panel-space.php  panel-seal.php  redes-sociais.php  related-agents.php  templates.php  verified.php  video-gallery.php  widget-areas.php  widget-tags.php      pages/  como-usar.md  _left.md  _right.md  sobre.md    views/  agent/  create.php  -  single.php  edit.php  -  single.php  single.php    app/  create.php  edit.php  single.php  -  edit.php    auth/  fake-authentication.php    event/  create.php  -  single.php  edit.php  -  single.php  single.php    generic/  edit.php  list.php    panel/  agents.php  apps.php  em-cartaz.php  events.php  generic.php  index.php  projects.php  registrations.php  require-authentication.php  spaces.php    project/  create.php  -  single.php  edit.php  -  single.php  report.php  single.php    registration/  edit.php  single.php    site/  index.php  page.php  permission-denied.php  search.php    space/  create.php  -  single.php  edit.php  -  single.php  single.php", 
            "title": "Estrutura de arquivos do tema BaseV1"
        }
    ]
}